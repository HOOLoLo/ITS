[{"/Users/xxxxxxqq/ITS/deckgl/src/index.js":"1","/Users/xxxxxxqq/ITS/deckgl/src/components/front_glass/wallpaper.js":"2","/Users/xxxxxxqq/ITS/deckgl/src/components/airQuality.js":"3","/Users/xxxxxxqq/ITS/deckgl/src/components/front_glass/welcome.js":"4","/Users/xxxxxxqq/ITS/deckgl/src/components/sliderexample.js":"5","/Users/xxxxxxqq/ITS/deckgl/src/components/routeMap.js":"6","/Users/xxxxxxqq/ITS/deckgl/src/components/panel/control.js":"7","/Users/xxxxxxqq/ITS/deckgl/src/components/lineChart/main.js":"8","/Users/xxxxxxqq/ITS/deckgl/src/components/city/city.js":"9","/Users/xxxxxxqq/ITS/deckgl/src/components/Barchart/main.js":"10","/Users/xxxxxxqq/ITS/deckgl/src/components/streamgraph/main.js":"11","/Users/xxxxxxqq/ITS/deckgl/src/components/WorkFlow/news.js":"12","/Users/xxxxxxqq/ITS/deckgl/src/components/covid-19.jsx":"13","/Users/xxxxxxqq/ITS/deckgl/src/components/sliderTraffic.js":"14","/Users/xxxxxxqq/ITS/deckgl/src/components/lineChart/ColorLegend.js":"15","/Users/xxxxxxqq/ITS/deckgl/src/components/city/AxisBottom.js":"16","/Users/xxxxxxqq/ITS/deckgl/src/components/city/useData.js":"17","/Users/xxxxxxqq/ITS/deckgl/src/components/city/ColorLegend.js":"18","/Users/xxxxxxqq/ITS/deckgl/src/components/city/Marks.js":"19","/Users/xxxxxxqq/ITS/deckgl/src/components/city/AxisLeft.js":"20","/Users/xxxxxxqq/ITS/deckgl/src/components/Barchart/useData.js":"21","/Users/xxxxxxqq/ITS/deckgl/src/components/Barchart/Marks.js":"22","/Users/xxxxxxqq/ITS/deckgl/src/components/streamgraph/Marks.js":"23","/Users/xxxxxxqq/ITS/deckgl/src/components/charts/panel.js":"24","/Users/xxxxxxqq/ITS/deckgl/src/components/streamgraph/useData.js":"25","/Users/xxxxxxqq/ITS/deckgl/src/components/charts/charts.js":"26","/Users/xxxxxxqq/ITS/deckgl/src/components/sliderCovid.js":"27","/Users/xxxxxxqq/ITS/deckgl/src/components/magicmirror/Mirror.js":"28","/Users/xxxxxxqq/ITS/deckgl/src/components/magicmirror/Clock.js":"29","/Users/xxxxxxqq/ITS/deckgl/src/components/magicmirror/Navi.js":"30","/Users/xxxxxxqq/ITS/deckgl/src/components/magicmirror/Weather.js":"31","/Users/xxxxxxqq/ITS/deckgl/src/components/magicmirror/St.js":"32","/Users/xxxxxxqq/ITS/deckgl/src/components/magicmirror/Appo.js":"33"},{"size":2405,"mtime":1619264260546,"results":"34","hashOfConfig":"35"},{"size":1606,"mtime":1619249325178,"results":"36","hashOfConfig":"35"},{"size":8661,"mtime":1619249325178,"results":"37","hashOfConfig":"35"},{"size":1852,"mtime":1619249325179,"results":"38","hashOfConfig":"35"},{"size":781,"mtime":1619249325180,"results":"39","hashOfConfig":"35"},{"size":156134,"mtime":1619249325179,"results":"40","hashOfConfig":"35"},{"size":15672,"mtime":1619249325179,"results":"41","hashOfConfig":"35"},{"size":13062,"mtime":1619249325179,"results":"42","hashOfConfig":"35"},{"size":10077,"mtime":1619249325178,"results":"43","hashOfConfig":"35"},{"size":4165,"mtime":1619249325178,"results":"44","hashOfConfig":"35"},{"size":4242,"mtime":1619249325180,"results":"45","hashOfConfig":"35"},{"size":1652,"mtime":1619249325178,"results":"46","hashOfConfig":"35"},{"size":10081,"mtime":1619249325178,"results":"47","hashOfConfig":"35"},{"size":4185,"mtime":1619249325180,"results":"48","hashOfConfig":"35"},{"size":833,"mtime":1619249325179,"results":"49","hashOfConfig":"35"},{"size":498,"mtime":1619249325178,"results":"50","hashOfConfig":"35"},{"size":2854,"mtime":1619249325178,"results":"51","hashOfConfig":"35"},{"size":823,"mtime":1619249325178,"results":"52","hashOfConfig":"35"},{"size":2772,"mtime":1619249325178,"results":"53","hashOfConfig":"35"},{"size":485,"mtime":1619249325178,"results":"54","hashOfConfig":"35"},{"size":1500,"mtime":1619249325178,"results":"55","hashOfConfig":"35"},{"size":16938,"mtime":1619249325177,"results":"56","hashOfConfig":"35"},{"size":2222,"mtime":1619249325180,"results":"57","hashOfConfig":"35"},{"size":728,"mtime":1619249325178,"results":"58","hashOfConfig":"35"},{"size":1500,"mtime":1619249325180,"results":"59","hashOfConfig":"35"},{"size":904,"mtime":1619249325178,"results":"60","hashOfConfig":"35"},{"size":4962,"mtime":1619249325180,"results":"61","hashOfConfig":"35"},{"size":666,"mtime":1619264356249,"results":"62","hashOfConfig":"35"},{"size":1429,"mtime":1619263990385,"results":"63","hashOfConfig":"35"},{"size":2682,"mtime":1619269547431,"results":"64","hashOfConfig":"35"},{"size":467,"mtime":1619263934169,"results":"65","hashOfConfig":"35"},{"size":4515,"mtime":1619270748407,"results":"66","hashOfConfig":"35"},{"size":4188,"mtime":1619272673598,"results":"67","hashOfConfig":"35"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"70","usedDeprecatedRules":"71"},"174qw14",{"filePath":"72","messages":"73","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"74","usedDeprecatedRules":"71"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"77","usedDeprecatedRules":"71"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"80","usedDeprecatedRules":"71"},{"filePath":"81","messages":"82","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"83","usedDeprecatedRules":"71"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":64,"fixableErrorCount":0,"fixableWarningCount":1,"source":"86","usedDeprecatedRules":"71"},{"filePath":"87","messages":"88","errorCount":0,"warningCount":15,"fixableErrorCount":0,"fixableWarningCount":0,"source":"89","usedDeprecatedRules":"71"},{"filePath":"90","messages":"91","errorCount":0,"warningCount":19,"fixableErrorCount":0,"fixableWarningCount":0,"source":"92","usedDeprecatedRules":"71"},{"filePath":"93","messages":"94","errorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"95","usedDeprecatedRules":"71"},{"filePath":"96","messages":"97","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"98","usedDeprecatedRules":"71"},{"filePath":"99","messages":"100","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"101","usedDeprecatedRules":"71"},{"filePath":"102","messages":"103","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"104","usedDeprecatedRules":"71"},{"filePath":"105","messages":"106","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"107","usedDeprecatedRules":"71"},{"filePath":"108","messages":"109","errorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"110","usedDeprecatedRules":"71"},{"filePath":"111","messages":"112","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"71"},{"filePath":"113","messages":"114","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"71"},{"filePath":"115","messages":"116","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"117","usedDeprecatedRules":"71"},{"filePath":"118","messages":"119","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"71"},{"filePath":"120","messages":"121","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"122","usedDeprecatedRules":"71"},{"filePath":"123","messages":"124","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"71"},{"filePath":"125","messages":"126","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"71"},{"filePath":"127","messages":"128","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"129","usedDeprecatedRules":"71"},{"filePath":"130","messages":"131","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"132","usedDeprecatedRules":"71"},{"filePath":"133","messages":"134","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"135","usedDeprecatedRules":"71"},{"filePath":"136","messages":"137","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"71"},{"filePath":"138","messages":"139","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"140","usedDeprecatedRules":"71"},{"filePath":"141","messages":"142","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"143","usedDeprecatedRules":"71"},{"filePath":"144","messages":"145","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"71"},{"filePath":"146","messages":"147","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"71"},{"filePath":"148","messages":"149","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"150","usedDeprecatedRules":"71"},{"filePath":"151","messages":"152","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"71"},{"filePath":"153","messages":"154","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"155","usedDeprecatedRules":"71"},{"filePath":"156","messages":"157","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"/Users/xxxxxxqq/ITS/deckgl/src/index.js",["158","159","160","161"],"import React,{Fragment}from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter as Router, Route,  Switch,Link } from 'react-router-dom'\n\nimport {City} from './components/city/city';\nimport RouteMap from \"./components/routeMap\";\nimport Covid from \"./components/covid-19\";\nimport AirQuality from \"./components/airQuality\";\nimport {StreamG} from \"./components/streamgraph/main\";\nimport {BarG} from \"./components/Barchart/main\";\nimport {Panel} from \"./components/panel/control\";\nimport LineChart from \"./components/lineChart/main\";\nimport './index.css';\nimport Ad from \"./components/sliderexample\"\nimport News from \"./components/WorkFlow/news\"\nimport Welcome from \"./components/front_glass/welcome\"\nimport Wallpaper from \"./components/front_glass/wallpaper.js\"\nimport Mirror from \"./components/magicmirror/Mirror\"\n\nconst map = document.getElementById(\"map\");\n\nfunction Getpage(){\n    return (\n        <Router>\n            <Route>\n                <Route exact path=\"/\">\n                    <RouteMap />\n                </Route>\n                <Route path=\"/covid\">\n                    <Covid />\n                </Route>\n                <Route path=\"/airquality\">\n                    <AirQuality />\n                </Route>\n                <Route path=\"/bubble\">\n                    <City />\n                </Route>\n                <Route path=\"/stream\">\n                    <StreamG />\n                </Route>\n                <Route path=\"/bar\">\n                    <BarG />\n                </Route>\n                <Route path=\"/control\">\n                    <Panel/>\n                </Route>\n                <Route path={\"/slider\"}>\n                    <Ad/>\n                </Route>\n                <Route path={\"/news\"}>\n                    <News/>\n                </Route>\n                <Route path={\"/news\"}>\n                    <News/>\n                </Route>\n                <Route path={\"/welcome\"}>\n                    <Welcome/>\n                </Route>\n                <Route path={\"/wallpaper\"}>\n                    <Wallpaper/>\n                </Route>\n                <Route path=\"/magicmirror\">\n                    <Mirror />\n                </Route>\n            </Route>\n        </Router>\n    )\n}\n\n\n// getData();\n\n// ReactDOM.render(\n//         <Map />,\n//     map\n// );\n\nReactDOM.render(\n    <Getpage />,\n    map\n)\n\n// ReactDOM.render(\n//     <Getpage/>\n//     ,map\n// )\n",["162","163"],"/Users/xxxxxxqq/ITS/deckgl/src/components/front_glass/wallpaper.js",["164","165","166","167","168","169","170"],"import React, {Component} from \"react\";\nfunction loadStyle(code){\n    var style = document.createElement('style');\n    style.appendChild(document.createTextNode(code));\n    var head = document.getElementsByTagName('head')[0];\n    head.appendChild(style);\n}\n\n\nexport default class App extends Component{\n\n    constructor(props) {\n        super(props);\n    }\n    componentDidMount() {\n        // 动态加载 css\n        debugger\n        var code='  html,body{margin:0;padding:0;overflow-y:hidden;}\\n' +\n            '    li {\\n' +\n            '        list-style: none;\\n' +\n            '        float: left;\\n' +\n            '        width: 16.666%;/*三列图片排列*/\\n' +\n            '        height: 100%;\\n' +\n            '        margin: 0;\\n' +\n            '        overflow: hidden;/*超出隐藏*/\\n' +\n            '\\t\\tfont-size: 0;\\n' +\n            '\\n' +\n            '    }\\n' +\n            '    li img {\\n' +\n            '        width: 100%;\\n' +\n            '        height: 100%\\n' +\n            '    }\\n' +\n            '    ul{\\n' +\n            '        margin:0;padding:0\\n' +\n            '    } '\n        loadStyle(code);\n\n    }\n\n    render() {\n\n        return <ul style={{overflow:\"hidden\",clear:\"both;\"}}>\n            <li><img src=\"/content/wallpaper/6.png\"/></li>\n            <li><img src=\"/content/wallpaper/5.png\"/></li>\n            <li><img src=\"/content/wallpaper/4.png\"/></li>\n            <li><img src=\"/content/wallpaper/3.png\"/></li>\n            <li><img src=\"/content/wallpaper/2.png\"/></li>\n            <li><img src=\"/content/wallpaper/1.png\"/></li>\n        </ul>\n\n    }\n\n}\n","/Users/xxxxxxqq/ITS/deckgl/src/components/airQuality.js",["171","172","173","174"],"import React, {Component, Fragment} from 'react';\nimport {render} from 'react-dom';\nimport {StaticMap} from 'react-map-gl';\nimport {AmbientLight, PointLight, LightingEffect} from '@deck.gl/core';\n// import {HexagonLayer} from '@deck.gl/aggregation-layers';\nimport DeckGL from '@deck.gl/react';\nimport { Select,SIZE } from \"baseui/select\";\nimport{ColumnLayer} from \"@deck.gl/layers\";\n\nimport * as d3 from 'd3'\nimport {Provider as StyletronProvider} from \"styletron-react\";\nimport {BaseProvider, LightTheme, styled} from \"baseui\";\nimport SliderTraffic from \"./sliderTraffic\";\n\nimport {Client as Styletron} from 'styletron-engine-atomic';\nconst SelectContainer=styled('div',{\n    position: 'absolute',\n    // display: 'flex',\n    // justifyContent: 'center',\n    // alignItems: 'center',\n    zIndex: 1,\n    top: '50px',\n    right:'10px',\n    width:'20%',\n    height:'10%'\n});\nconst engine = new Styletron();\n\n// Set your mapbox token here\nconst MAPBOX_TOKEN = 'pk.eyJ1IjoiemhpZ3VhbmdkYSIsImEiOiJjanozdXg0b3EwMHh4M21tcXk2MHlpN3B1In0.lInf8zFl2BsP_bDjMFhf3w'; // eslint-disable-line\n\n// Source data CSV\n\nconst ambientLight = new AmbientLight({\n    color: [255, 255, 255],\n    intensity: 1.0\n});\n\nconst pointLight1 = new PointLight({\n    color: [255, 255, 255],\n    intensity: 1.0,\n    position: [0, 0, 80000]\n});\n\nconst pointLight2 = new PointLight({\n    color: [255, 255, 255],\n    intensity: 1.0,\n    position: [180, 0, 80000]\n});\n\nconst lightingEffect = new LightingEffect({ambientLight, pointLight1, pointLight2});\n\nlet qualityMap=new Map()\n\nfunction download(content, fileName, contentType) {\n    var a = document.createElement(\"a\");\n    var file = new Blob([content], {type: contentType});\n    a.href = URL.createObjectURL(file);\n    a.download = fileName;\n    a.click();\n}\n\n// let maxpm10=0;\nfunction getData(){\n    return new Promise(resolve => {\n        d3.json(\"./air.json\").then(data=>{\n            console.log(data)\n            data.results.forEach(d=>{\n                // console.log('d',d);\n                if(d.coordinates){\n                    d.measurements.forEach(l=>{\n                        // if(l.value>maxpm10){\n                        //     maxpm10=l.value;\n                        // }\n                        // console.log(l)\n                        if(qualityMap.has(l.parameter)){\n                            qualityMap.get(l.parameter).push(\n                                {centroid: [d.coordinates.longitude,d.coordinates.latitude], value: l.value},\n                            )\n                        }\n                        else{\n                            qualityMap.set(l.parameter,[{centroid: [d.coordinates.longitude,d.coordinates.latitude], value: l.value}])\n                        }\n                    })\n                }\n            })\n            // console.log('maxpm',maxpm10)\n            // qualityMap.get('pm10').forEach(d=>{\n            //     d.value=(d.value/maxpm10)*1000;\n            // })\n            resolve('0');\n        })\n    })\n}\n\n\n// let p=getData()\n// p.then(results=>{\n//     console.log('qulity',qualityMap)\n// })\n\n\nconst material = {\n    ambient: 0.64,\n    diffuse: 0.6,\n    shininess: 32,\n    specularColor: [51, 51, 51]\n};\n\nconst INITIAL_VIEW_STATE = {\n    longitude:  120.207057,\n    latitude: 30.225901,\n\n    zoom: 3,\n    pitch: 45,\n    bearing: 0\n\n};\n\nconst colorRange = [\n    [1, 152, 189],\n    [73, 227, 206],\n    [216, 254, 181],\n    [254, 237, 177],\n    [254, 173, 84],\n    [209, 55, 78]\n];\n\n\n/* eslint-disable react/no-deprecated */\nexport default class AirQuality extends Component {\n    static get defaultColorRange() {\n        return colorRange;\n    }\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            data:[]\n        };\n\n    }\n\n    componentDidMount() {\n        let p=getData();\n        p.then(results=>{\n            this.setState({\n                data:[]\n            });\n            console.log('qualityMap:',qualityMap)\n        })\n        // this._animate();\n    }\n\n    _renderLayers() {\n\n\n        return [\n        //     new HexagonLayer({\n        //         id: 'heatmap',\n        //         colorRange,\n        //         coverage,\n        //         data,\n        //         elevationRange: [0, 3000],\n        //         elevationScale: data && data.length ? 50 : 0,\n        //         extruded: true,\n        //         getPosition: d => d,\n        //         onHover: this.props.onHover,\n        //         pickable: Boolean(this.props.onHover),\n        //         radius,\n        //         upperPercentile,\n        //         material,\n        //\n        //         transitions: {\n        //             elevationScale: 3000\n        //         }\n        //     })\n\n            new ColumnLayer({\n\n                    id: 'column-layer',\n                    data:this.state.data,\n                    diskResolution: 12,\n                    radius: 5000,\n                    extruded: true,\n                    pickable: true,\n                    elevationScale: 5000,\n                    getPosition: d => d.centroid,\n                    getFillColor: d => {\n                        let k=(Math.log(d.value)/Math.log(4)).toFixed(0);\n                        if(k<=5){\n                            return colorRange[k]\n                        }\n                        else{\n                            return colorRange[5]\n                        }\n                    },\n                    getLineColor: [0, 0, 0],\n                getElevation:d=>d.value,\n                transitions:{\n                    getElevation:{\n                        duration: 3000,\n                        // type: 'spring',\n                        // stiffness: 0.01,\n                        // damping: 0.15,\n                        // easing: d3.easeCubicInOut,\n                        enter: d => {\n                            console.log(d);\n                            let tmp=[];\n                            for(let i=0;i<300;i++){\n                                tmp.push(d[0]*i/300)\n                            }\n                            console.log(tmp)\n                            return tmp;\n                        },\n                    }\n                },\n\n                updateTriggers:{\n                    getElevation: [this.state.data],\n                }\n\n                // onHover: ({object, x, y}) => {\n                //     const tooltip = `height: ${object.value * 5000}m`;\n                //\n                // }\n            })\n         ];\n\n    }\n\n    render() {\n        const {mapStyle = 'mapbox://styles/mapbox/dark-v9'} = this.props;\n\n        return (\n            <Fragment>\n                <DeckGL\n                    layers={this._renderLayers()}\n                     effects={[lightingEffect]}\n                    initialViewState={INITIAL_VIEW_STATE}\n                    controller={true}\n                >\n                    <StaticMap\n                        reuseMaps\n                        mapStyle={mapStyle}\n                        preventStyleDiffing={true}\n                        mapboxApiAccessToken={MAPBOX_TOKEN}\n                    />\n                </DeckGL>\n                <StyletronProvider value={engine}>\n                    <BaseProvider theme={LightTheme}>\n                        <SelectContainer>\n                            <Select\n                                options={[\n                                    {label:\"pm10\",id:'pm10'},\n                                    {label:\"pm25\",id:'pm25'},\n                                    { label: \"co\", id: \"co\" },\n                                    { label: \"no2\", id: \"no2\" },\n                                    { label: \"so2\", id: \"so2\" },\n                                    { label: \"o3\", id: \"o3\" },\n                                    { label: \"bc\", id: \"bc\" },\n                                ]}\n                                value={this.state.label}\n                                placeholder=\"选择污染类型\"\n                                // onChange={params => setValue(params.value)}\n                                size={SIZE.mini}\n                                clearable={true}\n                                onChange={parems=> {\n                                    this.setState({\n                                        data:qualityMap.get(parems.option.id),\n                                        label:{label:parems.option.label,id:parems.option.id}\n                                    })\n\n                                }}\n                            />\n                        </SelectContainer>\n                    </BaseProvider>\n                </StyletronProvider>\n            </Fragment>\n\n\n\n    );\n    }\n}\n","/Users/xxxxxxqq/ITS/deckgl/src/components/front_glass/welcome.js",["175"],"import React, {Component} from \"react\";\nfunction loadStyle(code){\n    var style = document.createElement('style');\n    style.appendChild(document.createTextNode(code));\n    var head = document.getElementsByTagName('head')[0];\n    head.appendChild(style);\n}\nexport default class App extends Component{\n    constructor(props) {\n        super(props);\n    }\n    componentDidMount() {\n    // 动态加载 css\n        var code=' html,body{margin:0;padding:0;overflow-y:hidden;overflow-x:hidden}\\n' +\n            '    li {\\n' +\n            '        list-style: none;\\n' +\n            '        float: left;\\n' +\n            '        width: 100%;\\n' +\n            '        height: 100%;\\n' +\n            '        margin: 0 ;\\n' +\n            '        overflow: hidden;/*超出隐藏*/\\n' +\n            '        font-size: 0;\\n' +\n            '\\n' +\n            '    }\\n' +\n            '    li img {\\n' +\n            '        width: 100%;\\n' +\n            '        height: 100%;\\n' +\n            '        overflow-x:hidden\\n' +\n            '    }\\n' +\n            '    li video{\\n' +\n            '        width: 5670px;\\n' +\n            '        height: 1080px;\\n' +\n            '        overflow-x:hidden;\\n' +\n            '        object-fit: fill;\\n '  +\n            '    }\\n' +\n            '    ul{\\n' +\n            '        margin:0;padding:0;\\n' +\n            '        overflow-x:hidden;\\n' +\n            '    } '\n        loadStyle(code);\n        var speed = 0.5;//设置速度\n\n        var vdo = document.getElementById(\"video\");//获取id\n        vdo.playbackRate = speed;//改变速度\n    }\n\n    render() {\n\n        return <ul style={{overflow:\"hidden\",clear:\"both\"}}>\n                <li>\n                    <video src=\"content/welcome/welcome.mp4\" autoPlay muted=\"muted\" loop=\"loop\" id='video'></video>\n                </li>\n        </ul>\n\n    }\n\n}\n","/Users/xxxxxxqq/ITS/deckgl/src/components/sliderexample.js",["176"],"import * as React from 'react';\nimport {Slider} from 'baseui/slider';\nconst background={\n    width: \"30%\",\n    margin: \"30px auto\",\n    backgroundColor: \"#FFFFFF\",\n    // [\"#FF895D\",\"#FF6836\",\"#F3470D\",\"#D13808\",\"#A4300C\",\"#7A270E\"],\n    minHeight: \"0px\",\n    boxSizing: \"border-box\",\n    position: \"fixed\",\n    // top: \"80%\",\n    bottom:\"10%\",\n    border:\"10px\",\n    dashed: \"#FF6836\",\n    opacity:1,\n    zIndex:1\n};\nexport default () => {\n    const [value, setValue] = React.useState([60]);\n    return (\n        <div id={'background'} style ={background}>\n            <Slider\n                value={value}\n                onChange={({ value }) => value && setValue(value)}\n                onFinalChange={({ value }) => console.log(value)}\n            />\n        </div>\n    );\n};\n","/Users/xxxxxxqq/ITS/deckgl/src/components/routeMap.js",["177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240"],"// /// app.js\nimport React,{Fragment} from 'react';\nimport DeckGL from '@deck.gl/react';\nimport {TripsLayer} from '@deck.gl/geo-layers';\nimport {StaticMap} from 'react-map-gl';\nimport * as d3 from 'd3'\nimport F2 from '@antv/f2';\nimport {WebMercatorViewport} from '@deck.gl/core';\nimport { Radar } from '@antv/g2plot';\nimport _ from 'lodash';\n//\n// // Set your mapbox access token here\n// const MAPBOX_ACCESS_TOKEN = 'pk.eyJ1IjoiemhpZ3VhbmdkYSIsImEiOiJjanozdXg0b3EwMHh4M21tcXk2MHlpN3B1In0.lInf8zFl2BsP_bDjMFhf3w';\n//\n// // Initial viewport settings\n// const initialViewState = {\n//     longitude: -122.41669,\n//     latitude: 37.7853,\n//     zoom: 13,\n//     pitch: 0,\n//     bearing: 0\n// };\n//\n// // Data to be used by the LineLayer\n// const data = [   {\n//              waypoints: [{coordinates: [-122.3907988, 37.7664413], timestamp: 1554772579000},\n//                      {coordinates: [-122.3908298,37.7667706], timestamp: 1554772579010},\n//                      {coordinates: [-122.4485672, 37.8040182], timestamp: 1554772580200}\n//              ]\n//      }];\n//\n// class App extends React.Component {\n//     render() {\n//         const layers = [\n//             new TripsLayer({id: 'trips-layer', data,\n//                 getPath:d => d.waypoints.map(p => p.coordinates),\n//                 getTimestamps: d => d.waypoints.map(p => p.timestamp - 1554772579000),\n//                 getColor: [253, 128, 93],\n//                 opacity: 0.8,\n//                 widthMinPixels: 5,\n//                 rounded: true,\n//                 trailLength: 200,\n//                 currentTime: 0\n//\n//             })\n//         ];\n//\n//         return (\n//             <DeckGL\n//                 initialViewState={initialViewState}\n//                 controller={true}\n//                 layers={layers}\n//             >\n//                 <StaticMap mapboxApiAccessToken={MAPBOX_ACCESS_TOKEN} />\n//             </DeckGL>\n//         );\n//     }\n// }\n// ReactDOM.render(<App />, document.getElementById('root'));\nimport {Component} from 'react';\nimport {AmbientLight, PointLight, LightingEffect} from '@deck.gl/core';\nimport {PathLayer,ColumnLayer, PolygonLayer,IconLayer,ScatterplotLayer,ArcLayer} from '@deck.gl/layers';\nimport SliderTraffic from \"./sliderTraffic\";\nimport { Select,SIZE } from \"baseui/select\";\nimport {BaseProvider, LightTheme, styled} from \"baseui\";\nimport {Client as Styletron} from 'styletron-engine-atomic';\nimport {Provider as StyletronProvider} from 'styletron-react';\nimport { SelectionLayer } from '@nebula.gl/layers';\nimport { EditableGeoJsonLayer} from 'nebula.gl';\nimport Charts from './charts/charts'\nimport {HexagonLayer} from '@deck.gl/aggregation-layers';\nimport Panel from \"./charts/panel\";\nimport { DrawPolygonMode } from \"@nebula.gl/edit-modes\";\nimport { Toolbox } from \"@nebula.gl/editor\";\nimport 'boxicons'\nimport {Bar, Pie, Area, Column} from '@antv/g2plot';\nimport { G2,Line } from '@antv/g2plot';\nimport {keys} from \"@material-ui/core/styles/createBreakpoints\";\n\n\n\nconst piedata=[\n    {type:'0-10',value:0},\n    {type:'10-20',value:0},\n    {type:'20-30',value:0},\n    {type:'30-40',value:0},\n    {type:'40-50',value:0},\n    {type:'50-60',value:0},\n    {type:'60-70',value:0},\n    {type:'70-80',value:0},\n    {type:'80-90',value:0},\n    {type:'90-100',value:0},\n    {type:'100-110',value:0},\n    {type:'110-120',value:0},\n    {type:'120+',value:0},\n\n    ];\n\n\nfunction getpie(){\n    return new Promise(resolve => {\n    Beijingdata.forEach(d=>{\n        if (d['value']>=0&&d['value']<10)piedata[0].value++;\n        else if(d['value']>=10&&d['value']<20)piedata[1].value++;\n        else if(d['value']>=20&&d['value']<30)piedata[2].value++;\n        else if(d['value']>=30&&d['value']<40)piedata[3].value++;\n        else if(d['value']>=40&&d['value']<50)piedata[4].value++;\n        else if(d['value']>=50&&d['value']<60)piedata[5].value++;\n        else if(d['value']>=60&&d['value']<70)piedata[6].value++;\n        else if(d['value']>=70&&d['value']<80)piedata[7].value++;\n        else if(d['value']>=80&&d['value']<90)piedata[8].value++;\n        else if(d['value']>=90&&d['value']<100)piedata[9].value++;\n        else if(d['value']>=100&&d['value']<110)piedata[10].value++;\n        else if(d['value']>=110&&d['value']<120)piedata[11].value++;\n        else if(d['value']>=120)piedata[12].value++;\n    });\n    resolve();\n    })\n}\n// import {\n//     Editor,\n//     EditingMode,\n//     DrawLineStringMode,\n//     DrawPolygonMode,\n// } from \"react-map-gl-draw\";\n\n\nconst background={\n    width: \"30%\",\n    margin: \"30px auto\",\n    backgroundColor: \"#FFFFFF\",\n        // [\"#FF895D\",\"#FF6836\",\"#F3470D\",\"#D13808\",\"#A4300C\",\"#7A270E\"],\n    minHeight: \"0px\",\n    boxSizing: \"border-box\",\n    position: \"fixed\",\n    // top: \"80%\",\n    bottom:\"10%\",\n    border:\"10px\",\n    dashed: \"#FF6836\",\n    opacity:1,\n    zIndex:1\n};\n\n\n\nconst SelectContainer=styled('div',{\n    position: 'absolute',\n    // display: 'flex',\n    // justifyContent: 'center',\n    // alignItems: 'center',\n    zIndex: 1,\n    top: '50px',\n    right:'10px',\n    width:'15%',\n    // height:'5%'\n});\nconst SelectContainer2=styled('div',{\n    position: 'absolute',\n    // display: 'flex',\n    // justifyContent: 'center',\n    // alignItems: 'center',\n    zIndex: 1,\n    top: '50px',\n    left:'10px',\n    width:'15%',\n    // height:'5%'\n});\n\nconst engine = new Styletron();\n// Set your mapbox token here\nconst MAPBOX_TOKEN = 'pk.eyJ1IjoiemhpZ3VhbmdkYSIsImEiOiJjanozdXg0b3EwMHh4M21tcXk2MHlpN3B1In0.lInf8zFl2BsP_bDjMFhf3w';\n\n//加载区域数据\nvar depData=[];\nvar depCenter=[];\nlet desCenter=[];\nlet desData=[];\nlet depPolygon=[];\nlet desPolygon=[];\n\nlet colorTable=[[128,255,0,255],[255,255,40,255],[255,128,0,255],[255,64,64,255],[255,0,0,255]];\nconst ICON_MAPPING = {\n    marker: {x: 0, y: 0, width: 32, height: 32, mask: true}\n};\n// Source data CSV\n// const DATA_URL = {\n//     BUILDINGS:\n//         'https://raw.githubusercontent.com/uber-common/deck.gl-data/master/examples/trips/buildings.json', // eslint-disable-line\n//     TRIPS:\n//         'https://raw.githubusercontent.com/uber-common/deck.gl-data/master/examples/trips/trips-v7.json' // eslint-disable-line\n// };\n\nconst ambientLight = new AmbientLight({\n    color: [255, 255, 255],\n    intensity: 1.0\n});\n\nconst pointLight = new PointLight({\n    color: [255, 255, 255],\n    intensity: 2.0,\n    position: [120.167057, 30.185901, 8000]\n});\n\nconst lightingEffect = new LightingEffect({ambientLight, pointLight});\n\nconst material = {\n    ambient: 0.1,\n    diffuse: 0.9,\n    shininess: 64,\n    specularColor: [60, 64, 70]\n};\nconst DEFAULT_THEME = {\n    buildingColor: [74, 80, 87],\n    trailColor0: [253, 128, 93],\n    trailColor1: [23, 184, 190],\n    material,\n    effects: [lightingEffect]\n};\nconst INITIAL_VIEW_STATE = {\n    longitude:  120.207057,\n    latitude: 30.225901,\n    // longitude:-74.00823,\n    // latitude: 40.71351,\n    zoom: 12.4,\n    pitch: 45,\n    bearing: 0\n};\n\n\nconst BEIJIN_VIEW_STATE ={\n    longitude:  116.39739990234375,\n    latitude: 39.915002988576155,\n    // longitude:-74.00823,\n    // latitude: 40.71351,\n    zoom: 12.4,\n    pitch: 45,\n    bearing: 0\n}\n//柱状图的颜色\nconst colorRange = [\n    [1, 152, 189],\n    [73, 227, 206],\n    [216, 254, 181],\n    [254, 237, 177],\n    [254, 173, 84],\n    [209, 55, 78]\n];\n// d3.json(\"https://api.openaq.org/v1/latest?limit=10000\").then(data=>{\n//     console.log(data)\n// })\nvar Routes=[];\nfunction Rad(d){\n    return d * Math.PI / 180.0;//经纬度转换成三角函数中度分表形式。\n}\n\n\nvar getDistance=function(lng1,lat1,lng2,lat2){\n    var radLat1 = Rad(lat1);\n    var radLat2 = Rad(lat2);\n    var a = radLat1 - radLat2;\n    var  b = Rad(lng1) - Rad(lng2);\n    var s = 2 * Math.asin(Math.sqrt(Math.pow(Math.sin(a/2),2) +\n        Math.cos(radLat1)*Math.cos(radLat2)*Math.pow(Math.sin(b/2),2)));\n    s = s *6378.137 ;// EARTH_RADIUS;\n    s = Math.round(s * 10000) / 10000; //输出为公里\n    //s=s.toFixed(4);\n    return s;\n};\n\n// var od=[];\n\nfunction getRouteByTime(time){\n    let data=[];\n    d3.json(\"http://10.72.100.14:8888/query/\"+time).then(d=>{\n            let pAll=[];\n            d.map((dd,index)=>{\n                setInterval(index*10);\n                pAll.push(new Promise((resolve,reject)=>{\n                    var url = 'https://api.mapbox.com/directions/v5/mapbox/cycling/' + dd[3] + ',' + dd[4] + ';' + dd[5] + ',' + dd[6] + '?steps=true&geometries=geojson&access_token=' + 'pk.eyJ1IjoiemhpZ3VhbmdkYSIsImEiOiJjanozdXg0b3EwMHh4M21tcXk2MHlpN3B1In0.lInf8zFl2BsP_bDjMFhf3w';\n                    var req = new XMLHttpRequest();\n                    req.open('GET', url, true);\n                    req.send();\n                    req.onload=function () {\n                        var json = JSON.parse(req.response);\n                        data.push(json);\n                        console.log('oneRoute:',json);\n                        resolve()\n                    };\n                    req.ontimeout=function () {\n                        reject()\n                    }\n                }))\n\n            })\n            Promise.all(pAll).then(()=>{\n                // console.log('queryroute:',data)\n                console.log(JSON.stringify(data))\n\n            },()=>{\n                // console.log('queryroute:',data)\n                console.log(JSON.stringify(data))\n\n            })\n    });\n\n    setTimeout(()=>{\n        console.log(JSON.stringify(data))\n    },70000)\n}\n\nfunction gerRouteByPoint(start,end){\n\n}\n\n// getRouteByTime(1584);\n\n\nvar getRoutedata=function(start,end) {\n\n    var url = 'https://api.mapbox.com/directions/v5/mapbox/cycling/' + depCenter[start][0] + ',' + depCenter[start][1] + ';' + desCenter[end][0] + ',' + desCenter[end][1] + '?steps=true&geometries=geojson&access_token=' + 'pk.eyJ1IjoiemhpZ3VhbmdkYSIsImEiOiJjanozdXg0b3EwMHh4M21tcXk2MHlpN3B1In0.lInf8zFl2BsP_bDjMFhf3w';\n\n    // make an XHR request https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest\n    var req = new XMLHttpRequest();\n    req.open('GET', url, true);\n    req.send();\n    req.onload = function () {\n        var json = JSON.parse(req.response);\n        // console.log('route:',json)\n        var data = json.routes[0];\n        var route = data.geometry.coordinates;\n        var timestamps=[0];//先设置每条路径1000stamp\n        for(var i=0;i<route.length;i++){\n            if(i!==0){\n                var dist=getDistance(route[i-1][0],route[i-1][1],route[i][0],route[i][1])*50;\n                timestamps.push(dist+timestamps[i-1])\n            }\n        }\n        var geojson = {\n            'path': route,\n            'timestamps':timestamps,\n        };\n        console.log(geojson);\n        Routes.push(geojson)\n\n    }\n};\n//getRoutedata([120.167057,30.185901], [120.302548\t,30.399632])\n// var getRoute=new function(time) {\n//     // var gets = [];\n//     d3.csv(\"./edge_dep_csv.csv\").then(function (data) {\n//\n//         let re=/([-+]?[0-9]*\\.?[0-9]+)/g;\n//         console.log('data1:',data)\n//         data.forEach(d=>{\n//             let tmp=d.value.match(re)\n//             let tmpData=[];\n//             for(let i=0;i<tmp.length-1;i+=2){\n//                 tmpData.push([parseFloat(tmp[i+1]),parseFloat(tmp[i])])\n//             }\n//             depData.push(tmpData)\n//         })\n//         depData.forEach(d=>{\n//             let sumlong=0\n//             let sumlat=0;\n//             d.forEach(data=>{\n//                 sumlong+=data[0];\n//                 sumlat+=data[1];\n//             })\n//             depCenter.push([sumlong/d.length,sumlat/d.length])\n//         })\n//         d3.csv(\"./edge_des_csv.csv\").then(function (data) {\n//             let re=/([-+]?[0-9]*\\.?[0-9]+)/g\n//             console.log('data2:',data)\n//             data.forEach(d=>{\n//                 let tmp=d.value.match(re)\n//                 let tmpData=[];\n//                 for(let i=0;i<tmp.length-1;i+=2){\n//                     tmpData.push([parseFloat(tmp[i+1]),parseFloat(tmp[i])])\n//                 }\n//                 desData.push(tmpData)\n//             })\n//             desData.forEach(d=>{\n//                 let sumlong=0;\n//                 let sumlat=0;\n//                 d.forEach(data=>{\n//                     sumlong+=data[0];\n//                     sumlat+=data[1];\n//                 })\n//                 desCenter.push([sumlong/d.length,sumlat/d.length])\n//             });\n//             // d3.json('http://localhost:5000/data/12:00:00').then(function(data){\n//             //     data.forEach(d=>{\n//             //         var tmp=d.split(',');\n//             //         if(tmp[0]!=-1 && tmp[1]!=-1) {\n//             //             if(tmp[0]>46&&tmp[0]<=60){\n//             //              //   if (tmp[2] !== '0') {\n//             //                 var urlNow = 'https://api.mapbox.com/directions/v5/mapbox/cycling/' + depCenter[tmp[0]][0].toFixed(6) + ',' + depCenter[tmp[0]][1].toFixed(6) + ';' + desCenter[tmp[1]][0].toFixed(6) + ',' + desCenter[tmp[1]][1].toFixed(6) + '?steps=true&geometries=geojson&access_token=' + MAPBOX_TOKEN;\n//             //                 gets.push($.ajax({\n//             //                     type: 'GET',\n//             //                     url: urlNow,\n//             //                     success: function (r) {\n//             //                         console.log('r:', r)\n//             //                         //var json = JSON.parse(data);\n//             //                         var plan = r.routes[0];\n//             //                         var route = plan.geometry.coordinates;\n//             //                         var timestamps = [0];//先设置每条路径1000stamp\n//             //                         for (var i = 0; i < route.length; i++) {\n//             //                             if (i !== 0) {\n//             //                                 var dist = getDistance(route[i - 1][0], route[i - 1][1], route[i][0], route[i][1]) * 50;\n//             //                                 timestamps.push(dist + timestamps[i - 1])\n//             //                             }\n//             //                         }\n//             //                         var geojson = {\n//             //                             'vendor': 1,\n//             //                             'path': route,\n//             //                             'timestamps': timestamps,\n//             //\n//             //                         };\n//             //                         console.log(geojson)\n//             //                         Routes.push(geojson)\n//             //                         saveJson[tmp[0]+','+tmp[1]] = geojson\n//             //                     },\n//             //                     error:function(){\n//             //                         console.log('err')\n//             //                     }\n//             //                 }));\n//             //\n//             //            // }\n//             //             }\n//             //         }\n//             //     })\n//             //     // url.forEach(function(value) {\n//             //     //     console.log('url:',value)\n//             //     //     gets.push($.ajax({\n//             //     //         type: 'GET',\n//             //     //         url: value,\n//             //     //         success: function(data) {\n//             //     //             console.log('data:',data)\n//             //     //             //var json = JSON.parse(data);\n//             //     //             var plan = data.routes[0];\n//             //     //             var route = plan.geometry.coordinates;\n//             //     //             var timestamps=[0];//先设置每条路径1000stamp\n//             //     //             for(var i=0;i<route.length;i++){\n//             //     //                 if(i!==0){\n//             //     //                     var dist=getDistance(route[i-1][0],route[i-1][1],route[i][0],route[i][1])*50;\n//             //     //                     timestamps.push(dist+timestamps[i-1])\n//             //     //                 }\n//             //     //             }\n//             //     //             var geojson = {\n//             //     //                 'vendor':1,\n//             //     //                 'path': route,\n//             //     //                 'timestamps':timestamps,\n//             //     //\n//             //     //             };\n//             //     //             console.log(geojson)\n//             //     //             Routes.push(geojson)\n//             //     //\n//             //     //\n//             //     //         }\n//             //     //     }));\n//             //     // });\n//             //\n//             //     $.when.apply($, gets).then(function() {\n//             //         console.log(saveJson)\n//             //         var jsonData=JSON.stringify(saveJson)\n//             //         download(jsonData,'route.json','text/plain')\n//             //         console.log('Routes:',Routes)\n//             //         resolve(Routes);\n//             //         // resolve([\n//             //         //     {\n//             //         //         \"vendor\": 1,\n//             //         //         \"path\": [\n//             //         //             [120.167057,30.185901],\n//             //         //             [120.165752,30.185723],\n//             //         //             [120.16581,30.188491],\n//             //         //             [120.190417,30.198224],\n//             //         //             [120.191971\t,30.204],\n//             //         //             [120.189622\t,30.20767],\n//             //         //             [120.182369\t,30.218973],\n//             //         //             [120.180889\t,30.222601],\n//             //         //             [120.200108\t,30.306856],\n//             //         //             [120.23477\t,30.311914],\n//             //         //             [120.246959\t,30.316748],\n//             //         //             [120.309708\t,30.387518],\n//             //         //             [120.312426\t,30.39154],\n//             //         //             [120.309069\t,30.400897],\n//             //         //             [120.302548\t,30.399632],],\n//             //         //\n//             //         //             \"timestamps\": [ 838, 867.979, 947.036, 962.913, 996.971, 1032.865, 1060.03, 1077.834, 1205.212, 1210.243, 1295.677, 1315.668, 1431.726, 1480.25, 1488.658]\n//             //         //     }])\n//             //     });\n//             // })\n//\n//             d3.json('http://localhost:5000/data/'+time+':00:00').then(function(data){\n//                 var count=0;\n//                 d3.json('./10.json').then(function (map) {\n//                    // console.log('map:',map)\n//                     data.forEach(d=>{\n//                         var tmp=d.split(',');\n//                         if(tmp[0]!=-1 && tmp[1]!=-1) {\n//                             if(parseInt(tmp[2])>=5){\n//                                 count++;\n//                                 var key=tmp[0]+','+tmp[1];\n//                                 console.log(map[key]);\n//                                 Routes.push(map[key]);\n//                             }\n//                             // if(tmp[0]>40&&tmp[0]<=60&&tmp[1]>40&&tmp[1]<=60){\n//                                 //   if (tmp[2] !== '0') {\n//                                 // var urlNow = 'https://api.mapbox.com/directions/v5/mapbox/cycling/' + depCenter[tmp[0]][0].toFixed(6) + ',' + depCenter[tmp[0]][1].toFixed(6) + ';' + desCenter[tmp[1]][0].toFixed(6) + ',' + desCenter[tmp[1]][1].toFixed(6) + '?steps=true&geometries=geojson&access_token=' + MAPBOX_TOKEN;\n//                                 // gets.push($.ajax({\n//                                 //     type: 'GET',\n//                                 //     url: urlNow,\n//                                 //     success: function (r) {\n//                                 //         console.log('r:', r)\n//                                 //         //var json = JSON.parse(data);\n//                                 //         var plan = r.routes[0];\n//                                 //         var route = plan.geometry.coordinates;\n//                                 //         var timestamps = [0];//先设置每条路径1000stamp\n//                                 //         for (var i = 0; i < route.length; i++) {\n//                                 //             if (i !== 0) {\n//                                 //                 var dist = getDistance(route[i - 1][0], route[i - 1][1], route[i][0], route[i][1]) * 50;\n//                                 //                 timestamps.push(dist + timestamps[i - 1])\n//                                 //             }\n//                                 //         }\n//                                 //         var geojson = {\n//                                 //             'vendor': 1,\n//                                 //             'path': route,\n//                                 //             'timestamps': timestamps,\n//                                 //\n//                                 //         };\n//                                 //         console.log(geojson)\n//                                 //         Routes.push(geojson)\n//                                 //         saveJson[tmp[0]+','+tmp[1]] = geojson\n//                                 //     },\n//                                 //     error:function(){\n//                                 //         console.log('err')\n//                                 //     }\n//                                 // }));\n//\n//                                 // }\n//                            // }\n//                         }\n//                     })\n//                     console.log('count:',count)\n//                    // console.log(Routes)\n//                 })\n//                 // url.forEach(function(value) {\n//                 //     console.log('url:',value)\n//                 //     gets.push($.ajax({\n//                 //         type: 'GET',\n//                 //         url: value,\n//                 //         success: function(data) {\n//                 //             console.log('data:',data)\n//                 //             //var json = JSON.parse(data);\n//                 //             var plan = data.routes[0];\n//                 //             var route = plan.geometry.coordinates;\n//                 //             var timestamps=[0];//先设置每条路径1000stamp\n//                 //             for(var i=0;i<route.length;i++){\n//                 //                 if(i!==0){\n//                 //                     var dist=getDistance(route[i-1][0],route[i-1][1],route[i][0],route[i][1])*50;\n//                 //                     timestamps.push(dist+timestamps[i-1])\n//                 //                 }\n//                 //             }\n//                 //             var geojson = {\n//                 //                 'vendor':1,\n//                 //                 'path': route,\n//                 //                 'timestamps':timestamps,\n//                 //\n//                 //             };\n//                 //             console.log(geojson)\n//                 //             Routes.push(geojson)\n//                 //\n//                 //\n//                 //         }\n//                 //     }));\n//                 // });\n//\n//                 // $.when.apply($, gets).then(function() {\n//                 //     console.log(saveJson)\n//                 //     var jsonData=JSON.stringify(saveJson)\n//                 //     download(jsonData,'route.json','text/plain')\n//                 //     console.log('Routes:',Routes)\n//                 //     resolve(Routes);\n//                 //\n//                 // });\n//             })\n//         });\n//     });\n//\n// };\n//每条路径按流量加线的数量\nlet getStep=function(step,trip){\n    let newTrip=[];\n    trip.forEach(d=>{\n        d+=3600/step;\n        newTrip.push(d)\n    });\n    return newTrip;\n};\nfunction getArea(){\n    d3.csv(\"./edge_dep_csv.csv\").then(function (data) {\n        let re = /([-+]?[0-9]*\\.?[0-9]+)/g;\n        console.log('data1:', data)\n        data.forEach((d,index) => {\n            let tmp = d.value.match(re);\n            let tmpData = [];\n            for (let i = 0; i < tmp.length - 1; i += 2) {\n                tmpData.push([parseFloat(tmp[i + 1]), parseFloat(tmp[i])])\n            }\n            depData.push(tmpData)\n            depPolygon.push({\n                contour:tmpData,\n                in:0,\n                out:0,\n                number:index\n            })\n        });\n        depData.forEach(d => {\n            let sumlong = 0;\n            let sumlat = 0;\n            d.forEach(data => {\n                sumlong += data[0];\n                sumlat += data[1];\n            });\n            depCenter.push([sumlong / d.length, sumlat / d.length])\n        });\n        d3.csv(\"./edge_des_csv.csv\").then(function (data) {\n            let re = /([-+]?[0-9]*\\.?[0-9]+)/g;\n            console.log('data2:', data);\n            data.forEach((d,index)=> {\n                let tmp = d.value.match(re);\n                let tmpData = [];\n                for (let i = 0; i < tmp.length - 1; i += 2) {\n                    tmpData.push([parseFloat(tmp[i + 1]), parseFloat(tmp[i])])\n                }\n                desData.push(tmpData)\n\n                desPolygon.push({\n                    contour:tmpData,\n                    in:0,\n                    out:0,\n                    number:index\n                })\n\n\n            });\n            desData.forEach(d => {\n                let sumlong = 0;\n                let sumlat = 0;\n                d.forEach(data => {\n                    sumlong += data[0];\n                    sumlat += data[1];\n                });\n                desCenter.push([sumlong / d.length, sumlat / d.length])\n            });\n        })\n})\n}\n//获取流量数据\nfunction getRoute(time) {\n    return new Promise(resolve => {\n        // var gets = [];\n        // d3.json('http://localhost:5000/data/'+time).then(function (data) {\n        d3.json('http://192.168.111.1:8888/data/'+time).then(function (data) {\n                var count = 0;\n            d3.json('./10.json').then(function (map) {\n                // console.log('map:',map)\n                var routeData=[];\n                var sumMax=0;\n                data.forEach(d => {\n                    var tmp = d.split(',');\n                    if (tmp[0] != -1 && tmp[1] != -1) {\n                        if (parseInt(tmp[2]) >= 2) {\n\n                            depPolygon[parseInt(tmp[0])].out+=parseInt(tmp[2]);\n                            desPolygon[parseInt(tmp[1])].in+=parseInt(tmp[2]);\n                            count++;\n                            var key = tmp[0] + ',' + tmp[1];\n                            //  console.log(map[key]);\n                            var pre=[];\n                            var sum=0;\n                            var countD=[];\n                            map[key].path.forEach(d=>{\n                                if(pre.length==0){\n                                    pre=d\n                                }\n                                else{\n                                    // console.log('pre:',pre);\n                                    var m=getDistance(pre[0],pre[1],d[0],d[1]);\n                                    countD.push(m);\n                                    sum+=m;\n                                    pre=d;\n                                }\n                            });\n                            if(sum>=sumMax){\n                                sumMax=sum\n                            }\n//control color\n                            if(parseInt(tmp[2]) >= 2&& parseInt(tmp[2]) < 5){\n                                routeData.push({\n                                    'od':parseInt(tmp[0])+','+parseInt(tmp[1]),\n                                    'traffic':parseInt(tmp[2]),\n                                    \"color\":0,\n                                    \"path\":map[key].path,\n                                    \"timestamps\":countD\n                                })\n                                // console.log('path',map[key].path)\n                            }\n                            else if(parseInt(tmp[2]) >=5&&parseInt(tmp[2]) <20){\n                                routeData.push({\n                                    'od':parseInt(tmp[0])+','+parseInt(tmp[1]),\n                                    'traffic':parseInt(tmp[2]),\n                                    \"color\":1,\n                                    \"path\":map[key].path,\n                                    \"timestamps\":countD\n                                })\n                            }\n                            else if(parseInt(tmp[2]) >=20&&parseInt(tmp[2]) <100){\n                                routeData.push({\n                                    'od':parseInt(tmp[0])+','+parseInt(tmp[1]),\n                                    'traffic':parseInt(tmp[2]),\n                                    \"color\":2,\n                                    \"path\":map[key].path,\n                                    \"timestamps\":countD\n                                })\n                            }\n                            else if(parseInt(tmp[2]) >= 100&&parseInt(tmp[2]) <150){\n                                routeData.push({\n                                    'od':parseInt(tmp[0])+','+parseInt(tmp[1]),\n                                    'traffic':parseInt(tmp[2]),\n                                    \"color\":3,\n                                    \"path\":map[key].path,\n                                    \"timestamps\":countD\n                                })\n                            }\n                            else if(parseInt(tmp[2]) >= 150){\n                                routeData.push({\n                                    'od':parseInt(tmp[0])+','+parseInt(tmp[1]),\n                                    'traffic':parseInt(tmp[2]),\n                                    \"color\":4,\n                                    \"path\":map[key].path,\n                                    \"timestamps\":countD\n                                })\n                            }\n\n                        }\n\n                    }\n                });\n                let newRoutes=[];\n                //按照流量多加动画效果\n                routeData.forEach(d=>{\n                    var tmpTime=[time*3600];\n                    let preIndex=0;\n                    // console.log('timestamps:',d.timestamps)\n                    d.timestamps.forEach(t=>{\n                        // console.log('t:',t)\n                        tmpTime.push(tmpTime[preIndex]+(3600/sumMax)*t)//加上当前已经过去的小时的时间\n                        preIndex++;\n                    });\n                    d.timestamps=tmpTime;\n                    let tmpStep=tmpTime;\n                    for(let i=0;i<(d.traffic);i++){\n                        tmpStep=getStep((d.traffic),tmpStep);\n                        newRoutes.push({\n                            'od':d.od,\n                            'traffic':d.traffic,\n                            \"color\":d.color,\n                            \"path\":d.path,\n                            \"timestamps\":tmpStep\n                        })\n                    }\n                });\n                newRoutes.forEach(d=>{\n                    routeData.push(d)\n                })\n                // routeData.forEach(d=>{\n                //     Routes.push(d)\n                // })\n                Routes=routeData;\n                console.log('count:', count);\n                console.log('Routes:', Routes);\n                resolve('0')\n                // console.log(Routes)\n            })\n\n        })\n\n    });\n}\n\nlet match_points=[];\nlet match_map={};\nfunction getMatchdata(){\n    return new Promise(resolve => {\n        d3.json('./match.json').then(d=>{\n            console.log(\"match\",d);\n            d.forEach(dd=>{\n                if(dd['code']===\"Ok\"){\n                    dd['tracepoints'].forEach(p=>{\n                        if(p!==null && !match_map.hasOwnProperty(p['location'])){\n                            //去除重复的点。\n                            match_map[p['location']]=1;\n                            match_points.push({coordinates:[parseFloat(p['location'][0]),parseFloat(p['location'][1])],value:15});\n                        }\n                    })\n                }\n            });\n            resolve();\n        })\n    })\n\n}\n\n\n\nlet MCBAND = [12890594.86, 8362377.87, 5591021, 3481989.83, 1678043.12, 0];\n\n\nlet MC2LL = [\n    [1.410526172116255e-008, 8.983055096488720e-006, -1.99398338163310, 2.009824383106796e+002, -1.872403703815547e+002, 91.60875166698430, -23.38765649603339, 2.57121317296198, -0.03801003308653, 1.733798120000000e+007],\n    [-7.435856389565537e-009, 8.983055097726239e-006, -0.78625201886289, 96.32687599759846, -1.85204757529826, -59.36935905485877, 47.40033549296737, -16.50741931063887, 2.28786674699375, 1.026014486000000e+007],\n    [-3.030883460898826e-008, 8.983055099835780e-006, 0.30071316287616, 59.74293618442277, 7.35798407487100, -25.38371002664745, 13.45380521110908, -3.29883767235584, 0.32710905363475, 6.856817370000000e+006],\n    [-1.981981304930552e-008, 8.983055099779535e-006, 0.03278182852591, 40.31678527705744, 0.65659298677277, -4.44255534477492, 0.85341911805263, 0.12923347998204, -0.04625736007561, 4.482777060000000e+006],\n    [3.091913710684370e-009, 8.983055096812155e-006, 0.00006995724062, 23.10934304144901, -0.00023663490511, -0.63218178102420, -0.00663494467273, 0.03430082397953, -0.00466043876332, 2.555164400000000e+006],\n    [2.890871144776878e-009, 8.983055095805407e-006, -0.00000003068298, 7.47137025468032, -0.00000353937994, -0.02145144861037, -0.00001234426596, 0.00010322952773, -0.00000323890364, 8.260885000000000e+005],\n];\n\n\nlet bound=[12924083.26,4792883.01,12992448.86,4864389.46];\nfunction convertor(lng,lat,factor){\n    let x = factor[0] + factor[1] * Math.abs(lng)\n    let tmp = Math.abs(lat) / factor[9]\n    let y = factor[2]\n    for(let i=3;i<9;i++){\n        y += factor[i] * Math.pow(tmp, i-2);\n        x =  lng > 0?x: -x;\n        y = lat > 0?y: -y\n    }\n    return [x,y]\n}\n\nfunction mc2coordinate(x,y){\n    let factor = null;\n    MCBAND.map((index,value)=>{\n        if(y>value){\n            factor=MC2LL[index];\n        }\n    });\n    return convertor(x,y,factor);\n}\n\nfunction getBound(){\n    let min=mc2coordinate(bound[0],bound[1]);\n    let max=mc2coordinate(bound[2],bound[3]);\n    return [min,max];\n}\n\n\nlet root={};\nfunction Queue() {\n    let items = [];\n\n    // 向队列添加元素（一个或多个）\n    this.enqueue = function (element) {\n        if (element instanceof Array) items = items.concat(element);\n        else items.push(element);\n    };\n\n    // 从队列移除元素\n    this.dequeue = function () {\n        return items.shift();\n    };\n\n    // 返回队列中的第一个元素\n    this.front = function () {\n        return items[0];\n    };\n\n    // 判断队列是否为空\n    this.isEmpty = function () {\n        return items.length === 0;\n    };\n\n    // 返回队列的长度\n    this.size = function () {\n        return items.length;\n    };\n\n    // 清空队列\n    this.clear = function () {\n        items = [];\n    };\n\n    // 打印队列内的所有元素\n    this.print = function () {\n        console.log(items.toString());\n    };\n}\n\nfunction split(root,tag){\n    if(root['data'].length>tag){\n        let x1=root['bound'][0][0];\n        let y1=root['bound'][0][1];\n        let x2=root['bound'][1][0];\n        let y2=root['bound'][1][1];\n        let mid_vertical = (root['bound'][0][0]+root['bound'][1][0])/2;\n        let mid_horizontal = (root['bound'][0][1]+root['bound'][1][1])/2;\n        root['LU']={};\n        root['RU']={};\n        root['RD']={};\n        root['LD']={};\n\n        root['LU']['bound']=[[x1,mid_horizontal],[mid_vertical,y2]];\n        root['LD']['bound']=[[x1,y1],[mid_vertical,mid_horizontal]];\n        root['RU']['bound']=[[mid_vertical,mid_horizontal],[x2,y2]];\n        root['RD']['bound']=[[mid_vertical,y1],[x2,mid_horizontal]];\n\n\n        root['LD']['data']=[];\n        root['RU']['data']=[];\n        root['RD']['data']=[];\n        root['LU']['data']=[];\n        root['data'].forEach(d=>{\n            if(match_points[d].coordinates[0]<=mid_vertical){\n                if(match_points[d].coordinates[1]>mid_horizontal){\n                    root['LU']['data'].push(d);\n                }\n                else{\n                    root['LD']['data'].push(d);\n                }\n            }\n            else {\n                if(match_points[d].coordinates[1]>mid_horizontal){\n                    root['RU']['data'].push(d);\n                }\n                else{\n                    root['RD']['data'].push(d);\n                }\n            }\n        });\n\n        // split(root['LU'],tag);\n        // split(root['RU'],tag);\n        // split(root['RD'],tag);\n        // split(root['LD'],tag);\n    }\n}\n\n\nlet quardTree={}\n\nfunction getQuardTree(){\n   return new Promise(resolve=>{\n       d3.json('http://127.0.0.1:8888/quardTree').then((d)=>{\n           console.log('quard',d);\n           Object.keys(d).forEach(key=>{\n               quardTree[key]=d[key]\n           })\n           resolve();\n       })\n   })\n    //设置区域的上下左右\n}\n\n\nlet SpeedData=[];\n//获取time 时间点的所有道路点的速度信息\nfunction getBeijingSpeed(time){\n    SpeedData=[];\n    return new Promise(resolve => {\n        d3.json('http://10.72.100.14:8888/data/rootdata/'+time).then((data)=>{\n            console.log(data);\n            data.forEach(d=>{\n                SpeedData.push(d)\n            });\n            resolve();\n        });\n    })\n}\nlet pathlist=[];\n//获取速度信息对应的道路标号\nfunction getPathlist(){ //记录了速度数据集里面每个点的时间\n    pathlist=[];\n    return new Promise(resolve => {\n        d3.json('http://10.72.100.14:8888/data/pathlist').then((data)=>{\n            // console.log(data);\n            data.forEach(d=>{\n                pathlist.push(d)\n            });\n            resolve();\n        });\n    })\n}\n\nlet SpeedMap={};\nfunction getNodeSpeedMap(){\n    SpeedData.map((val,index)=>{\n        SpeedMap[pathlist[index]]=val;\n    })\n}\nlet point_speed={};\nfunction getPointSpeed(point_id){\n\n    return new Promise(resolve => {\n        if(!point_speed.hasOwnProperty(point_id)){\n            d3.json('http://10.72.100.14:8888/data/pointspeed/'+point_id).then((data)=>{\n                point_speed[point_id]=data;\n                resolve();\n            })\n        }\n        else resolve();\n    })\n\n}\n\nlet Real_match_map={};\n\nfunction getMatchMap(){\n    return new Promise(resolve => {\n        d3.json('http://127.0.0.1:8888/match_map').then((data)=>{\n            Object.keys(data).forEach(d=>{\n                Real_match_map[d]=data[d];\n            })\n        })\n    })\n}\n\n//获取Beijing的所有道路信息\nlet Beijingdata=[];\nfunction getBeiJingData(){\n    Beijingdata=[];\n    return new Promise(resolve => {\n        d3.json('http://127.0.0.1:8888/road_data').then((data)=>{\n            // console.log(data)\n            data.forEach(d=>{\n\n                if(Real_match_map.hasOwnProperty(d['link_id'])){\n                    // console.log('real_match',Real_match_map);\n                    Beijingdata.push({'name': d['link_id'],'coordinates': [parseFloat(Real_match_map[d['link_id']][0]),parseFloat(Real_match_map[d['link_id']][1]),],'value':SpeedMap[d['link_id']]})\n\n                }\n                else Beijingdata.push({'name': d['link_id'],'coordinates': [parseFloat(d['node_lng'])-0.00622,parseFloat(d['node_lat'])-0.00142],'value':SpeedMap[d['link_id']]})\n            });\n            resolve();\n        });\n    })\n}\n//\nlet pos_map={};\nfunction getposmap(){\n    return new Promise(resolve => {\n        d3.json('http://127.0.0.1:8888/pos_map').then((data)=>{\n            Object.keys(data).forEach(key=>{\n                let point=[];\n                point.push(parseFloat(data[key][0])-0.00622);\n                point.push(parseFloat(data[key][1])-0.00142);\n                pos_map[key]=point;\n            });\n            resolve();\n        });\n    })\n}\nlet neighbordata=[];\nfunction getneighbor(){\n\n    return new Promise(resolve => {\n        d3.json('http://127.0.0.1:8888/path_data').then((data)=>{\n\n            data.forEach(d=>{\n                let path=[];\n                d.forEach(dd=>{\n                    path.push(pos_map[dd])\n                });\n                neighbordata.push({path:path})\n            });\n            console.log('neighbor',neighbordata);\n            resolve();\n        });\n    })\n}\n\nlet Grid=[];\nfunction QuardBound(node){\n    if(node){\n        Grid.push({\n            contour:[[parseFloat(node['bound'][0][0]),parseFloat(node['bound'][0][1])],[parseFloat(node['bound'][0][0]),parseFloat(node['bound'][1][1])],[parseFloat(node['bound'][1][0]),parseFloat(node['bound'][1][1])],[parseFloat(node['bound'][1][0]),parseFloat(node['bound'][0][1])]]\n        })\n        QuardBound(node['LU'])\n        QuardBound(node['RU'])\n        QuardBound(node['LD'])\n        QuardBound(node['RD'])\n    }\n\n}\n\nfunction  _formatTime(t){\n    return `2017年${4+Math.floor(t/43200)}月${Math.floor((t-Math.floor((t/43200))*43200)/1440)}日${Math.floor((t%1440)/60)}时${Math.floor(t%60)}分`;\n    // return `${Math.floor(t%60)}.${Math.floor((t%1440)/60)}.${Math.floor((t-Math.floor((t/43200))*43200)/1440)}.${4+Math.floor(t/43200)}.2017`\n}\n\nfunction _formatDayTime(t){\n    //月，日，时\n    return `${4+Math.floor(t/43200)}:${Math.floor((t-Math.floor((t/43200))*43200)/1440)}:${(Math.floor((t%1440)/60))%24}:${Math.floor(t%60)}`;\n}\n\n\n\nlet predict_origin=new Map();\nlet predict_des=new Map();\n//获取预测流量数据\nfunction getPredictData(){\n    return new Promise( resolve => {\n        d3.csv('./Traffic_Predict_Data/prediction1-origin.csv').then(d=>{\n            d.map((x,index)=>{\n                // console.log('time',x.DepTime);\n                let date=new Date(x.DepTime);\n                // console.log('hour',date.getHours())\n                let hour=date.getHours();\n                if(!predict_origin.has(hour)){\n                    predict_origin.set(hour,{})\n                }\n                let tmp=predict_origin.get(hour)\n                tmp[x.Origin]=x.Trips\n            })\n            d3.csv('./Traffic_Predict_Data/prediction2-dep.csv').then(d=>{d.map((x,index)=>{\n                let date=new Date(x.DepTime);\n                // console.log('hour',date.getHours())\n                let hour=date.getHours();\n                    if(!predict_des.has(hour)){\n                        predict_des.set(hour,{})\n                    }\n                    let tmp=predict_des.get(hour)\n                        tmp[x.Destination]=x.Trips;\n                    });\n                resolve();\n                }\n            )\n            }\n        )\n    })\n}\nlet realOrg=new Map();\nlet realDes=new Map();\n//获取真实流量数据\nfunction getRealData(){\n    d3.csv('./Traffic_Predict_Data/origin.csv').then(d=>{\n            d.map((x,index)=>{\n                // console.log('time',x.DepTime);\n                let date=new Date(x.DepTime);\n                // console.log('hour',date.getHours())\n                let hour=date.getHours();\n                if(!realOrg.has(hour)){\n                    realOrg.set(hour,{})\n                }\n                let tmp=realOrg.get(hour)\n                tmp[x.Origin]=x.Trips\n            })\n            d3.csv('./Traffic_Predict_Data/destination.csv').then(d=>{d.map((x,index)=>{\n                    let date=new Date(x.DepTime);\n                    // console.log('hour',date.getHours())\n                    let hour=date.getHours();\n                    if(!realDes.has(hour)){\n                        realDes.set(hour,{})\n                    }\n                    let tmp=realDes.get(hour)\n                    tmp[x.Destination]=x.Trips;\n                });\n                }\n            )\n        }\n    )\n}\nlet blockRoute=[];\nlet count=[];\nlet blockData=new Map();\nfunction getBlockData(){\n    d3.csv('./blockdetect/anomalyFile.csv').then(d=>{\n        d.map(x=>{\n            console.log(x)\n            console.log(x['occurencingTime'])\n            let da=new Date(x['occurencingTime']);\n            console.log('da',da)\n            let h=da.getHours();\n            let m=da.getMinutes();\n            let s=da.getSeconds();\n            let t=h*3600+m*60+s;\n            blockData.set(t,[parseFloat(x['longitude']),parseFloat(x['latitude'])])\n        })\n        console.log(blockData)\n    })\n}\nfunction getBlockRoute(){\n    return new Promise(resolve => {\n        d3.csv('./blockdetect/GPS_588_merge.csv').then(d=>{\n            console.log(d);\n            let path=[];\n            let timestamps=[];\n            let m=0;\n            d.map((x,index)=>{\n                // console.log('x',x);\n                // console.log('lat',x.lat)\n                let da=new Date(x['date']);\n                let h=da.getHours();\n                let m=da.getMinutes();\n                let s=da.getSeconds();\n                let t=h*3600+m*60+s;\n                if(count.indexOf(t)===-1&&m%5===0){\n                    m++;\n                    count.push(t);\n                    timestamps.push(t);\n                    path.push([parseFloat(x['Long']),parseFloat(x['Lat'])])\n                    if(m%1===0){\n                        blockData.set(t,[parseFloat(x['Long']),parseFloat(x['Lat'])])\n\n                    }\n                }\n            })\n            blockRoute.push({\n                path:path,\n                timestamps:timestamps,\n                color:0\n            })\n\n\n            resolve();\n        })\n\n    })\n\n\n}\n//设置预测流量数据\nfunction setPredictData(hour){\n    console.log('org',predict_origin);\n    let data=[];\n    let tmp=predict_origin.get(parseInt(hour));\n    console.log('tmp',tmp)\n    for(let key in tmp){\n        // console.log('key',key)\n        data.push({\n            centroid: depCenter[parseInt(key)],\n            value:tmp[key]\n        })\n    }\n    return data;\n}\n//设置实际流量数据\nfunction setRealData(hour){\n    // console.log('org',predict_origin)\n    let data=[];\n    let tmp=realOrg.get(parseInt(hour));\n    console.log('tmp',tmp);\n    for(let key in tmp){\n        // console.log('key',key)\n        data.push({\n            centroid: depCenter[parseInt(key)],\n            value:tmp[key]\n        })\n    }\n    console.log('data',data);\n    return data;\n\n}\n// getRoute.then(function () {\n//     console.log('get')\n// });\nlet tmpIcon=[];\n//nebula 尝试\nconst features = {\n    type: 'FeatureCollection',\n    features: [\n    ],\n};\nconst selectedFeatureIndexes = [];\n\n\n//记录折线图的总时长\nlet time_interval = 100;//两天的时长\nlet heatmap_interval=672;//七天的数据\n\nlet area_interval=48;//一天的时长\n\n//河流图\n\n//获取请求数据\nlet queryData=[]\nfunction getQueryData(time){\n    return new Promise(resolve => {\n        d3.json('http://10.72.100.14:8888/query/'+time).then(d=>{\n            d.forEach(dd=>{\n                queryData.push({\n                    inbound: 72,\n                    outbound: 74,\n                    from:{\n                        coordinates:[parseFloat(dd[3]),parseFloat(dd[4])]\n                    },\n                    to:{\n                        coordinates:[parseFloat(dd[5]),parseFloat(dd[6])]\n                    }\n                });\n            });\n            resolve();\n        })\n    })\n}\n\n//\nlet newDayquery=[];\nfunction getQueryDataforArea(time){\n    return new Promise(resolve => {\n        d3.json('http://10.72.100.14:8888/query/'+(time/15)).then(d=>{\n            d.forEach(dd=>{\n                let s=_formatDayTime(time);\n                let ss=s.split(':');\n                newDayquery.push({\n                    time:ss[2],\n                    from:{coordinates:[parseFloat(dd[3]),parseFloat(dd[4])]},\n                    to:{coordinates:[parseFloat(dd[5]),parseFloat(dd[6])]},\n                })//是小时\n            });\n            resolve();\n        })\n    })\n}\n\n\nlet onepathdata=[];\nfunction getOnePath(start,end){\n    return new Promise(resolve => {\n        let urlNow = 'https://api.mapbox.com/directions/v5/mapbox/cycling/' + start[0]+ ',' + start[1] + ';' + end[0]+ ',' + end[1]  + '?steps=true&geometries=geojson&access_token=' + \"pk.eyJ1IjoiemhpZ3VhbmdkYSIsImEiOiJja21haDcxY3Axcmg2MnhrbmZqdHVraXlrIn0.5Yy3Rgb1I1vohpAjeMKUVw\";\n        d3.json(urlNow).then((d)=>{\n            onepathdata.push({\n                path:d.routes[0].geometry.coordinates,\n                color:\"f88c24\"\n            });\n            console.log('Onepathdata:',onepathdata);\n            resolve();\n        })\n    })\n}\nfunction getDrivePath(start,end){\n    return new Promise(resolve => {\n        let urlDrive = 'https://api.mapbox.com/directions/v5/mapbox/driving/' + start[0]+ ',' + start[1] + ';' + end[0]+ ',' + end[1]  + '?steps=true&geometries=geojson&access_token=' + \"pk.eyJ1IjoiemhpZ3VhbmdkYSIsImEiOiJja21haDcxY3Axcmg2MnhrbmZqdHVraXlrIn0.5Yy3Rgb1I1vohpAjeMKUVw\";\n        d3.json(urlDrive).then((d)=>{\n            onepathdata.push({\n                path:d.routes[0].geometry.coordinates,\n                color:'1ca9e6'\n            });\n            console.log('Onepathdata:',onepathdata);\n            resolve();\n        })\n\n    })\n}\n\n\nexport default class RouteMap extends Component {\n\n    constructor(props) {\n        super(props);\n         // const [value, setValue] = React.useState([0]);\n        this.state = {\n            time: 54000,\n            hour:-1,\n            depV:false,\n            desV:false,\n            area:[],\n            options:[],\n            block:false,\n            pre_org:[],\n            pre_des:[],\n            real_org:[],\n            real:false,\n            showPredict:true,\n            blockIcon:[],\n            showRoute:true,\n            modeId: null,\n            modeHandler: null,\n            //editlayer 数据\n            features: features,\n            modeConfig:{},\n            mode: DrawPolygonMode,\n            ODTag: 3,\n            Beijing: [],\n            selectedFeatureIndexes: [], //\n            BeijingSpeedData:[],\n            Quater:-1,\n            //记录在一个多边形内的点，二维数组\n            inPoints:[],\n            //记录点的速度\n            pointData:[],\n            //让表格只渲染一次\n            showTag:0,\n            piedata:[],\n            //区域内速度点河流图数据\n            streamData:[],\n            avarageData:[],\n            match_data:[],\n            Grid:[],\n            ToolTag:0,\n            heatdata:[],\n            arcData:[],\n            querySearchData:[],\n            raidData:[],\n            A2BAreaData:[],\n            onePath:[],\n            moduleTag:0,\n        };\n    }\n    componentDidMount() {\n        getArea();\n        let p = getPredictData();\n        p.then(function () {\n            // this.setState({\n            //     pre_origin: predict_origin,\n            //     pre_des : predict_des\n            // })\n        }.bind(this))\n\n        getRealData();\n\n        let p2 = getBlockRoute();\n        p2.then(function () {\n            console.log('blockRoute', blockRoute);\n            this.setState({\n                blockRoute: blockRoute\n            })\n        }.bind(this));\n        let button = document.getElementById('start');\n        console.log(button);\n        // setTimeout(()=>{button.click()},1200);\n\n        let p4 = getBeijingSpeed(1800);\n        let p_getMatchmap=getMatchMap();\n        p_getMatchmap.then(function(){\n            p4.then(function () {\n                let p5 = getPathlist();\n                p5.then(function () {\n                    getNodeSpeedMap();\n                    let p3 = getBeiJingData();\n                    p3.then(function () {\n                        // console.log('beijing',Beijingdata);\n                        this.setState({\n                            BeijingSpeedData: Beijingdata\n                        })\n                        let pp = getpie();\n                        pp.then(function () {\n                            this.setState({\n                                piedata: piedata\n                            })\n                            // let pie = new Pie('pie', {\n                            //     appendPadding: 10,\n                            //     data: this.state.piedata,\n                            //     angleField: 'value',\n                            //     colorField: 'type',\n                            //     radius: 1,\n                            //     innerRadius: 0.64,\n                            //\n                            //     label: {\n                            //         type: 'inner',\n                            //         offset: '-50%',\n                            //         autoRotate: false,\n                            //         style: { textAlign: 'center' },\n                            //         formatter: ({ percent }) => `${(percent * 100).toFixed(0)}%`,\n                            //     },\n                            //     statistic: {\n                            //         title: {\n                            //             offsetY: -8,\n                            //         },\n                            //         content: {\n                            //             offsetY: -4,\n                            //         },\n                            //     },\n                            // });\n                            // pie.render();\n                        }.bind(this));\n                    }.bind(this));\n                }.bind(this));\n            }.bind(this));\n        });\n\n\n        let p_match = getMatchdata();\n        p_match.then(function () {\n            this.setState({\n                match_data: match_points\n            })\n\n        }.bind(this));\n\n        let p_Quard = getQuardTree();\n        p_Quard.then(function () {\n            console.log('quardTrue',quardTree);\n\n            QuardBound(quardTree);\n\n            this.setState({\n                Grid:Grid\n            })\n        }.bind(this));\n\n        let time=this.state.time;\n        let promiseG=[];\n        for(let i=-area_interval;i<area_interval;i++){\n            if(time+i*15>=0 && time+i*15<87840 ){//\n                // console.log('speed:',Math.floor((time+i*15)/15));\n                promiseG.push(getQueryDataforArea(time+i*15));\n            }\n        }\n        Promise.all(promiseG).then(function(){\n            this.setState({\n                querySearchData:newDayquery\n            })\n        }.bind(this));\n        let p_getPath=getOnePath([116.44392013549806,\n            39.912205075917015],[\n            116.47885322570801,\n            39.93280820087599\n        ]);\n        let p_getDrive=getDrivePath([116.44392013549806,\n            39.912205075917015],[\n            116.47885322570801,\n            39.93280820087599\n        ]);\n        Promise.all([p_getPath,p_getDrive]).then(\n            function (){\n                this.setState({\n                    onePath:onepathdata\n                })\n            }.bind(this)\n        )\n    }\n\n\n\n        // const editlayer=new EditableGeoJsonLayer({\n        //     id: 'editlayer',\n        //     data: this.state.features,\n        //     mode: this.state.mode,\n        //     selectedFeatureIndexes,\n        //     onEdit: ({ updatedData }) => {\n        //         this.setState({\n        //             data: updatedData,\n        //         });\n        //     }\n        // });\n        // getBlockData();\n\n        // this.setState({\n        //     depPolygon:depPolygon,\n        //     desPolygon:desPolygon\n        // })\n\n    componentWillUnmount() {\n        // if (this._animationFrame) {\n        //     window.cancelAnimationFrame(this._animationFrame);\n        // }\n    }\n//get route from mapbox\n    getRoute(){\n        d3.csv(\"./edge_dep_csv.csv\").then(function (data) {\n            let re=/([-+]?[0-9]*\\.?[0-9]+)/g;\n            console.log('data1:',data)\n            data.forEach(d=>{\n                let tmp=d.value.match(re)\n                let tmpData=[];\n                for(let i=0;i<tmp.length-1;i+=2){\n                    tmpData.push([parseFloat(tmp[i+1]),parseFloat(tmp[i])])\n                }\n                depData.push(tmpData)\n            })\n            depData.forEach(d=>{\n                let sumlong=0\n                let sumlat=0;\n                d.forEach(data=>{\n                    sumlong+=data[0];\n                    sumlat+=data[1];\n                })\n                depCenter.push([sumlong/d.length,sumlat/d.length])\n            })\n            d3.csv(\"./edge_des_csv.csv\").then(function (data) {\n                let re=/([-+]?[0-9]*\\.?[0-9]+)/g\n                console.log('data2:',data)\n                data.forEach(d=>{\n                    let tmp=d.value.match(re)\n                    let tmpData=[];\n                    for(let i=0;i<tmp.length-1;i+=2){\n                        tmpData.push([parseFloat(tmp[i+1]),parseFloat(tmp[i])])\n                    }\n                    desData.push(tmpData)\n                })\n                desData.forEach(d=>{\n                    let sumlong=0;\n                    let sumlat=0;\n                    d.forEach(data=>{\n                        sumlong+=data[0];\n                        sumlat+=data[1];\n                    })\n                    desCenter.push([sumlong/d.length,sumlat/d.length])\n                });\n                // d3.json('http://localhost:5000/data/12:00:00').then(function(data){\n                //     data.forEach(d=>{\n                //         var tmp=d.split(',');\n                //         if(tmp[0]!=-1 && tmp[1]!=-1) {\n                //             if(tmp[0]>46&&tmp[0]<=60){\n                //              //   if (tmp[2] !== '0') {\n                //                 var urlNow = 'https://api.mapbox.com/directions/v5/mapbox/cycling/' + depCenter[tmp[0]][0].toFixed(6) + ',' + depCenter[tmp[0]][1].toFixed(6) + ';' + desCenter[tmp[1]][0].toFixed(6) + ',' + desCenter[tmp[1]][1].toFixed(6) + '?steps=true&geometries=geojson&access_token=' + MAPBOX_TOKEN;\n                //                 gets.push($.ajax({\n                //                     type: 'GET',\n                //                     url: urlNow,\n                //                     success: function (r) {\n                //                         console.log('r:', r)\n                //                         //var json = JSON.parse(data);\n                //                         var plan = r.routes[0];\n                //                         var route = plan.geometry.coordinates;\n                //                         var timestamps = [0];//先设置每条路径1000stamp\n                //                         for (var i = 0; i < route.length; i++) {\n                //                             if (i !== 0) {\n                //                                 var dist = getDistance(route[i - 1][0], route[i - 1][1], route[i][0], route[i][1]) * 50;\n                //                                 timestamps.push(dist + timestamps[i - 1])\n                //                             }\n                //                         }\n                //                         var geojson = {\n                //                             'vendor': 1,\n                //                             'path': route,\n                //                             'timestamps': timestamps,\n                //\n                //                         };\n                //                         console.log(geojson)\n                //                         Routes.push(geojson)\n                //                         saveJson[tmp[0]+','+tmp[1]] = geojson\n                //                     },\n                //                     error:function(){\n                //                         console.log('err')\n                //                     }\n                //                 }));\n                //\n                //            // }\n                //             }\n                //         }\n                //     })\n                //     // url.forEach(function(value) {\n                //     //     console.log('url:',value)\n                //     //     gets.push($.ajax({\n                //     //         type: 'GET',\n                //     //         url: value,\n                //     //         success: function(data) {\n                //     //             console.log('data:',data)\n                //     //             //var json = JSON.parse(data);\n                //     //             var plan = data.routes[0];\n                //     //             var route = plan.geometry.coordinates;\n                //     //             var timestamps=[0];//先设置每条路径1000stamp\n                //     //             for(var i=0;i<route.length;i++){\n                //     //                 if(i!==0){\n                //     //                     var dist=getDistance(route[i-1][0],route[i-1][1],route[i][0],route[i][1])*50;\n                //     //                     timestamps.push(dist+timestamps[i-1])\n                //     //                 }\n                //     //             }\n                //     //             var geojson = {\n                //     //                 'vendor':1,\n                //     //                 'path': route,\n                //     //                 'timestamps':timestamps,\n                //     //\n                //     //             };\n                //     //             console.log(geojson)\n                //     //             Routes.push(geojson)\n                //     //\n                //     //\n                //     //         }\n                //     //     }));\n                //     // });\n                //\n                //     $.when.apply($, gets).then(function() {\n                //         console.log(saveJson)\n                //         var jsonData=JSON.stringify(saveJson)\n                //         download(jsonData,'route.json','text/plain')\n                //         console.log('Routes:',Routes)\n                //         resolve(Routes);\n                //         // resolve([\n                //         //     {\n                //         //         \"vendor\": 1,\n                //         //         \"path\": [\n                //         //             [120.167057,30.185901],\n                //         //             [120.165752,30.185723],\n                //         //             [120.16581,30.188491],\n                //         //             [120.190417,30.198224],\n                //         //             [120.191971\t,30.204],\n                //         //             [120.189622\t,30.20767],\n                //         //             [120.182369\t,30.218973],\n                //         //             [120.180889\t,30.222601],\n                //         //             [120.200108\t,30.306856],\n                //         //             [120.23477\t,30.311914],\n                //         //             [120.246959\t,30.316748],\n                //         //             [120.309708\t,30.387518],\n                //         //             [120.312426\t,30.39154],\n                //         //             [120.309069\t,30.400897],\n                //         //             [120.302548\t,30.399632],],\n                //         //\n                //         //             \"timestamps\": [ 838, 867.979, 947.036, 962.913, 996.971, 1032.865, 1060.03, 1077.834, 1205.212, 1210.243, 1295.677, 1315.668, 1431.726, 1480.25, 1488.658]\n                //         //     }])\n                //     });\n                // })\n\n                d3.json('http://localhost:5000/data/0:00:00').then(function(data){\n                    var count=0;\n                    d3.json('./10.json').then(function (map) {\n                        // console.log('map:',map)\n                        data.forEach(d=>{\n                            var tmp=d.split(',');\n                            if(tmp[0]!=-1 && tmp[1]!=-1) {\n                                if(parseInt(tmp[2])>=5){\n                                    count++;\n                                    var key=tmp[0]+','+tmp[1];\n                                    console.log(map[key]);\n                                    Routes.push(map[key]);\n                                }\n                                // if(tmp[0]>40&&tmp[0]<=60&&tmp[1]>40&&tmp[1]<=60){\n                                //   if (tmp[2] !== '0') {\n                                // var urlNow = 'https://api.mapbox.com/directions/v5/mapbox/cycling/' + depCenter[tmp[0]][0].toFixed(6) + ',' + depCenter[tmp[0]][1].toFixed(6) + ';' + desCenter[tmp[1]][0].toFixed(6) + ',' + desCenter[tmp[1]][1].toFixed(6) + '?steps=true&geometries=geojson&access_token=' + MAPBOX_TOKEN;\n                                // gets.push($.ajax({\n                                //     type: 'GET',\n                                //     url: urlNow,\n                                //     success: function (r) {\n                                //         console.log('r:', r)\n                                //         //var json = JSON.parse(data);\n                                //         var plan = r.routes[0];\n                                //         var route = plan.geometry.coordinates;\n                                //         var timestamps = [0];//先设置每条路径1000stamp\n                                //         for (var i = 0; i < route.length; i++) {\n                                //             if (i !== 0) {\n                                //                 var dist = getDistance(route[i - 1][0], route[i - 1][1], route[i][0], route[i][1]) * 50;\n                                //                 timestamps.push(dist + timestamps[i - 1])\n                                //             }\n                                //         }\n                                //         var geojson = {\n                                //             'vendor': 1,\n                                //             'path': route,\n                                //             'timestamps': timestamps,\n                                //\n                                //         };\n                                //         console.log(geojson)\n                                //         Routes.push(geojson)\n                                //         saveJson[tmp[0]+','+tmp[1]] = geojson\n                                //     },\n                                //     error:function(){\n                                //         console.log('err')\n                                //     }\n                                // }));\n\n                                // }\n                                // }\n                            }\n                        })\n                        console.log('count:',count)\n                        this.layers[1].setData(Routes)\n                        // resolve(Routes);\n                        // console.log(Routes)\n                    })\n\n                    // url.forEach(function(value) {\n                    //     console.log('url:',value)\n                    //     gets.push($.ajax({\n                    //         type: 'GET',\n                    //         url: value,\n                    //         success: function(data) {\n                    //             console.log('data:',data)\n                    //             //var json = JSON.parse(data);\n                    //             var plan = data.routes[0];\n                    //             var route = plan.geometry.coordinates;\n                    //             var timestamps=[0];//先设置每条路径1000stamp\n                    //             for(var i=0;i<route.length;i++){\n                    //                 if(i!==0){\n                    //                     var dist=getDistance(route[i-1][0],route[i-1][1],route[i][0],route[i][1])*50;\n                    //                     timestamps.push(dist+timestamps[i-1])\n                    //                 }\n                    //             }\n                    //             var geojson = {\n                    //                 'vendor':1,\n                    //                 'path': route,\n                    //                 'timestamps':timestamps,\n                    //\n                    //             };\n                    //             console.log(geojson)\n                    //             Routes.push(geojson)\n                    //\n                    //\n                    //         }\n                    //     }));\n                    // });\n\n                    // $.when.apply($, gets).then(function() {\n                    //     console.log(saveJson)\n                    //     var jsonData=JSON.stringify(saveJson)\n                    //     download(jsonData,'route.json','text/plain')\n                    //     console.log('Routes:',Routes)\n                    //     resolve(Routes);\n                    //     // resolve([\n                    //     //     {\n                    //     //         \"vendor\": 1,\n                    //     //         \"path\": [\n                    //     //             [120.167057,30.185901],\n                    //     //             [120.165752,30.185723],\n                    //     //             [120.16581,30.188491],\n                    //     //             [120.190417,30.198224],\n                    //     //             [120.191971\t,30.204],\n                    //     //             [120.189622\t,30.20767],\n                    //     //             [120.182369\t,30.218973],\n                    //     //             [120.180889\t,30.222601],\n                    //     //             [120.200108\t,30.306856],\n                    //     //             [120.23477\t,30.311914],\n                    //     //             [120.246959\t,30.316748],\n                    //     //             [120.309708\t,30.387518],\n                    //     //             [120.312426\t,30.39154],\n                    //     //             [120.309069\t,30.400897],\n                    //     //             [120.302548\t,30.399632],],\n                    //     //\n                    //     //             \"timestamps\": [ 838, 867.979, 947.036, 962.913, 996.971, 1032.865, 1060.03, 1077.834, 1205.212, 1210.243, 1295.677, 1315.668, 1431.726, 1480.25, 1488.658]\n                    //     //     }])\n                    // });\n                })\n            });\n        });\n    }\n//routeTip\n//     _renderTooltip() {\n//         const {hoveredObject, pointerX, pointerY} = this.state || {};\n//         return hoveredObject && (\n//             <div className=\"tooltip\" style={{color:'#ffffff',position: 'absolute', zIndex: 1, pointerEvents: 'none', left: pointerX, top: pointerY}}>\n//                 <div>\n//                     <b>O-D: </b>\n//                     <span>{hoveredObject.od}</span>\n//                 </div>\n//                 <div>\n//                     <b>Traffic: </b>\n//                     <span>{hoveredObject.traffic}</span>\n//                 </div>\n//\n//             </div>\n//\n//         );\n//     }\n//areaTipDep\n    _renderTooltipDep() {\n        const { depObject,  depX,  depY} = this.state || {};\n        return depObject && (\n            <div className=\"tooltip\" style={{color:'#00ffff',position: 'absolute', zIndex: 1, pointerEvents: 'none', left: depX, top: depY}}>\n                <div>\n                    <b>区域 id: </b>\n                    <span>{depObject.number}</span>\n                </div>\n                <div>\n                    <b>驶出流量: </b>\n                    <span>{depObject.out}</span>\n                </div>\n            </div>\n        );\n    }\n    //areaTipDes\n    _renderTooltipDes() {\n        const { desObject, desX, desY} = this.state || {};\n        return desObject && (\n            <div className=\"tooltip\" style={{color:'#00ffff',position: 'absolute', zIndex: 1, pointerEvents: 'none', left: desX, top: desY}}>\n                <div>\n                    <b>区域: </b>\n                    <span>{desObject.number}</span>\n                </div>\n\n                <div>\n                    <b>驶入流量: </b>\n                    <span>{desObject.in}</span>\n                </div>\n            </div>\n\n        );\n    }\n\n    // _renderDrawSelectBar=()=>{\n    //     return (\n    //         {/*<div*/}\n    //         {/*    style={{ position: \"absolute\", top: 0, right: 0, maxWidth: \"320px\" }}*/}\n    //         {/*>*/}\n    //         {/*    <select onChange={this._switchMode}>*/}\n    //         {/*        <option value=\"\">--Please choose a draw mode--</option>*/}\n    //         {/*        {MODES.map((mode) => (*/}\n    //         {/*            <option key={mode.id} value={mode.id}>*/}\n    //         {/*                {mode.text}*/}\n    //         {/*            </option>*/}\n    //         {/*        ))}*/}\n    //         {/*    </select>*/}\n    //         {/*</div>*/}\n    //     );\n    // };\n    _getPredictData(){\n        if(this.state.showPredict){\n            return this.state.real?this.state.real_org:this.state.pre_org\n        }\n        else return [{\n            centroid: [0,0],\n            value:[0,0]\n        }]\n    }\n    // _switchMode = (evt) => {\n    //     const modeId =\n    //         evt.target.value === this.state.modeId ? null : evt.target.value;\n    //     const mode = MODES.find((m) => m.id === modeId);\n    //     const modeHandler = mode ? new mode.handler() : null;\n    //     this.setState({ modeId, modeHandler });\n    // };\n\n    //转换字符串\n    _hex2rgb(hex) {\n        const value = parseInt(hex, 16);\n        return [16, 8, 0].map((shift) => ((value >> shift) & 0xff) / 255);\n    }\n    _getDeckColorForFeature(str, bright, alpha) {\n        let s=this._hex2rgb(str);\n        console.log('str',s);\n\n        const color = s.map((c) => c * bright * 255);\n\n        return [...color, alpha * 255];\n    }\n\n    _renderLayers() {\n        const {\n            // buildings = DATA_URL.BUILDINGS,\n            trailLength = 120,\n            theme = DEFAULT_THEME,\n            // TripsLayer=new TripsLayer({\n            //     id: 'trips',\n            //     //data: trips,\n            //     // data:[\n            //     //     {\n            //     //         \"vendor\": 1,\n            //     //         \"path\": [\n            //     //             [120.167057,30.185901],\n            //     //             [120.165752,30.185723],\n            //     //             [120.16581,30.188491],\n            //     //             [120.190417,30.198224],\n            //     //             [120.191971\t,30.204],\n            //     //             [120.189622\t,30.20767],\n            //     //             [120.182369\t,30.218973],\n            //     //             [120.180889\t,30.222601],\n            //     //             [120.200108\t,30.306856],\n            //     //             [120.23477\t,30.311914],\n            //     //             [120.246959\t,30.316748],\n            //     //             [120.309708\t,30.387518],\n            //     //             [120.312426\t,30.39154],\n            //     //             [120.309069\t,30.400897],\n            //     //             [120.302548\t,30.399632],],\n            //     //\n            //     //             \"timestamps\": [ 838, 867.979, 947.036, 962.913, 996.971, 1032.865, 1060.03, 1077.834, 1205.212, 1210.243, 1295.677, 1315.668, 1431.726, 1480.25, 1488.658]\n            //     //     }],\n            //     data:Routes,\n            //     getPath: d => d.path,\n            //     getTimestamps: d => d.timestamps,\n            //     getColor: d => (d.vendor === 0 ? theme.trailColor0 : theme.trailColor1),\n            //     opacity: 0.3,\n            //     widthMinPixels: 2,\n            //     rounded: true,\n            //     trailLength,\n            //     currentTime: this.state.time,\n            //\n            //     shadowEnabled: false\n            // }),\n        } = this.props;\n\n        const layers=[\n            // new ScatterplotLayer({\n            //     id: 'Beijing',\n            //     data: this.state.Beijing,\n            //     pickable: true,\n            //     opacity: 0.8,\n            //     stroked: true,\n            //     filled: true,\n            //     radiusScale: 1,\n            //     radiusMinPixels: 1,\n            //     radiusMaxPixels: 10,\n            //     lineWidthMinPixels: 0.1,\n            //     getPosition: d =>{ return d['coordinates']} ,\n            //     getRadius: d => 10,\n            //     getFillColor: d => [255, 140, 0],\n            //     getLineColor: d => [0, 0, 0]\n            // }),\n\n            // new PolygonLayer({\n            //     id:'Grid-layer',\n            //     data:this.state.Grid,\n            //     pickable: true,\n            //     stroked: true,\n            //     filled: false,\n            //     wireframe: true,\n            //     lineWidthMinPixels: 1,\n            //     getPolygon: d => {\n            //\n            //         return d.contour},\n            //     getLineColor: [80, 80, 80],\n            //     getLineWidth: 2,\n            // }),\n            new PathLayer({\n                id: 'path-layer',\n                data:this.state.onePath,\n                pickable: true,\n                widthScale: 30,\n                widthMinPixels: 2,\n                getPath: d => {return d.path},\n                getColor: d => this._getDeckColorForFeature(d.color,1,0.8),\n                getWidth: d => 1\n            }),\n            new ColumnLayer({\n                id: 'Speed-layer',\n                data: this.state.BeijingSpeedData,\n                // data: this.state.match_data,\n                diskResolution: 12,\n                radius: 10,\n                // extruded: true,\n                extruded: false,\n                pickable: true,\n                stroked:true,\n                elevationScale: 3,\n                getLineWidth:0.5,\n                getPosition: d => d.coordinates,\n                getFillColor: d => {\n                    if(!d.value){return [255,255,255,0]}\n                    else if(parseInt(d.value)<20) return colorRange[1];\n                    else if(parseInt(d.value)<30&&parseInt(d.value)>=20) return colorRange[2];\n                    else if(parseInt(d.value)>=30&& parseInt(d.value)<40)return colorRange[3];\n                    else if(parseInt(d.value)>=40 && parseInt(d.value)<50)return colorRange[4];\n                    else if(parseInt(d.value)>=50 )return colorRange[5];\n                    else return colorRange[0];\n\n\n\n                    // if (d .value/10<= 5) {\n                    //     return colorRange[d.value/10]\n                    // } else {\n                    //     return colorRange[5]\n                    // }\n                },\n\n                getLineColor: d=>{\n                    if(!d.value)return [0,0,0,0];\n                    else return [0,0,0];\n                },\n                getElevation: d =>{\n                    // if(!d.value)return 0.05;\n                    // else{\n                    if(!d.value){return 0}\n                    else if(parseInt(d.value)<20) return d.value*70*0.14/20;\n                    else if(parseInt(d.value)<30&&parseInt(d.value)>=20) return 9.8+(d.value-20)*70*0.41/10;\n                    else if(parseInt(d.value)>=30&& parseInt(d.value)<40)return 38.5+(d.value-30)*70*0.33/10;\n                    else if(parseInt(d.value)>=40 && parseInt(d.value)<50)return 61.6+(d.value-40)*70*0.11/10;\n                    else if(parseInt(d.value)>=50 )return d.value+20;\n\n                    // }\n                },\n                onHover:(d)=>{// 该点的一段时间内的数据\n                    // this.setState({\n                    //     lineData:\n                    // })\n                    // debugger\n                    if(d.hasOwnProperty('object')){\n                        console.log(d.object['name']);\n                    }\n                    if(d.hasOwnProperty('object') &&this.state.showTag===0 && this.state.pointData.length===0){\n\n                        if(SpeedMap.hasOwnProperty(d)){//SpeedMap 里面有速度再取，这时候speedMap肯定有数值了\n                            console.log('data:',d);\n                            let p1=getPointSpeed(d.object['name']);\n                            p1.then(function(){\n                                let pointData=[];\n                                let time=this.state.time;\n                                for(let i=-time_interval;i<time_interval;i++){\n                                    if(time+i*15>=0 && time+i*15<87840){\n                                        console.log('speed:',Math.floor((time+i*15)/15))\n                                        pointData.push({'speed':point_speed[d.object['name']][Math.floor((time+i*15)/15)],'time':_formatTime(Math.floor((time+i*15)))})\n                                    }\n                                }\n                                console.log('pointdata',pointData);\n                                this.setState({\n                                    pointData:pointData\n                                });\n\n                                G2.registerShape('point', 'breath-point', {\n                                    draw(cfg, container) {\n                                        const data = cfg.data;\n                                        const point = { x: cfg.x, y: cfg.y };\n                                        const group = container.addGroup();\n                                        if (data['time'] === _formatTime(Math.floor((time)))) {\n                                            const decorator1 = group.addShape('circle', {\n                                                attrs: {\n                                                    x: point.x,\n                                                    y: point.y,\n                                                    r: 10,\n                                                    fill: cfg.color,\n                                                    opacity: 0.5,\n                                                },\n                                            });\n                                            const decorator2 = group.addShape('circle', {\n                                                attrs: {\n                                                    x: point.x,\n                                                    y: point.y,\n                                                    r: 10,\n                                                    fill: cfg.color,\n                                                    opacity: 0.5,\n                                                },\n                                            });\n                                            const decorator3 = group.addShape('circle', {\n                                                attrs: {\n                                                    x: point.x,\n                                                    y: point.y,\n                                                    r: 10,\n                                                    fill: cfg.color,\n                                                    opacity: 0.5,\n                                                },\n                                            });\n                                            decorator1.animate(\n                                                {\n                                                    r: 20,\n                                                    opacity: 0,\n                                                },\n                                                {\n                                                    duration: 1800,\n                                                    easing: 'easeLinear',\n                                                    repeat: true,\n                                                }\n                                            );\n                                            decorator2.animate(\n                                                {\n                                                    r: 20,\n                                                    opacity: 0,\n                                                },\n                                                {\n                                                    duration: 1800,\n                                                    easing: 'easeLinear',\n                                                    repeat: true,\n                                                    delay: 600,\n                                                }\n                                            );\n                                            decorator3.animate(\n                                                {\n                                                    r: 20,\n                                                    opacity: 0,\n                                                },\n                                                {\n                                                    duration: 1800,\n                                                    easing: 'easeLinear',\n                                                    repeat: true,\n                                                    delay: 1200,\n                                                }\n                                            );\n                                            group.addShape('circle', {\n                                                attrs: {\n                                                    x: point.x,\n                                                    y: point.y,\n                                                    r: 6,\n                                                    fill: cfg.color,\n                                                    opacity: 0.7,\n                                                },\n                                            });\n                                            group.addShape('circle', {\n                                                attrs: {\n                                                    x: point.x,\n                                                    y: point.y,\n                                                    r: 1.5,\n                                                    fill: cfg.color,\n                                                },\n                                            });\n                                        }\n\n                                        return group;\n                                    },\n                                });\n\n                                // const line = new Line('line', {\n                                //     data: this.state.pointData,\n                                //     xField: 'time',\n                                //     yField: 'speed',\n                                //     tooltip: { showMarkers: false },\n                                //     point: {\n                                //         shape: 'breath-point',\n                                //     },\n                                //\n                                // });\n                                // line.render();\n                            }.bind(this));\n                        }\n                    }\n\n\n                }\n                // transitions: {\n                //     getElevation: {\n                //         duration: 3000,\n                //         // type: 'spring',\n                //         // stiffness: 0.01,\n                //         // damping: 0.15,\n                //         // easing: d3.easeCubicInOut,\n                //         enter: d => {\n                //             // console.log(d);\n                //             let tmp = [];\n                //             for (let i = 0; i < 300; i++) {\n                //                 tmp.push(d[0] * i / 300)\n                //             }\n                //             // console.log(tmp)\n                //             return tmp;\n                //         },\n                //     }\n                // },\n                // updateTriggers: {\n                //     getElevation: [this.state.pre_org,this.state.real_org],\n                // }\n            }),\n\n            // new ColumnLayer({\n            //     id: 'OutpointLayer',\n            //     data: this.state.arcData,\n            //     // data: this.state.match_data,\n            //     diskResolution: 12,\n            //     radius: 10,\n            //     extruded: true,\n            //     // extruded: false,\n            //     pickable: true,\n            //     stroked:true,\n            //     elevationScale: 3,\n            //     getLineWidth:0.5,\n            //     material:false,\n            //     getPosition: d => d.from.coordinates,\n            //     getFillColor: d => {\n            //         // console.log('d:',d);\n            //         return [0,100,255]\n            //     },\n            //     getLineColor: d=>{\n            //\n            //         return [0,0,0];\n            //     },\n            //     getElevation: d =>{\n            //         return 20\n            //     },\n            //\n            //\n            // }),\n\n\n\n            // new ColumnLayer({\n            //     id: 'InpointLayer',\n            //     data: this.state.arcData,\n            //     // data: this.state.match_data,\n            //     diskResolution: 12,\n            //     radius: 10,\n            //     // extruded: true,\n            //     extruded: true,\n            //     pickable: true,\n            //     stroked:true,\n            //     elevationScale: 3,\n            //     getLineWidth:0.5,\n            //     material:false,\n            //     getPosition: d => d.to.coordinates,\n            //     getFillColor: d => {\n            //         console.log(this.state.arcData.length);\n            //         // console.log('d:',d);\n            //         return [255,130,71]\n            //     },\n            //     getLineColor: d=>{\n            //\n            //         return [0,0,0];\n            //     },\n            //     getElevation: d =>{\n            //         return 20\n            //     },\n            //\n            // }),\n\n            // new ArcLayer({\n            //     id:\"query\",\n            //     data:this.state.arcData,\n            //     pickable: true,\n            //     getWidth: 2,\n            //     greatCircle:true,\n            //     getHeight:d=>0.1,\n            //     getSourcePosition: d => d.from.coordinates,\n            //     getTargetPosition: d => d.to.coordinates,\n            //\n            //     getSourceColor: d =>[151,255,255],\n            //     getTargetColor: d =>[255,130,71],\n            // })\n\n            // new EditableGeoJsonLayer({\n            //\n            // }),\n         // new SelectionLayer({\n         //     id: 'selection',\n         //     selectionType: 'rectangle',\n         //     onSelect:({pickingInfos})=> {\n         //         console.log(pickingInfos);\n         //     },\n         //     layerIds:['trips'],\n         //     getTentativeFillColor: () => [255, 0, 255, 100],\n         //     getTentativeLineColor: () => [0, 0, 255, 255],\n         //     getTentativeLineDashArray: () => [0, 0],\n         //     lineWidthMinPixels: 3\n         // }),\n\n         //    new EditableGeoJsonLayer({\n         //        id: 'editlayer',\n         //        data: this.state.data,\n         //        mode: this.state.mode,\n         //        selectedFeatureIndexes,\n         //        onEdit: ({ updatedData }) => {\n         //            this.setState({\n         //                data: updatedData,\n         //         });\n         //     }\n         // }),\n\n            // new IconLayer({\n            //     id:'blockIcon',\n            //     data:this.state.blockIcon,\n            //     iconAtlas:'./warning.png',\n            //     iconMapping:ICON_MAPPING,\n            //     getIcon: d => 'marker',\n            //     sizeScale: 15,\n            //     getPosition: d => d.coordinates,\n            //     getColor:[255,255,0],\n            //     getSize: d => 5,\n            //\n            // }),\n            // new TripsLayer({\n            //     id:'blockRoute',\n            //     data:this.state.blockRoute,\n            //     getPath:d=>d.path,\n            //     getTimestamps: d => d.timestamps,\n            //     // getColor: d => colorTable[d.color],\n            //     getColor:[0,140,255,255],\n            //     opacity: 0.3,\n            //     widthMinPixels: 5,\n            //     rounded: true,\n            //     trailLength:1200,\n            //     currentTime: this.state.time,\n            //     shadowEnabled: false,\n            //     pickable:true,\n            //     visible:this.state.block\n            // }),\n            //\n            // new TripsLayer({\n            //     id: 'trips',\n            //     //data: trips,\n            //     // data:[\n            //     //     {\n            //     //         \"vendor\": 1,\n            //     //         \"path\": [\n            //     //             [120.167057,30.185901],\n            //     //             [120.165752,30.185723],\n            //     //             [120.16581,30.188491],\n            //     //             [120.190417,30.198224],\n            //     //             [120.191971\t,30.204],\n            //     //             [120.189622\t,30.20767],\n            //     //             [120.182369\t,30.218973],\n            //     //             [120.180889\t,30.222601],\n            //     //             [120.200108\t,30.306856],\n            //     //             [120.23477\t,30.311914],\n            //     //             [120.246959\t,30.316748],\n            //     //             [120.309708\t,30.387518],\n            //     //             [120.312426\t,30.39154],\n            //     //             [120.309069\t,30.400897],\n            //     //             [120.302548\t,30.399632],],\n            //     //\n            //     //             \"timestamps\": [ 838, 867.979, 947.036, 962.913, 996.971, 1032.865, 1060.03, 1077.834, 1205.212, 1210.243, 1295.677, 1315.668, 1431.726, 1480.25, 1488.658]\n            //     //     }],\n            //     // data:getRoute,\n            //     data:this.state.Route,\n            //     // updateTriggers:{\n            //     //   data:Routes\n            //     // },\n            //     getPath: d => d.path,\n            //     getTimestamps: d => d.timestamps,\n            //     getColor: d => colorTable[d.color],\n            //     // getColor:[0,255,255,255],\n            //     opacity: 0.3,\n            //     widthMinPixels: 10,\n            //     rounded: true,\n            //     trailLength,\n            //     currentTime: this.state.time,\n            //     shadowEnabled: false,\n            //     pickable:true,\n            //     visible:this.state.showRoute,\n            //     // onHover:info=>{\n            //     //     console.log(info)\n            //     // }\n            // }),\n            // new PolygonLayer({\n            //     id: 'dep_polygon',\n            //     data:this.state.depPolygon,\n            //     pickable: true,\n            //     stroked: true,\n            //     filled: true,\n            //     wireframe: true,\n            //     lineWidthMinPixels: 1,\n            //     getPolygon: d => d.contour,\n            //     // getElevation: d => d.population / d.area / 10,\n            //     getFillColor: d => [255, 255, 0,50],\n            //     getLineColor: [80, 80, 80],\n            //     getLineWidth: 1,\n            //     onHover: info=>this.setState({\n            //         depObject: info.object,\n            //         depX: info.x,\n            //         depY: info.y\n            //     }),\n            //     visible:this.state.depV\n            //     // onHover: info=>{\n            //     //     console.log(info)\n            //     // }\n            //\n            // }),\n            //\n            // new PolygonLayer({\n            //     id:'des_polygon',\n            //     data:this.state.desPolygon,\n            //     pickable: true,\n            //     stroked: true,\n            //     filled: true,\n            //     wireframe: true,\n            //     lineWidthMinPixels: 1,\n            //     getPolygon: d => d.contour,\n            //     // getElevation: d => d.population / d.area / 10,\n            //     getFillColor: d => [255, 0, 0,50],\n            //     getLineColor: [80, 80, 80],\n            //     getLineWidth: 1,\n            //     onHover: info=>this.setState({\n            //         desObject: info.object,\n            //         desX: info.x,\n            //         desY: info.y\n            //     }),\n            //     visible:this.state.desV\n            // }),\n            //\n            // new ColumnLayer({\n            //     id: 'predict-origin-layer',\n            //     data: this._getPredictData(),\n            //     diskResolution: 12,\n            //     radius: 100,\n            //     extruded: true,\n            //     pickable: true,\n            //     elevationScale: 5000,\n            //     getPosition: d => d.centroid,\n            //     getFillColor: d => {\n            //         let k = (Math.log(d.value) / Math.log(4)).toFixed(0);\n            //         if (k <= 5) {\n            //             return colorRange[k]\n            //         } else {\n            //             return colorRange[5]\n            //         }\n            //     },\n            //     getLineColor: [0, 0, 0],\n            //     getElevation: d =>parseInt(d.value)/100,\n            //     transitions: {\n            //         getElevation: {\n            //             duration: 3000,\n            //             // type: 'spring',\n            //             // stiffness: 0.01,\n            //             // damping: 0.15,\n            //             // easing: d3.easeCubicInOut,\n            //             enter: d => {\n            //                 // console.log(d);\n            //                 let tmp = [];\n            //                 for (let i = 0; i < 300; i++) {\n            //                     tmp.push(d[0] * i / 300)\n            //                 }\n            //                 // console.log(tmp)\n            //                 return tmp;\n            //             },\n            //         }\n            //     },\n            //     updateTriggers: {\n            //         getElevation: [this.state.pre_org,this.state.real_org],\n            //     }\n            // }),\n            // new PolygonLayer({\n            //     id: 'buildings',\n            //     data: buildings,\n            //     extruded: true,\n            //     wireframe: false,\n            //     opacity: 0.5,\n            //     getPolygon: f => f.polygon,\n            //     getElevation: f => f.height,\n            //     getFillColor: theme.buildingColor,\n            //     material: theme.material\n            // })\n        ];\n\n        return layers;\n    }\n    _formatLabel(t) {\n        return `2017年${4+Math.floor(t/43200)}月${Math.floor((t-Math.floor((t/43200))*43200)/1440)}日${Math.floor((t%1440)/60)}时${Math.floor(t%60)}分`;\n    }\n\n    _Icon(props) {\n        // @ts-ignore\n        return <box-icon color=\"currentColor\" {...props} />;\n    }\n    // _getIncludePoints(){\n    //     //数据是什么样的？\n    //     this.state.features.\n    //\n    // }\n    //\n    Online(P1,P2,Q){\n        let tempy1 = (P1[1] - P2[1]) ;\n        let tempx1 = (P1[0] - P2[0]);\n        let tempy2 = (Q[1] - P1[1]) ;\n        let tempx2 = (Q[0] - P1[0]);\n        let xp = tempy1 * tempx2;\n        let yp = tempy2 * tempx1;\n        if(Math.abs(xp - yp) <= 1e-6)\n            return 1;\n        else\n            return 0;\n    }\n    _InPolygonScan(Q,Poly,n){\n        // debugger\n        // console.log('Q',Q);\n        // console.log('Poly',Poly);\n        let count=0;\n        let xinters=0;\n        let P1=Poly[0];\n        for(let i=1;i<=n;i++){\n            let P2=Poly[i%n];\n            // if(this.Online(P1,P2,Q)) return 1;\n            if(Q[1]>Math.min(P1[1],P2[1])&&Q[1]<=Math.max(P1[1],P2[1])){\n                if(Q[0]<=Math.max(P1[0],P2[0])){\n                    if(P1[1]!==P2[1]){\n                        xinters=(Q[1]-P1[1])*(P2[0]-P1[0])/(P2[1]-P1[1])+P1[0];\n                        if(P1[0]===P2[0]||Q[0]<=xinters) count++;//符合要求\n                    }\n                }\n            }\n            P1=P2;\n        }\n        if(count%2===0) return 0;\n        return 1;\n    }\n\n\n    render() {\n        const {\n            viewState,\n            // mapStyle = 'https://basemaps.cartocdn.com/gl/dark-matter-nolabels-gl-style/style.json',\n            mapStyle ='mapbox://styles/mapbox/light-v10',\n            // mapStyle ='mapbox://styles/mapbox/dark-v10',\n            theme = DEFAULT_THEME,\n        } = this.props;\n        const layer = new EditableGeoJsonLayer({\n            // id: \"geojson-layer\",\n            id: 'editlayer',\n            data: this.state.features,\n            //数据格式\n            // [\n            // {},\n            // {}\n            //]\n            mode: this.state.mode,\n            selectedFeatureIndexes: this.state.selectedFeatureIndexes, //selectedFeaturesIndexes 地图上说有画的东西\n            getFillColor: (feature,isSelected)=>{\n                // console.log('feature',feature);\n                console.log('features',this.state.features.features);\n                // const index =this.state.features.features.indexOf(feature);\n                // console.log('index',index);\n                // console.log('properties',this.state.features.features[index]);\n                let data=[];\n                if(feature.properties[\"fill\"] === \"FFFFFF\"){\n                    data=this._getDeckColorForFeature(feature.properties[\"fill\"],1,0.5)\n                }\n                else data=this._getDeckColorForFeature(feature.properties[\"fill\"],1,0.5)\n                console.log(data);\n                return data;\n            },\n            getLineColor: (feature,isSelected)=>{\n                // console.log('feature',feature);\n                // console.log('features',this.state.features.features);\n                // const index =this.state.features.features.indexOf(feature);\n                // console.log('index',index);\n                // console.log('properties',this.state.features.features[index]);\n                let data=this._getDeckColorForFeature(feature.properties[\"stroke\"],1,1)\n                console.log(data);\n                return data;\n            },\n            onEdit: ({ updatedData, editType, editContext }) => {\n\n                let Poly=[];\n                let inPoints=[];\n                // console.log('onEdit', editType, editContext, updatedData);\n                let updatedSelectedFeatureIndexes = this.state.selectedFeatureIndexes;\n\n                if (!['movePosition', 'extruding', 'rotating', 'translating', 'scaling'].includes(editType)) {\n                    // Don't log edits that happen as the pointer moves since they're really chatty\n                    // const updatedDataInfo = featuresToInfoString(updatedData);\n                    // eslint-disable-next-line\n                    // console.log('onEdit', editType, editContext, updatedData);\n                }\n\n                if (editType === 'removePosition') {\n                    // This is a simple example of custom handling of edits\n                    // reject the edit\n                    return;\n                }\n\n                if (editType === 'addFeature' ) {\n\n                    let {featureIndexes}  = editContext;\n                    console.log('features+',featureIndexes);\n\n                    if(this.state.ODTag === 0){\n                        updatedData.features[updatedData.features.length-1].properties[\"fill\"]=\"1ca9e6\";\n                        updatedData.features[updatedData.features.length-1].properties[\"stroke\"]= \"1ca9e6\";\n                    }\n                    else if(this.state.ODTag === 1){\n                        updatedData.features[updatedData.features.length-1].properties[\"fill\"]=\"f88c24\";\n                        updatedData.features[updatedData.features.length-1].properties[\"stroke\"]= \"ff9900\";\n                    }\n                    else if(this.state.ODTag === 2){\n                        updatedData.features[updatedData.features.length-1].properties[\"fill\"]=\"FF0000\";\n                        updatedData.features[updatedData.features.length-1].properties[\"stroke\"]= \"FF0000\";\n                    }\n                    else if(this.state.ODTag===3){\n                        updatedData.features[updatedData.features.length-1].properties[\"fill\"]=\"FFFFFF\";\n                        updatedData.features[updatedData.features.length-1].properties[\"stroke\"]= \"FF0000\";\n                    }\n                    console.log('updata',updatedData);\n                    // Add the new feature to the selection\n                    updatedSelectedFeatureIndexes = [...this.state.selectedFeatureIndexes, ...featureIndexes];\n\n                    updatedData.features.forEach(d=>{\n                        Poly.push(d.geometry.coordinates[0]);\n                    });\n                    let newBeijingdata=[];\n                    // console.log('poly:',Poly);\n                    //\n                    // let mapInPoint={};//不知道为什么inPoint会每个都重复，所以去除重复\n                    //\n                    // //统计在圈内的请求数据，怎么把一段时间的数据全部加进来？,直接把加载数据的过程放在didmount里面\n                    // let inQueryPoints=[];\n                    //\n                    // let A2BPoints=[];\n                    // let B2APoints=[];\n                    // //对所有的poly计算在poly中的点\n                    // if(Poly.length){\n                    //     Poly.forEach(p=>{\n                    //         this.state.BeijingSpeedData.forEach(d=>{\n                    //             if(this._InPolygonScan(d['coordinates'],p,p.length)&& d.value &&!mapInPoint.hasOwnProperty(d['name'])){\n                    //                 inPoints.push(d['name']);\n                    //                 mapInPoint[d['name']]=1;\n                    //\n                    //                 // console.log('name:',d['name'],'value',d.value);\n                    //                 //尝试改变数据\n                    //                 // d['value']=50;\n                    //             }\n                    //             newBeijingdata.push(d);\n                    //         });\n                    //\n                    //         //把当前所有的query 压入到多边形中。\n                    //         console.log('querySearchData:',this.state.querySearchData);\n                    //\n                    //         let timeMap={};\n                    //         this.state.querySearchData.forEach(d=>{\n                    //             if(timeMap.hasOwnProperty(d.time)){\n                    //                 timeMap[d.time]+=1;\n                    //             }\n                    //             else {\n                    //                 timeMap[d.time]=1;\n                    //             }\n                    //\n                    //             if(this._InPolygonScan(d.from.coordinates,p,p.length)){\n                    //                 inQueryPoints.push({tag:'from', coordinates:d.from.coordinates, time:d.time});\n                    //             }\n                    //             if(this._InPolygonScan(d.to.coordinates,p,p.length)){\n                    //                 inQueryPoints.push({tag:'to', coordinates:d.to.coordinates, time:d.time});\n                    //             }\n                    //         })\n                    //         console.log('timeMap',timeMap);\n                    //     });\n                    // }\n                    // // else if(Poly.length%2===0){\n                    // //         let newQuerData=[];\n                    // //\n                    // //         this.state.querySearchData.forEach(d=>{\n                    // //             // if(timeMap.hasOwnProperty(d.time)){\n                    // //             //     timeMap[d.time]+=1;\n                    // //             // }\n                    // //             // else {\n                    // //             //     timeMap[d.time]=1;\n                    // //             // }\n                    // //             for(let i=0;i<Poly.length;i+=2){\n                    // //                 if(this._InPolygonScan(d.from.coordinates,Poly[i+0],Poly[i+0].length) && this._InPolygonScan(d.to.coordinates,Poly[i+1],Poly[i+1].length)){\n                    // //                     A2BPoints.push({tag:'A2B', from:d.from.coordinates,to:d.to.coordinates,time:d.time});\n                    // //                     newQuerData.push({tag:'A2B', from:{coordinates:d.from.coordinates},to:{coordinates:d.to.coordinates},time:d.time})\n                    // //                 }\n                    // //                 if(this._InPolygonScan(d.from.coordinates,Poly[i+1],Poly[i+1].length) && this._InPolygonScan(d.to.coordinates,Poly[i],Poly[i].length)){\n                    // //                     B2APoints.push({tag:'B2A', from:d.from.coordinates,to:d.to.coordinates,time:d.time});\n                    // //                     newQuerData.push({tag:'B2A', from:{coordinates:d.from.coordinates},to:{coordinates:d.to.coordinates},time:d.time})\n                    // //                 }\n                    // //             }\n                    // //\n                    // //         });\n                    // //         this.setState({\n                    // //             arcData:newQuerData\n                    // //         })\n                    // //     let A2B={};\n                    // //     A2BPoints.forEach(d=>{\n                    // //         if(A2B.hasOwnProperty(d.time)){\n                    // //             A2B[d.time]+=1;\n                    // //         }\n                    // //         else A2B[d.time]=1;\n                    // //     });\n                    // //     let B2A={};\n                    // //     B2APoints.forEach(d=>{\n                    // //         if(B2A.hasOwnProperty(d.time)){\n                    // //             B2A[d.time]+=1;\n                    // //         }\n                    // //         else B2A[d.time]=1;\n                    // //     });\n                    // //     let A2BAreaData=[]\n                    // //     Object.keys(A2B).forEach(d=>{\n                    // //         A2BAreaData.push({tag:'A2B',value:A2B[d],time:d});\n                    // //     });\n                    // //\n                    // //     Object.keys(A2B).forEach(d=>{\n                    // //         A2BAreaData.push({tag:'B2A',value:B2A[d],time:d});\n                    // //     });\n                    // //\n                    // //     this.setState({\n                    // //         A2BAreaData:A2BAreaData\n                    // //     });\n                    // //\n                    // //     //\n                    // //     // const stackedColumnPlot = new Column('stackColumn', {\n                    // //     //     data:this.state.A2BAreaData,\n                    // //     //     isGroup: true,\n                    // //     //     xField: 'time',\n                    // //     //     yField: 'value',\n                    // //     //     seriesField: 'tag',\n                    // //     //     /** 设置颜色 */\n                    // //     //     color: ['#1ca9e6', '#f88c24'],\n                    // //     //     /** 设置间距 */\n                    // //     //     // marginRatio: 0.1,\n                    // //     //     label: {\n                    // //     //         // 可手动配置 label 数据标签位置\n                    // //     //         position: 'middle', // 'top', 'middle', 'bottom'\n                    // //     //         // 可配置附加的布局方法\n                    // //     //         layout: [\n                    // //     //             // 柱形图数据标签位置自动调整\n                    // //     //             { type: 'interval-adjust-position' },\n                    // //     //             // 数据标签防遮挡\n                    // //     //             { type: 'interval-hide-overlap' },\n                    // //     //             // 数据标签文颜色自动调整\n                    // //     //             { type: 'adjust-color' },\n                    // //     //         ],\n                    // //     //     },\n                    // //     // });\n                    // //     //\n                    // //     // stackedColumnPlot.render();\n                    // //\n                    // // }\n                    //\n                    //\n                    //\n                    //\n                    // console.log('inQuery:',inQueryPoints);\n                    //\n                    // //把出发和返回的数据统计起来\n                    // let fromQueryTimeCount={};\n                    // let toQueryTimeCount={};\n                    // inQueryPoints.forEach(d=>{\n                    //     if(d.tag==='from'){\n                    //         if(fromQueryTimeCount.hasOwnProperty(d.time)){\n                    //             fromQueryTimeCount[d.time]+=1;\n                    //         }\n                    //         else{\n                    //             fromQueryTimeCount[d.time]=1;\n                    //         }\n                    //     }\n                    //     else{\n                    //         if(toQueryTimeCount.hasOwnProperty(d.time)){\n                    //             toQueryTimeCount[d.time]+=1;\n                    //         }\n                    //         else{\n                    //             toQueryTimeCount[d.time]=1;\n                    //         }\n                    //     }\n                    //\n                    // });\n                    // let raidData=[];\n                    // Object.keys(fromQueryTimeCount).forEach(d=>{\n                    //     raidData.push({time:d, value:fromQueryTimeCount[d], tag:'from'});\n                    // });\n                    // Object.keys(toQueryTimeCount).forEach(d=>{\n                    //     raidData.push({time:d, value:toQueryTimeCount[d], tag:'to'});\n                    // });\n                    //\n                    // this.setState({\n                    //     raidData:raidData\n                    // });\n                    // console.log('raidData:',this.state.raidData);\n\n                    //雷达图\n                    // const radarPlot = new Radar('raid', {\n                    //     data:this.state.raidData,\n                    //     xField: 'time',\n                    //     yField: 'value',\n                    //     seriesField: 'tag',\n                    //     meta: {\n                    //         value: {\n                    //             alias: '数量'\n                    //         },\n                    //     },\n                    //     xAxis: {\n                    //         line: null,\n                    //         tickLine: null,\n                    //         grid: {\n                    //             line: {\n                    //                 style: {\n                    //                     lineDash: null,\n                    //                 },\n                    //             },\n                    //         },\n                    //     },\n                    //     // 开启面积\n                    //     area: {},\n                    //     // 开启辅助点\n                    //     point: {\n                    //         size: 2,\n                    //     },\n                    // });\n                    // radarPlot.render();\n\n\n\n\n                    //每个多边形内点的ID的数组\n                    // this.setState({\n                    //     BeijingSpeedData:newBeijingdata\n                    // });\n\n\n                    //查询所有多边形内点的速度,设置河流图\n                    // let streamData=[];\n                    // let PromiseG=[];\n                    //\n                    // let avarageTimeMap={};\n                    // let heatMapTimeMap={};\n                    // console.log('inPoints',inPoints);\n                    // inPoints.forEach(d=>{\n                    //         if(SpeedMap.hasOwnProperty(d)){//SpeedMap 里面有速度再取\n                    //             // console.log('data:',d);\n                    //             PromiseG.push(getPointSpeed(d));\n                    //         }\n                    //     });\n                    // Promise.all(PromiseG).then(values=>{\n                    //         let time=this.state.time;\n                    //         // console.log(\"point_speed\",point_speed);\n                    //     inPoints.map((d,index)=>{\n                    //         if(SpeedMap.hasOwnProperty(d)) {//SpeedMap 里面有速度再取\n                    //             for(let i=-time_interval;i<time_interval;i++){\n                    //                 if(time+i*15>=0 && time+i*15<87840 && i%4===0){\n                    //                     // console.log('speed:',Math.floor((time+i*15)/15));\n                    //                     if(avarageTimeMap.hasOwnProperty(_formatTime(Math.floor((time+i*15))))){\n                    //                         avarageTimeMap[_formatTime(Math.floor((time+i*15)))]+=point_speed[d][Math.floor((time+i*15)/15)]\n                    //                     }\n                    //                     else{\n                    //                         avarageTimeMap[_formatTime(Math.floor((time+i*15)))]=point_speed[d][Math.floor((time+i*15)/15)];\n                    //                     }\n                    //                     //河流图添加数据\n                    //                     streamData.push({'name':index+'.','speed':point_speed[d][Math.floor((time+i*15)/15)],'time':_formatTime(Math.floor((time+i*15)))})\n                    //                     //旭日图添加数据,不行这个太多了\n                    //                     // heatmap.push({\"Day\":Math.floor((time+i*15)/1440),'hour':Math.floor(Math.floor(((time+i*15)%1440)/60)),'value':point_speed[d][Math.floor((time+i*15)/15)]})\n                    //                     //\n                    //                 }\n                    //             }\n                    //\n                    //             // for(let i=-area_interval;i<area_interval;i++){\n                    //             //     if(time+i*15>=0 && time+i*15<87840){\n                    //             //         // console.log('speed:',Math.floor((time+i*15)/15));\n                    //             //         getQueryData(time){\n                    //             //\n                    //             //         }\n                    //             //     }\n                    //             // }\n                    //\n                    //\n                    //             for(let i=-heatmap_interval;i<heatmap_interval;i++){\n                    //                 if(time+i*15>=0 && time+i*15<87840 && i%4===0){\n                    //                     // console.log('speed:',Math.floor((time+i*15)/15));\n                    //                     if(heatMapTimeMap.hasOwnProperty(_formatDayTime(Math.floor((time+i*15))))){\n                    //                         heatMapTimeMap[_formatDayTime(Math.floor((time+i*15)))]+=point_speed[d][Math.floor((time+i*15)/15)];\n                    //                     }\n                    //                     else{\n                    //                         heatMapTimeMap[_formatDayTime(Math.floor((time+i*15)))]=point_speed[d][Math.floor((time+i*15)/15)];\n                    //                     }\n                    //                 }\n                    //             }\n                    //         }\n                    //         });\n                    //\n                    //     let avarageData=[];\n                    //     Object.keys(avarageTimeMap).forEach(k=>{\n                    //         avarageData.push({'time':k,'value':avarageTimeMap[k]/inPoints.length});\n                    //     });\n                    //     let heatmapData=[];\n                    //     Object.keys(heatMapTimeMap).forEach(k=>{\n                    //         // debugger\n                    //         let s=k.split(':');\n                    //         heatmapData.push({'Day':s[1],'hour':s[2],'value':heatMapTimeMap[k]/(inPoints.length)});\n                    //     });\n                    //\n                    //     this.setState({\n                    //         streamData:streamData,\n                    //         avarageData:avarageData\n                    //     });\n                    //     console.log('avarageData',this.state.avarageData);\n                    //\n                    //     // const stream=new Area('stream',{\n                    //     //     data:this.state.streamData,\n                    //     //     xField:'time',\n                    //     //     yField:'speed',\n                    //     //     seriesField:'name'\n                    //     // });\n                    //     // stream.render();\n                    //\n                    //     // const columnPlot = new Column('column', {\n                    //     //     data:this.state.avarageData,\n                    //     //     xField: 'time',\n                    //     //     yField: 'value',\n                    //     //     columnWidthRatio: 1,\n                    //     //     xAxis: {\n                    //     //         label: {\n                    //     //             autoHide: true,\n                    //     //             autoRotate: false,\n                    //     //             style: {\n                    //     //                 fill: 'black',\n                    //     //                 opacity: 1,\n                    //     //                 fontSize: 10\n                    //     //             },\n                    //     //         },\n                    //     //     },\n                    //     //     yAxis:{\n                    //     //         label:{\n                    //     //             style:{\n                    //     //                 fill: 'black',\n                    //     //                 opacity: 1,\n                    //     //                 fontSize: 20\n                    //     //             }\n                    //     //         },\n                    //     //         grid: {\n                    //     //             line: {\n                    //     //                 style: {\n                    //     //                     stroke: 'black',\n                    //     //                     lineWidth: 2,\n                    //     //                     lineDash: [4, 5],\n                    //     //                     strokeOpacity: 0.8,\n                    //     //                     shadowColor: 'black',\n                    //     //                     shadowBlur: 10,\n                    //     //                     shadowOffsetX: 5,\n                    //     //                     shadowOffsetY: 5,\n                    //     //                     cursor: 'pointer'\n                    //     //                 }\n                    //     //             }\n                    //     //         }\n                    //     //     },\n                    //     //     meta: {\n                    //     //         type: {\n                    //     //             alias: '类别',\n                    //     //         },\n                    //     //         sales: {\n                    //     //             alias: '均值',\n                    //     //         },\n                    //     //     },\n                    //     // });\n                    //\n                    //     this.setState({\n                    //         heatData:heatmapData\n                    //     });\n                    //     console.log('heatdata',this.state.heatData);\n                    //\n                    //\n                    //     //周期热力图\n                    //\n                    //     // const heatchart = new F2.Chart({\n                    //     //     id: 'heatchart',\n                    //     //     pixelRatio: window.devicePixelRatio\n                    //     // });\n                    //     // heatchart.source(this.state.heatData);\n                    //     // heatchart.coord('polar', {\n                    //     //     innerRadius: 0.2\n                    //     // });\n                    //     // heatchart.tooltip(false);\n                    //     // heatchart.axis('Day', {\n                    //     //     grid: null,\n                    //     //     line: null,\n                    //     //     tickLine: null,\n                    //     //     label: null\n                    //     // });\n                    //     // heatchart.axis('hour', {\n                    //     //     line: null,\n                    //     //     tickLine: null,\n                    //     //     grid: null,\n                    //     //     labelOffset: 3\n                    //     // });\n                    //     // // [1, 152, 189],\n                    //     // //     [73, 227, 206],\n                    //     // //     [216, 254, 181],\n                    //     // //     [254, 237, 177],\n                    //     // //     [254, 173, 84],\n                    //     // //     [209, 55, 78]\n                    //     // heatchart.polygon()\n                    //     //     .position('hour*Day')\n                    //     //     // .color('value', '#BAE7FF-#1890FF-#0050B3')\n                    //     //     // .color('value', '#0198BD-#49E3CE-#FEEDB1-#D1374E')\n                    //     //     .color('value', '#49E3CE-#FEEDB1-#D1374E')\n                    //     //     .style({\n                    //     //         stroke: '#fff',\n                    //     //         lineWidth: 1\n                    //     //     });\n                    //     //\n                    //     // this.state.heatData.forEach(function(val, idx) {\n                    //     //     if(idx%24===0){\n                    //     //         heatchart.guide().text({\n                    //     //             top: true,\n                    //     //             position: [ 0, idx/24 ],\n                    //     //             content: val['Day'],\n                    //     //             style: {\n                    //     //                 fill: '#000',\n                    //     //                 textAlign: 'center',\n                    //     //                 fontSize:5,\n                    //     //                 shadowBlur: 2,\n                    //     //                 shadowColor: 'rgba(0, 0, 0, .45)'\n                    //     //             }\n                    //     //         });\n                    //     //     }\n                    //     // });\n                    //     // heatchart.render();\n                    //\n                    //\n                    //     // columnPlot.render();\n                    //\n                    // });\n\n\n                    //画出neighbor的\n                    // let p3=getposmap();\n                    // p3.then(function () {\n                    //     // console.log('pos_map',pos_map\n                    //     //这个定义好像是要放到函数里面才行，因为定义了马上就执行的！！\n                    //     let p4=getneighbor();\n                    //     p4.then(function () {\n                    //         this.setState({\n                    //             neighbor_data:neighbordata\n                    //         })\n                    //     }.bind(this))\n                    // }.bind(this));\n                }\n                // console.log('Points',inPoints);\n                this.setState({\n                    inPoints:inPoints,\n                    features: updatedData,\n                    selectedFeatureIndexes: updatedSelectedFeatureIndexes,\n                });\n            }\n        });\n        const layers = this._renderLayers();\n        layers.push(layer);\n\n        return (\n            <Fragment>\n                <DeckGL\n                    layers={layers}\n                    effects={theme.effects}\n                    initialViewState={BEIJIN_VIEW_STATE}\n                    viewState={viewState}\n                    controller={{\n                        doubleClickZoom: false\n                    }}\n                    onViewStateChange={({viewState})=>{\n                        const viewport = new WebMercatorViewport(viewState);\n                        const nw = viewport.unproject([0, 0]);\n                        const se = viewport.unproject([viewport.width, viewport.height]);\n                        // console.log(\"north: \", nw[1], \", south: \", se[1]);\n                        // console.log(\"east: \", se[0], \"west: \", nw[0] );\n                        let bound=[[nw[0],se[0]],[se[1],nw[1]]];\n                        //判断在视野内\n                        // if(this.state.arcData.length>0){\n                        //     let tmpData=[];\n                        //     this.state.arcData.forEach(d=>{\n                        //         // debugger\n                        //         // console.log('arcData:',d);\n                        //         if( inbound(d.to.coordinates,bound)){\n                        //             // if(inbound(d.from.coordinates,bound)){\n                        //                 tmpData.push(d);\n                        //             // }\n                        //\n                        //         }\n                        //     });\n                        //     this.setState({\n                        //         arcData:tmpData\n                        //     })\n                        // }\n\n                    }}\n                    getCursor={layer.getCursor.bind(layer)}\n                >\n                    <StaticMap\n                        reuseMaps\n                        mapStyle={mapStyle}\n                        preventStyleDiffing={true}\n                        mapboxApiAccessToken={MAPBOX_TOKEN}\n                    >\n                    </StaticMap>\n                </DeckGL>\n                <button id = 'out'  style={{position:'absolute', zIndex: 2, top: '330px', right:'10px', backgroundColor: this.state.ODTag===0 ?  'rgb(0, 105, 217)':'rgb(90, 98, 94)'}} onClick={()=>{ this.setState({ODTag : 0})}}>\n                    {<this._Icon name={'arrow-to-left'} color='rgba(255,255,255,1)'/>}\n                </button>\n                <button id= 'in'  style={{position:'absolute', zIndex: 2, top: '365px', right:'10px',backgroundColor: this.state.ODTag===1 ?  'rgb(0, 105, 217)':'rgb(90, 98, 94)'}} onClick={()=>{ this.setState({ODTag: 1})}}>\n                    {<this._Icon name={'arrow-to-right'} color='rgba(255,255,255,1)'/>}\n                </button>\n                <button id = 'bridge'  style={{position:'absolute', zIndex: 2, top: '400px', right:'10px',backgroundColor: this.state.ODTag===2 ? 'rgb(0, 105, 217)':'rgb(90, 98, 94)'}} onClick={()=>{ this.setState({ODTag: 2})}}>\n                    {<this._Icon name={'trip'} color='rgba(255,255,255,1)'/>}\n                </button>\n                {/*<button id = 'clean'  style={{position:'absolute', zIndex: 2, top: '435px', right:'10px',backgroundColor: this.state.ODTag===3 ? 'rgb(0, 105, 217)':'rgb(90, 98, 94)'}} onClick={()=>{ this.setState({ODTag: 3})}}>*/}\n                {/*    {<this._Icon name={'trip'} color='rgba(255,255,255,1)'/>}*/}\n                {/*</button>*/}\n                {/*<button id = 'clean'  style={{color: 'white',padding: '50px 50px',fontsize:'16px',position:'absolute', zIndex: 2, top: '10px', left:'10px',backgroundColor: this.state.ToolTag===1 ? 'rgb(0, 105, 217)':'rgb(90, 98, 94)'}} onClick={()=>{ this.setState({ToolTag: 1})}}>*/}\n\n                {/*</button>*/}\n                {/*<button id = 'clean'  style={{color: 'white',padding: '15px 32px',fontsize:'16px',position:'absolute', zIndex: 2, top: '60px', left:'10px',backgroundColor: this.state.ToolTag===1 ? 'rgb(0, 105, 217)':'rgb(90, 98, 94)'}} onClick={()=>{ this.setState({ToolTag: 1})}}>*/}\n                {/*    {\"道路分析\"}*/}\n                {/*</button>*/}\n                {/*<button id = 'clean'  style={{color: 'white',padding: '15px 40px',fontsize:'16px',position:'absolute', zIndex: 2, top: '110px', left:'10px',backgroundColor: this.state.ToolTag===1 ? 'rgb(0, 105, 217)':'rgb(90, 98, 94)'}} onClick={()=>{ this.setState({ToolTag: 1})}}>*/}\n                {/*    {\"预测\"}*/}\n                {/*</button>*/}\n                <button id = 'showSpeed'  style={{position:'absolute', zIndex: 2, top: '10px', left:'10px',backgroundColor: this.state.moduleTag===1 ? 'rgb(0, 105, 217)':'rgb(90, 98, 94)',color:'rgba(255,255,255,1)',height:'70px',width:'100px'}} onClick={()=>{ this.setState({moduleTag: 1, moduleTag2: 0,moduleTag3: 0})}} >\n                    {'车流速度展示'}\n                </button>\n                <button id = 'showSpeed'  style={{position:'absolute', zIndex: 2, top: '80px', left:'10px',backgroundColor: this.state.moduleTag===2 ? 'rgb(0, 105, 217)':'rgb(90, 98, 94)',color:'rgba(255,255,255,1)',height:'70px',width:'100px'}} onClick={()=>{ this.setState({moduleTag: 2, moduleTag2: 0,moduleTag3: 0})}} >\n                    {'区域分析'}\n                </button>\n                <button id = 'showSpeed'  style={{position:'absolute', zIndex: 2, top: '150px', left:'10px',backgroundColor: this.state.moduleTag===3 ? 'rgb(0, 105, 217)':'rgb(90, 98, 94)',color:'rgba(255,255,255,1)',height:'70px',width:'100px'}} onClick={()=>{ this.setState({moduleTag: 3, moduleTag2: 0,moduleTag3: 0})}} >\n                    {'道路分析'}\n                </button>\n                <button id = 'showSpeed'  style={{position:'absolute', zIndex: 2, top: '220px', left:'10px',backgroundColor: this.state.moduleTag===4 ? 'rgb(0, 105, 217)':'rgb(90, 98, 94)',color:'rgba(255,255,255,1)',height:'70px',width:'100px'}} onClick={()=>{ this.setState({moduleTag: 4, moduleTag2: 0,moduleTag3: 0})}} >\n                    {'预测交互'}\n                </button>\n                <button id = 'showSpeed'  style={{position:'absolute', zIndex: 2, top: '10px', left:'110px',backgroundColor: this.state.moduleTag2===1 ? 'rgb(0, 105, 217)':'rgb(90, 98, 94)',color:'rgba(255,255,255,1)',height:'35px',width:'150px'}} onClick={()=>{ this.setState({moduleTag2: 1,moduleTag: 1,moduleTag3: 0})}} >\n                    {'散点图'}\n                </button>\n                <button id = 'showSpeed'  style={{position:'absolute', zIndex: 2, top: '45px', left:'110px',backgroundColor: this.state.moduleTag2===2 ? 'rgb(0, 105, 217)':'rgb(90, 98, 94)',color:'rgba(255,255,255,1)',height:'35px',width:'150px'}} onClick={()=>{ this.setState({moduleTag2: 2,moduleTag: 1,moduleTag3: 0})}} >\n                    {'柱状图'}\n                </button>\n                <button id = 'showSpeed'  style={{position:'absolute', zIndex: 2, top: '80px', left:'110px',backgroundColor: this.state.moduleTag2===3 ? 'rgb(0, 105, 217)':'rgb(90, 98, 94)',color:'rgba(255,255,255,1)',height:'35px',width:'75px'}} onClick={()=>{ this.setState({moduleTag2: 3, moduleTag: 2,moduleTag3: 0})}} >\n                    {'区域内分析'}\n                </button>\n                <button id = 'showSpeed'  style={{position:'absolute', zIndex: 2, top: '115px', left:'110px',backgroundColor: this.state.moduleTag2===4 ? 'rgb(0, 105, 217)':'rgb(90, 98, 94)',color:'rgba(255,255,255,1)',height:'35px',width:'75px'}} onClick={()=>{ this.setState({moduleTag2: 4,moduleTag: 2,moduleTag3: 0})}} >\n                    {'区域间分析'}\n                </button>\n                <button id = 'showSpeed'  style={{position:'absolute', zIndex: 2, top: '80px', left:'185px',backgroundColor: this.state.moduleTag3===1 ? 'rgb(0, 105, 217)':'rgb(90, 98, 94)',color:'rgba(255,255,255,1)',height:'17.5px',width:'75px'}} onClick={()=>{ this.setState({moduleTag3: 1,moduleTag2: 3, moduleTag: 2})}} >\n                    {'线性'}\n                </button>\n                <button id = 'showSpeed'  style={{position:'absolute', zIndex: 2, top: '97.5px', left:'185px',backgroundColor: this.state.moduleTag3===2 ? 'rgb(0, 105, 217)':'rgb(90, 98, 94)',color:'rgba(255,255,255,1)',height:'17.5px',width:'75px'}} onClick={()=>{ this.setState({moduleTag3: 2,moduleTag2: 3, moduleTag: 2})}} >\n                    {'周期'}\n                </button>\n                <button id = 'showSpeed'  style={{position:'absolute', zIndex: 2, top: '115px', left:'185px',backgroundColor: this.state.moduleTag3===3 ? 'rgb(0, 105, 217)':'rgb(90, 98, 94)',color:'rgba(255,255,255,1)',height:'17.5px',width:'75px'}} onClick={()=>{ this.setState({moduleTag3: 3,moduleTag2: 4,moduleTag: 2})}} >\n                    {'进出统计'}\n                </button>\n                <button id = 'showSpeed'  style={{position:'absolute', zIndex: 2, top: '132.5px', left:'185px',backgroundColor: this.state.moduleTag3===4 ? 'rgb(0, 105, 217)':'rgb(90, 98, 94)',color:'rgba(255,255,255,1)',height:'17.5px',width:'75px'}} onClick={()=>{ this.setState({moduleTag3: 4,moduleTag2: 4, moduleTag:2})}} >\n                    {'区域间对比'}\n                </button>\n                <button id = 'showSpeed'  style={{position:'absolute', zIndex: 2, top: '150px', left:'110px',backgroundColor: this.state.moduleTag2===5 ? 'rgb(0, 105, 217)':'rgb(90, 98, 94)',color:'rgba(255,255,255,1)',height:'35px',width:'150px'}} onClick={()=>{ this.setState({moduleTag2: 5,moduleTag:3,moduleTag3: 0})}} >\n                    {'道路点趋势'}\n                </button>\n                <button id = 'showSpeed'  style={{position:'absolute', zIndex: 2, top: '185px', left:'110px',backgroundColor: this.state.moduleTag2===6 ? 'rgb(0, 105, 217)':'rgb(90, 98, 94)',color:'rgba(255,255,255,1)',height:'35px',width:'150px'}} onClick={()=>{ this.setState({moduleTag2: 6,moduleTag: 3,moduleTag3: 0})}} >\n                    {'道路多点对比'}\n                </button>\n                <button id = 'showSpeed'  style={{position:'absolute', zIndex: 2, top: '220px', left:'110px',backgroundColor: this.state.moduleTag2===7 ? 'rgb(0, 105, 217)':'rgb(90, 98, 94)',color:'rgba(255,255,255,1)',height:'17.5px',width:'150px'}} onClick={()=>{ this.setState({moduleTag2: 7, moduleTag3: 0, moduleTag: 4})}} >\n                    {'请求数据展示'}\n                </button>\n                <button id = 'showSpeed'  style={{position:'absolute', zIndex: 2, top: '237.5px', left:'110px',backgroundColor: this.state.moduleTag2===8 ? 'rgb(0, 105, 217)':'rgb(90, 98, 94)',color:'rgba(255,255,255,1)',height:'17.5px',width:'100px'}} onClick={()=>{ this.setState({moduleTag2: 8, moduleTag3: 0, moduleTag: 4})}} >\n                    <div >{'请求数据筛选'}</div>\n                </button>\n                <button id = 'showSpeed'  style={{position:'absolute', zIndex: 2, top: '255px', left:'110px',backgroundColor: this.state.moduleTag2===9 ? 'rgb(0, 105, 217)':'rgb(90, 98, 94)',color:'rgba(255,255,255,1)',height:'17.5px',width:'100px'}} onClick={()=>{ this.setState({moduleTag2: 9, moduleTag3: 0, moduleTag: 4})}} >\n                    <div >{'请求数据生成'}</div>\n                </button>\n                <button id = 'showSpeed'  style={{ position:'absolute', zIndex: 2, top: '272.5px', left:'110px',backgroundColor: this.state.moduleTag2===10 ? 'rgb(0, 105, 217)':'rgb(90, 98, 94)',color:'rgba(255,255,255,1)',height:'17.5px',width:'100px'}} onClick={()=>{ this.setState({moduleTag2: 10, moduleTag3: 0, moduleTag: 4})}} >\n                    <div >{'影响值调整'}</div>\n                </button>\n                <button id = 'showSpeed'  style={{position:'absolute', zIndex: 2, top: '237.5px', left:'210px',backgroundColor: this.state.moduleTag3===5 ? 'rgb(0, 105, 217)':'rgb(90, 98, 94)',color:'rgba(255,255,255,1)',height:'52.5px',width:'50px'}} onClick={()=>{ this.setState({ moduleTag3: 5, moduleTag: 4})}} >\n                    {'提交'}\n                </button>\n                <Toolbox\n                    mode={this.state.mode}\n                    onSetMode={(setmode)=>{this.setState({mode:setmode()});\n                    }}\n                    modeConfig={this.state.modeConfig}\n                    onSetModeConfig={(setmodeconfig)=>{this.setState({modeConfig:setmodeconfig()})}}\n                    geoJson={this.state.features}\n                    onSetGeoJson={(setfeatures)=>{this.setState({features:setfeatures()})}}\n                    onImport={(setfeatures)=>{this.setState({features:setfeatures()})}}\n                />\n\n                {/*{this._renderDrawSelectBar()}*/}\n                { this._renderTooltipDep() }\n                {this._renderTooltipDes()}\n                <StyletronProvider value={engine}>\n                    <BaseProvider theme={LightTheme}>\n                        {/*<SliderTraffic*/}\n                        {/*    min={0}*/}\n                        {/*    max={86400}*/}\n                        {/*    value={[0,this.state.time]}*/}\n                        {/*    formatLabel={this._formatLabel}*/}\n                        {/*    onChange={({value}) => {*/}\n                        {/*        let nowTime=value[1];*/}\n\n                        {/*        if(blockData.has(nowTime)){*/}\n                        {/*            console.log('icon')*/}\n                        {/*            tmpIcon.push({*/}\n                        {/*                coordinates:blockData.get(nowTime)*/}\n                        {/*            })*/}\n                        {/*            let tmp=[];*/}\n                        {/*            tmpIcon.forEach(d=>{*/}\n                        {/*                tmp.push(d)*/}\n                        {/*            })*/}\n                        {/*            // if(tmpIcon.length>10){*/}\n                        {/*                console.log('set')*/}\n                        {/*                this.setState({*/}\n                        {/*                    blockIcon:tmp*/}\n                        {/*                })*/}\n                        {/*            // }*/}\n                        {/*            console.log(this.state.blockIcon)*/}\n                        {/*        }*/}\n\n                        {/*        // console.log('nowTime:',nowTime);*/}\n                        {/*        if(Math.floor(nowTime/3600)!==this.state.hour){*/}\n                        {/*            this.setState({hour:Math.floor(nowTime/3600)})*/}\n                        {/*            console.log('nowztime:',nowTime);*/}\n                        {/*            var hour=(nowTime/3600).toFixed(0);*/}\n                        {/*            console.log('hour:',hour);*/}\n                        {/*            this.setState({*/}\n                        {/*                pre_org:setPredictData(hour),*/}\n                        {/*                real_org:setRealData(hour)*/}\n                        {/*            });*/}\n                        {/*            // console.log('pre_org',this.state.pre_org);*/}\n\n                        {/*            var p=getRoute(hour);*/}\n                        {/*            p.then(function() {*/}\n                        {/*                console.log('Route',Routes)*/}\n                        {/*                this.setState({*/}\n                        {/*                    Route:Routes,*/}\n                        {/*                    depPolygon:depPolygon,*/}\n                        {/*                    desPolygon:desPolygon*/}\n                        {/*                })*/}\n                        {/*            }.bind(this))*/}\n                        {/*        }*/}\n                        {/*        this.setState({time: nowTime})*/}\n                        {/*        // console.log('time',this.state.time)*/}\n                        {/*        //console.log(this.state)*/}\n                        {/*        //console.log('value:',value)*/}\n                        {/*    }}*/}\n                        {/*/>*/}\n\n                        <SliderTraffic\n                            min={0}\n                            max={87840} //分钟\n                            value={[0,this.state.time]}\n                            formatLabel={this._formatLabel}\n                            onChange={({value}) => {\n                                let nowTime=value[1];\n                                // console.log('nowTime:',nowTime);\n                                if(Math.floor(nowTime/15)!==this.state.Quater){\n                                    this.setState({Quater:Math.floor(nowTime/15)}) //一天24小时\n                                    console.log('nowztime:',nowTime);\n                                    // var hour=((nowTime/60)%24).toFixed(0);\n                                    // console.log('hour:',hour);\n                                    // this.setState({\n                                    //     pre_org:setPredictData(hour),\n                                    //     real_org:setRealData(hour)\n                                    // });\n                                    // console.log('pre_org',this.state.pre_org);\n                                    // var p=getRoute(hour);\n                                    // p.then(function() {\n                                    //     console.log('Route',Routes)\n                                    //     this.setState({\n                                    //         Route:Routes,\n                                    //         depPolygon:depPolygon,\n                                    //         desPolygon:desPolygon\n                                    //     })\n                                    // }.bind(this))\n                                    let num=Math.floor(nowTime/15);\n\n                                    let p4=getBeijingSpeed(num);\n\n                                    p4.then(function(){\n                                        let p5=getPathlist();\n                                        p5.then(function(){\n                                            getNodeSpeedMap();\n                                            let p3=getBeiJingData();\n                                            p3.then(function(){\n                                                // console.log('beijing',Beijingdata);\n                                                this.setState({\n                                                    BeijingSpeedData:Beijingdata\n                                                })\n\n                                            }.bind(this))\n                                        }.bind(this))\n                                    }.bind(this));\n\n                                    //num 是除以15后的时间就是测速点\n                                    let p_getQuery=getQueryData(num);\n                                    p_getQuery.then(function (){\n                                        this.setState({\n                                            arcData:queryData\n                                        });\n                                        // 直接设置无法更新图层，不知道怎么才能比较好的更新，原数据置空会更新\n                                        // if(num%2===0){\n                                        //     console.log('clean');\n                                        //     this.setState({\n                                        //         arcData:[]\n                                        //     });\n                                        // }\n                                        console.log('arcData:',this.state.arcData)\n                                    }.bind(this))\n\n                                }\n                                this.setState({time: nowTime})\n                                // console.log('time',this.state.time)\n                                //console.log(this.state)\n                                //console.log('value:',value)\n                            }}\n                        />\n\n\n\n                {/*     <SelectContainer>*/}\n                {/*        <Select id={'area'}*/}\n                {/*        options={[*/}\n                {/*            {label:\"出发区域\",id:'dep_polygon'},*/}\n                {/*            {label:\"到达区域\",id:'des_polygon'},*/}\n                {/*            { label: \"隐藏\", id: \"\" },*/}\n\n                {/*        ]}*/}\n                {/*        value={this.state.area}*/}\n                {/*        placeholder=\"显示区域\"*/}\n                {/*        // onChange={params => setValue(params.value)}*/}\n                {/*        size={SIZE.mini}*/}\n                {/*        onChange={params=> {*/}\n                {/*            // console.log('params:',params);*/}\n                {/*            if(params.option!=null){*/}\n                {/*                if(params.option.id=='dep_polygon'){*/}\n                {/*                    console.log()*/}\n                {/*                    this.setState({*/}\n                {/*                        depPolygon:depPolygon,*/}\n                {/*                        depV:true,*/}\n                {/*                        desV:false,*/}\n                {/*                        area:[{label:\"出发区域\",id:'dep_polygon'}]*/}\n                {/*                    })*/}\n                {/*                }*/}\n                {/*                else if(params.option.id=='des_polygon'){*/}\n                {/*                    console.log('desPolygon',this.state.desPolygon)*/}\n                {/*                    this.setState({*/}\n                {/*                        desPolygon:desPolygon,*/}\n                {/*                        desV:true,*/}\n                {/*                        depV:false,*/}\n                {/*                        area:[{label:\"到达区域\",id:'des_polygon'}]*/}\n                {/*                    })*/}\n                {/*                }*/}\n                {/*                else{*/}\n                {/*                    this.setState({*/}\n                {/*                        desV:false,*/}\n                {/*                        depV:false,*/}\n                {/*                        area:[{ label: \"隐藏\", id: \"\" }]*/}\n                {/*                    })*/}\n                {/*                }*/}\n                {/*            }*/}\n                {/*            else{*/}\n                {/*                this.setState({*/}\n                {/*                    area:[],*/}\n                {/*                    desV:false,*/}\n                {/*                    depV:false,*/}\n                {/*                })*/}\n                {/*            }*/}\n\n                {/*        }}*/}\n                {/*    />*/}\n\n                {/*</SelectContainer>*/}\n                {/*        <SelectContainer2>*/}\n                {/*            <Select id={'option'}*/}\n                {/*                    options={[*/}\n                {/*                        {label:\"显示轨迹\",id:'route'},*/}\n                {/*                        {label:'预测流量',id:\"predict\"},*/}\n                {/*                        {label:\"实际流量\",id:'real'},*/}\n                {/*                        {label:'路障检测',id:'block'}*/}\n                {/*                    ]}*/}\n                {/*                    value={this.state.options}*/}\n                {/*                    placeholder={'选择服务'}*/}\n                {/*                    size={SIZE.mini}*/}\n                {/*                    onChange={ params=>{*/}\n                {/*                        if (params.option!==null){*/}\n                {/*                            if(params.option.id==='predict'){*/}\n                {/*                                this.setState({*/}\n                {/*                                    real:false,*/}\n                {/*                                    options:[{label:\"预测流量\",id:\"predict\"}],*/}\n                {/*                                    showPredict:true*/}\n                {/*                                })*/}\n                {/*                            }*/}\n                {/*                            else if(params.option.id==='real'){*/}\n                {/*                                this.setState({*/}\n                {/*                                    real:true,*/}\n                {/*                                    options:[{label:\"实际流量\",id:\"real\"}],*/}\n                {/*                                    showPredict:true*/}\n                {/*                                })*/}\n                {/*                            }*/}\n                {/*                            else if(params.option.id==='block'){*/}\n                {/*                                this.setState({*/}\n                {/*                                    block:true,*/}\n                {/*                                    options:[{label:\"路障检测\",id:\"block\"}],*/}\n                {/*                                    time:45466,*/}\n                {/*                                    showPredict:false,*/}\n                {/*                                    showRoute:false*/}\n                {/*                                })*/}\n\n                {/*                            }*/}\n                {/*                            else if(params.option.id==='route'){*/}\n                {/*                                this.setState({*/}\n                {/*                                    block:false,*/}\n                {/*                                    options:[{label:\"显示轨迹\",id:\"route\"}],*/}\n                {/*                                    showRoute:true,*/}\n\n                {/*                                })*/}\n                {/*                            }*/}\n                {/*                        }*/}\n                {/*                    }}*/}\n                {/*            />*/}\n                {/*        </SelectContainer2>*/}\n                    </BaseProvider>\n                </StyletronProvider>\n                <div id={'background'} style ={background}>\n                    <div id={'line'}/>\n                    <div id={'pie'}/>\n                <div id={'stream'}/>\n\n                <div id={'column'}/>\n                <canvas id=\"heatchart\" width=\"400\" height=\"260\"\n                />\n                <div id=\"raid\"/>\n                <div id={\"stackColumn\"}/>\n                </div>\n\n                <Panel/>\n            </Fragment>\n        );\n    }\n}\n\n\n\n\n/* {(<SliderInput\n                     value={[0,this.state.time]}\n                    min={0}\n                    max={24 * 60}\n                    formatLabel={this._formatLabel}\n                    onChange={({value}) => {\n                        if (value % 3600 === 0) {\n                            var p = getRoute(value / 3600);\n                            p.then(function () {\n                                this.setState({\n                                    Routes: Routes\n                                })\n                            }.bind(this))\n                        }\n                        this.setState({time: value});\n                        console.log(value)\n                    }}\n                />)\n                }*/\n\n\n// export function renderToDOM(container) {\n//     render(<App />, container);\n// }\n\n\n\n\n//ReactDOM.render(<App />, document.getElementById('root'));\n// ReactDOM.render(<CustomTicks />,document.getElementById('app'))\n\n// require('d3-request').csv(DATA_URL, (error, response) => {\n//         if (!error) {\n//             const data = response.map(row => ({\n//                 timestamp: new Date(`${row.DateTime} UTC`).getTime(),\n//                 latitude: Number(row.Latitude),\n//                 longitude: Number(row.Longitude),\n//                 depth: Number(row.Depth),\n//                 magnitude: Number(row.Magnitude)\n//             }));\n//             ReactDOM.render(<App2 data={data} />, document.getElementById('root'));\n//         }\n//     });\n","/Users/xxxxxxqq/ITS/deckgl/src/components/panel/control.js",["241","242","243","244","245","246","247","248","249","250","251","252","253","254","255"],"import React ,{Component} from 'react';\nimport ReactDOM from 'react-dom';\nimport Button from '@material-ui/core/Button';\nimport { Select,SIZE } from \"baseui/select\";\nimport {BaseProvider, LightTheme, styled} from \"baseui\";\nimport {Client as Styletron} from 'styletron-engine-atomic';\nimport {Provider as StyletronProvider} from 'styletron-react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport * as d3 from 'd3'\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport RadioGroup from \"@material-ui/core/RadioGroup\";\nimport Radio from \"@material-ui/core/Radio\";\nimport FormLabel from \"@material-ui/core/FormLabel\";\nimport Chip from '@material-ui/core/Chip';\nimport TextField from '@material-ui/core/TextField';\nimport {text} from \"d3-request\";\nimport $ from \"jquery\"\n// let keys=[];\nlet ip={}\nlet content={}\n// const { exec } = require('child_process');\n// // 输出当前目录（不一定是代码所在的目录）下的文件和文件夹\n// exec('ls -l', (err, stdout, stderr) => {\n//     if(err) {\n//         console.log(err);\n//         return;\n//     }\n//     console.log(`stdout: ${stdout}`);\n//     console.log(`stderr: ${stderr}`);\n// })\n\n//读取ip地址\nfunction readipData(){\n\n    return new Promise(resolve => {\n        // d3.csv('https://raw.githubusercontent.com/HOOLoLo/ITS/master/deckgl/public/panel.csv').then(d=>{\n        d3.csv('panel.csv').then(d=>{\n                d.map(x=>{\n                ip[x['no']]=x['ip']\n            })\n            let name=Object.keys(ip);\n            console.log(name)\n            resolve(name)\n            // console.log(ip)\n        })\n    })\n\n}\n\nfunction setK() {\n    return new Promise(resolve => {\n        d3.csv('content.csv').then(d=>{\n            d.map(x=>{\n                content[x['name']]=x['path']\n            })\n            console.log(content)\n            let k=Object.keys(content);\n            console.log('k',k)\n            resolve(k)\n        })\n    })\n}\n\n// setK().then()\n\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        '& > *': {\n            margin: theme.spacing(1),\n        },\n    },\n}));\n\n\n\n\n\n\n\nlet p=setK();\nlet p2=readipData()\nexport function Panel() {\n    const [value, setValue] = React.useState('MIC');\n    const [ipValue,setIP]=React.useState('1号机(MIC)');\n\n    const[keys,setKeys]=React.useState(['wait']);\n    const[ipName,setName]=React.useState(['wait']);\n\n    p.then((result)=>{\n        setKeys(result)\n    });\n\n    p2.then((result)=>{\n        setName(result)\n    })\n\n\n    // setKeys(setK());\n\n\n    const classes = useStyles();\n    function handleChange(event) {\n        console.log()\n        setValue(event.target.value);\n    }\n\n    function handleIPChoese(event) {\n        setIP(event.target.value);\n    }\n\n\n    function send(event) {\n\n        console.log(event.currentTarget)\n        const http=new XMLHttpRequest();\n        const url=ip[event.currentTarget.value]+'/url/'+value;\n        console.log(url)\n        http.open('GET',url)\n        http.send()\n    }\n\n    function sendVolume(event){\n        const http=new XMLHttpRequest();\n        console.log(event.currentTarget.value)\n        const url=ip[ipValue]+'/volume/'+event.currentTarget.value;\n        http.open('GET',url)\n        http.send()\n    }\n    function sendScroll(event) {\n        const http=new XMLHttpRequest();\n        console.log(event.currentTarget.value)\n        const url=ip[ipValue]+'/scroll/'+event.currentTarget.value;\n        http.open('GET',url)\n        http.send()\n\n    }\n    function sendOpenChrome(event) {\n        const http=new XMLHttpRequest();\n        const url=ip[ipValue]+'/openChrome';\n        http.open('GET',url);\n        http.send()\n    }\n\n    function shutdown() {\n        let message=window.confirm('确定关闭'+ipValue+'吗？')\n        if (message===true){\n            const http=new XMLHttpRequest();\n            const url=ip[ipValue]+'/shutdown';\n            http.open('GET',url);\n            http.send()\n        }\n        else return\n    }\n\n    function openAllChrome(){\n        for(let prop in ip){\n            if(ip[prop]){\n                console.log(ip[prop])\n                const http=new XMLHttpRequest();\n                const url=ip[prop]+'/openChrome';\n                http.open('GET',url);\n                http.send()\n            }\n        }\n    }\n\n    function updateService() {\n        let message=window.confirm('确定更新'+ipValue+'服务吗？')\n        if(message===true){\n            const http=new XMLHttpRequest();\n            const url=ip[ipValue]+'/update';\n            // $.post(url,\"copy file////Mypassport/Storage/content.csv . /Y\",text)\n            http.open('GET',url);\n            http.send()\n        }\n        else return\n    }\n\n    function updateMain(){\n        let message=window.confirm('确定更新'+ipValue+'服务吗？')\n        if(message===true){\n            const http=new XMLHttpRequest();\n            const url='http://192.168.0.161:5556'+'/updateMain';\n            // $.post(url,\"copy file////Mypassport/Storage/content.csv . /Y\",text)\n            http.open('GET',url);\n            http.send()\n        }\n        else return\n    }\n\n    function openPotPlayer(){\n        for(let prop in ip){\n            if(ip[prop]){\n                console.log(ip[prop])\n                const http=new XMLHttpRequest();\n                const url=ip[prop]+'/openPotPlayer/'+document.getElementById('videoname').value;\n                http.open('GET',url);\n                http.send()\n            }\n        }\n    }\n    function closePotPlayer() {\n        for(let prop in ip){\n            if(ip[prop]){\n                console.log(ip[prop])\n                const http=new XMLHttpRequest();\n                const url=ip[prop]+'/closePotPlayer';\n                http.open('GET',url);\n                http.send()\n            }\n        }\n    }\n    //全景视频使用\n    function dragLeft(){\n        const http=new XMLHttpRequest();\n        const url=ip[ipValue]+'/dragLeft/'+document.getElementById('leftPix').value;\n        http.open('GET',url);\n        http.send()\n    }\n\n    function dragRight() {\n        const http=new XMLHttpRequest();\n        const url=ip[ipValue]+'/dragLeft/'+document.getElementById('rightPix').value;\n        http.open('GET',url);\n        http.send();\n    }\n    function sendCommand(){\n            const url=ip[ipValue]+'/cmd';\n            $.post(url,{cmd:document.getElementById('command').value})\n\n    }\n    // if(!keys){\n    //     console.log('keys')\n    //     return <div>wait</div>\n    // }\n\n    // function startBackMusic() {\n    //     const http=new XMLHttpRequest();\n    //     const url=ip[ipValue]+'/openMusic';\n    //     http.open('GET',url);\n    //     http.send()\n    // }\n    // function stopBackMusic() {\n    //     const http=new XMLHttpRequest();\n    //     const url=ip[ipValue]+'/stopMusic';\n    //     http.open('GET',url);\n    //     http.send()\n    // }\n\n\n    function adjustAllvideo(){\n        let list=[10,10,10,10,10,10,10]\n        ip.map((i,v)=>{\n            const http=new XMLHttpRequest();\n            //用正负来区分左右把不要单独了\n            const url=ip[i]+'/dragLeft/'+list[i];\n            http.open('GET',url);\n            http.send()\n        })\n    }\n    function flip(){\n        const http=new XMLHttpRequest();\n        const url=ip[ipValue]+'/flip';\n        http.open('GET',url);\n        http.send()\n    }\n\n    function sendDownload(){\n        const http=new XMLHttpRequest();\n        const url=ip[ipValue]+'/download/'+document.getElementById('downloadfile').value;\n        http.open('GET',url);\n        http.send()\n    }\n    function closePreview() {\n        const http=new XMLHttpRequest();\n        const url=ip[ipValue]+'/closepreview';\n        http.open('GET',url);\n        http.send()\n    }\n\n    function openEdge(){\n        const http=new XMLHttpRequest();\n        const url=ip[ipValue]+'/openEdge';\n        http.open('GET',url);\n        http.send()\n    }\n    return (\n            <FormControl component=\"fieldset\">\n                <FormLabel component=\"legend\">Content</FormLabel>\n\n                <div className={classes.root}>\n                    <Button variant=\"contained\" color=\"primary\"  onClick={openAllChrome} >\n                        打开所有浏览器\n                    </Button>\n                </div>\n\n                <RadioGroup aria-label=\"content\" name=\"content\" value={value} onChange={handleChange}>\n                    {/*{*/}\n                    {/*    ()=>{*/}\n                    {/*        if(keys!==[]){*/}\n                    {/*            console.log(keys);*/}\n                    {/*   */}\n                    {/*        }*/}\n                    {/*    }*/}\n                    {/*}*/}\n                    {\n                        keys.map((value,index)=>{\n                            console.log('d',value);\n                            return(\n                                <div>\n                                    {index===0&&<Chip color=\"primary\" size=\"small\"  label={'拼接屏内容'}/>}\n                                    {index===5&&<Chip color=\"primary\" size=\"small\"  label={'融合内容'}/>}\n                                    {index===14&&<Chip color=\"primary\" size=\"small\"  label={'玻璃内容'}/>}\n                                    {index===18&&<Chip color=\"primary\" size=\"small\"  label={'窗户'}/>}\n                                    <FormControlLabel key={index} value={value} control={<Radio />} label={value}  />\n                                </div>\n\n                            )\n                        })\n                    }\n\n\n                    {/*<FormControlLabel value={keys[0]} control={<Radio />} label={d}  />*/}\n                    {/*<FormControlLabel value={d} control={<Radio />} label={d}  />*/}\n                    {/*<FormControlLabel value={d} control={<Radio />} label={d}  />*/}\n                    {/*<FormControlLabel value={d} control={<Radio />} label={d}  />*/}\n                    {/*<FormControlLabel value={d} control={<Radio />} label={d}  />*/}\n                </RadioGroup>\n                <div className={classes.root}>\n                    {\n                        ipName.map(((value, index) => {\n                            return(\n                                <Button key={index} variant=\"contained\" color=\"primary\" value={value} onClick={send} >\n                                    {value}\n                                </Button>\n                            )\n                        }))\n                    }\n                    {/*<Button variant=\"contained\" color=\"primary\" value={1} onClick={send} >*/}\n                    {/*    1号机(MIC)*/}\n                    {/*</Button>*/}\n                    {/*<Button variant=\"contained\" color=\"primary\" value={2} onClick={send}>*/}\n                    {/*    2号机(ML)*/}\n                    {/*</Button>*/}\n                    {/*<Button variant=\"contained\" color=\"primary\" value={3} onClick={send}>*/}\n                    {/*    3号机(DTW)*/}\n                    {/*</Button>*/}\n                    {/*<Button variant=\"contained\" color=\"primary\" value={4} onClick={send}>*/}\n                    {/*    4号机(news)*/}\n                    {/*</Button>*/}\n                    {/*<Button variant=\"contained\" color=\"primary\" value={5} onClick={send}>*/}\n                    {/*    5号机(conclusion)*/}\n                    {/*</Button>*/}\n                    {/*<Button variant=\"contained\" color=\"primary\" value={6} onClick={send}>*/}\n                    {/*    6号机(融合)*/}\n                    {/*</Button>*/}\n                    {/*<Button variant=\"contained\" color=\"primary\" value={7} onClick={send}>*/}\n                    {/*    7号机(玻璃)*/}\n                    {/*</Button>*/}\n                    {/*<Button variant=\"contained\" color=\"primary\" value={8} onClick={send}>*/}\n                    {/*    8号机(窗户)*/}\n                    {/*</Button>*/}\n                </div>\n                <RadioGroup aria-label=\"ipLabel\" name=\"ipLabel\" value={ipValue} onChange={handleIPChoese}>\n                {\n                    ipName.map((value,index)=>{\n                        console.log('d',value);\n                        return(\n                                <FormControlLabel key={index} value={value} control={<Radio />} label={value}  />\n\n                        )\n                    })\n                }\n                </RadioGroup>\n                <div className={classes.root}>\n                    <Button variant=\"contained\" color=\"secondary\"  value={'up'} onClick={sendVolume}> 增大音量</Button>\n                    <Button variant=\"contained\" color=\"secondary\"  value={'down'} onClick={sendVolume} > 减小音量</Button>\n                </div>\n                <div className={classes.root}>\n                    <Button variant=\"contained\" color=\"secondary\"  value={'front'} onClick={sendScroll}> 向前滑动</Button>\n                    <Button variant=\"contained\" color=\"secondary\"  value={'back'} onClick={sendScroll} > 向后滑动</Button>\n                </div>\n                <div className={classes.root}>\n                    <Button variant=\"contained\" color=\"secondary\" onClick={sendOpenChrome}> 打开浏览器</Button>\n                    <Button variant=\"contained\" color=\"secondary\"  onClick={shutdown}> 关机</Button>\n                    <Button variant=\"contained\" color=\"secondary\" onClick={openEdge}>打开Edge浏览器</Button>\n                </div>\n                <div className={classes.root}>\n                    <Button variant=\"contained\" color=\"secondary\" onClick={updateService}> 更新服务</Button>\n                </div>\n                <div className={classes.root}>\n                    <Button variant=\"contained\" color=\"secondary\" onClick={updateMain}> 从git上更新主服务</Button>\n                </div>\n                <div className={classes.root}>\n                    <TextField id=\"videoname\" label=\"输入视频名称\" variant=\"outlined\" defaultValue=\"vr.webm\"/>\n                    <Button variant=\"contained\" color=\"secondary\" onClick={openPotPlayer}> 打开全景视频</Button>\n                    <Button variant=\"contained\" color=\"secondary\" onClick={closePotPlayer}> 关闭全景视频</Button>\n                    <Button variant=\"contained\" color=\"secondary\" onClick={closePreview}> 关闭预览</Button>\n\n                </div>\n                <div className={classes.root}>\n                    <TextField id=\"leftPix\" label=\"输入距离\" variant=\"outlined\" defaultValue={'50'}/>\n                    <Button variant=\"contained\" color=\"secondary\" onClick={dragLeft}> 向左调整</Button>\n                    <TextField id=\"rightPix\" label=\"输入距离\" variant=\"outlined\" defaultValue={'50'}/>\n                    <Button variant=\"contained\" color=\"secondary\" onClick={dragRight}> 向右调整</Button>\n                    <Button variant=\"contained\" color=\"secondary\" onClick={flip}> 视频左右翻转</Button>\n                </div>\n                <div className={classes.root}>\n                    <TextField id=\"command\" label=\"输入指令\" variant=\"outlined\" defaultValue={\"copy file////Mypassport/Storage/360video . /Y\"}/>\n                    <Button variant=\"contained\" color=\"secondary\" onClick={sendCommand}> 发送指令</Button>\n                </div>\n                <div className={classes.root}>\n                    <TextField id=\"downloadfile\" label=\"文件名\" variant=\"outlined\" defaultValue={\"vr.webm\"}/>\n                    <Button variant=\"contained\" color=\"secondary\" onClick={sendDownload}> 下载文件</Button>\n                </div>\n            </FormControl>\n        );\n\n\n\n}\n\n","/Users/xxxxxxqq/ITS/deckgl/src/components/lineChart/main.js",["256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274"],"import * as d3 from 'd3'\nimport React, {useState, useCallback, useEffect, Fragment, Component} from 'react';\n\nimport {ColorLegend} from \"./ColorLegend\";\nimport './line.css'\nconst width = 960;\nconst height = 500;\nconst margin = { top: 20, right: 200, bottom: 65, left: 150 };\nvar innerWidth = width - margin.right - margin.left;\nvar innerHeight = height - margin.top - margin.bottom;\nconst colorLegendLabel='country';\nconst circleRadius=5;\nconst colorScale = d3.scaleOrdinal()\nconst countrylist=['China','US','Japan','Italy','France','United Kingdom'];\nconst colorTable=['#E25A42','#F2DA57','#42A5B3','#A0B700','#193556','#137B80'];\ncolorScale.domain(countrylist)\n    .range(colorTable)\n\nconst totalTime=10000;\n// let currentTime=new Date(2020,1,22);\n\nconst yScale = d3.scaleLinear()\n    .domain([0, 100000])\n    .range([innerHeight, 0]);\nconst yAxisGenerator = d3.axisLeft()\n    // .tickValues(d3.range(0, 3, 5));\n    let xdomain=[new Date(2020, 0, 22), new Date()];\n    let xScale=d3.scaleTime()\n        .domain(xdomain)\n        .range([0, innerWidth]);\n    const xAxisGenerator = d3.axisBottom()\n\n\n    let covidMap=new Map();\n    //数据格式\n//{\n//  {\n//  {\n//  'country':{\n//      time1:\n//      time2:\n//      ...\n//  }\n//\n//  }\n//}\n    let dateKey=[];\n    let sorted=new Map();\n    let dataFlow=[];\n\n    let lineData=[]\n    function getCovid() {\n        return new Promise(resolve => {\n            d3.csv('https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv').then(d=>{\n            d.map((i,index)=>{\n                for(let k in i){\n                    let t=new Date(k)\n                    if(t.getDate()){\n                        i[k]=parseInt(i[k])\n                    }\n                }\n                if(!covidMap.has(i['Country/Region'])){\n                    covidMap.set(i['Country/Region'],i)\n                }\n                else{\n                    let tmp=covidMap.get(i['Country/Region'])\n                    for(let k in tmp){\n                        // console.log(k)\n                        let d=new Date(k);\n                        if(d.getDate()){\n                            if(dateKey.indexOf(k)===-1){\n                                dateKey.push(k)\n                            }\n                            // console.log(tmp[k])\n                            tmp[k]=(tmp[k]+i[k])\n                            // console.log(tmp)\n                        }\n                    }\n                }\n                }\n            )\n                //这么做好像没有什么用，曲线图是将每天的数据\n                console.log(covidMap)\n                // dateKey.forEach(d=>{\n                //     console.log(new Date(d))\n                // })\n                countrylist.map((d,index)=>{\n                    let c={\n                        color:colorTable[index],\n                        country: d,\n                        path:[]\n                    }\n                    for(let k in covidMap.get(d)){\n                        let tmp=new Date(k);\n                        if(tmp.getDate()){\n                            // console.log('k',k)\n                            let t=new Date(tmp.getFullYear(),tmp.getMonth(),tmp.getDate())\n                       c.path.push([tmp,covidMap.get(d)[k]])\n                        }\n                    }\n                    lineData.push(c)\n                })\n                console.log(lineData)\n                resolve()\n\n                // dateKey.forEach(k=>{\n                //     let arrayMap=Array.from(covidMap)\n                //     console.log('arrayMap',arrayMap);\n                //     let tmp=[]\n                //     arrayMap.forEach(d=>{\n                //         if(countrylist.indexOf(d[0])!==-1){\n                //             // tmp.push({\n                //             //     Country:d[0]\n                //             //     Value:\n                //             // })\n                //         }\n                //     })\n                //\n                //     sorted[k]= arrayMap.sort((a,b)=>{\n                //         if(a[1][k]>b[1][k]){\n                //             return -1\n                //         }\n                //         else return 1\n                //     })\n                //     // console.log(sorted[k])\n                // })\n                // console.log(sorted)\n                // for(let i in sorted){\n                //\n                // }\n\n            })\n        })\n    }\n\nlet last = array => array[array.length - 1];\n\n\n\n\n    // var xAxisMajor = d3.axisBottom().scale(xScale);\n    // var xAxisMinor = d3.axisBottom().scale(xScale).ticks(50);\n\n    // const circleRadius = 7;\n    // const colorLegendLabel='city'\n    // const colorScale = d3.scaleOrdinal()\n    // let range=[];\n    // if(keys){\n    //     keys.forEach((d,i)=>{\n    //             range.push(d3.interpolateSpectral(i/8))\n    //         }\n    //     )\n    //     colorScale.domain(keys)\n    //         .range(range)\n    // }\n//\n// }\n\n\n\nfunction setData(day) {\n    let data=[]\n    lineData.map((x)=>{\n        let tmp=[];\n        x.path.map((i,index)=>{\n            if(index>day){\n                tmp.push(x.path[day])\n            }\n            else{\n                tmp.push(i)\n            }\n        })\n        data.push({\n            color:x.color,\n            country:x.country,\n            path:tmp\n        })\n    })\n    return data\n}\n\nexport default class App extends Component{\n\n    constructor(props) {\n        super(props);\n        this.state={\n            day:0,\n            linedata:[],\n            yScale:d3.scaleLinear()\n                .domain([0, 10000])\n                .range([innerHeight, 0])\n                .nice(),\n            lineGenerator : d3.line()\n            // .curve(d3.curveCatmullRom)\n                .x(d => xScale(d[0]))\n                .y(d => this.state.yScale(d[1]))\n        }\n\n    }\n\n    componentDidMount() {\n        let testData=\n            []\n        //     [{\n        //     path:[[new Date(2020,0,22),1000],[new Date(2020,1,10),10000]]\n        // }]\n        let p1=getCovid();\n        p1.then(result=>{\n            let svg=d3.select('svg');\n            const g = svg.append(\"g\")\n                .attr('id','Axis')\n                .attr(\"transform\", `translate(${margin.left}, ${margin.top})`);\n\n            let gx=g.append(\"g\")\n            // .call(xAxisGenerator)\n                .attr(\"transform\", `translate(0, ${innerHeight})`);\n            let gy=g.append(\"g\").attr('id','yAxis')\n                gy.call(yAxisGenerator.scale(this.state.yScale));\n            let p=gx.transition().duration(2000)\n                .call(xAxisGenerator.scale(xScale))\n                .end()\n            p.then(\n                // ()=>{\n                //     let x=d3.scaleTime()\n                //         .domain([new Date(2010, 0, 1), new Date(2010, 10, 1)])\n                //         .range([0, innerWidth])\n                //     gx.transition().duration(2000)\n                //         .call(xAxisGenerator.scale(x))\n                // }\n            )\n            svg.append('g').attr('id','line')\n                .attr(\"transform\", `translate(${margin.left}, ${margin.top})`);\n\n            svg.append('g').attr('id','text')\n                .attr(\"transform\", `translate(${margin.left}, ${margin.top})`)\n            // let lineg=svg.append('g');\n            //\n            // let line=lineg.selectAll('path')\n            //     .data(this.state.linedata)\n            //     .join('path')\n            //\n            // line\n            //     .attr(\"fill\", \"none\")\n            //     .attr(\"stroke\", \"black\")\n            //     .attr(\"stroke-width\", 2.5)\n            //     .attr(\"stroke-linejoin\", \"round\")\n            //     .attr(\"stroke-linecap\", \"round\")\n            //     .attr(\"d\",lineGenerator(this.state.linedata))\n\n            // let lineg=d3.select('#line');\n            // let line=lineg.selectAll('path')\n            //     .data(testData)\n            //     .join('path')\n            //     .attr(\"fill\", \"none\")\n            //     .attr(\"stroke\", \"black\")\n            //     .attr(\"stroke-width\", 2.5)\n            //     .attr(\"stroke-linejoin\", \"round\")\n            //     .attr(\"stroke-linecap\", \"round\")\n            //     // .attr(\"d\",lineGenerator(this.state.linedata[0].path))\n            //     .attr(\"d\",d=>{\n            //         console.log('d',lineGenerator(d.path))\n            //         return lineGenerator(d.path)\n            //     });\n            // setTimeout(function () {\n            //\n            //     this.setState({\n            //         linedata: newData\n            //     })\n            // },1000)\n            this._animate()\n        });\n    }\n    _animate(){\n\n\n            let newData=setData(this.state.day)\n            console.log('newData',newData);\n            let max=-1;\n            newData.map(x=>{\n                x.path.map(t=>{\n                    if(t[1]>max){\n                        max=t[1]\n                    }\n                })\n            })\n            if(this.state.yScale.domain()[1]<max){\n                this.state.yScale.domain([0,max])\n                let gy=d3.select('#yAxis');\n                gy.transition().duration(500).call(yAxisGenerator.scale(this.state.yScale))\n            }\n\n            this.setState({\n                        linedata: newData\n                    })\n\n        let text=d3.select('#text');\n            text.selectAll('text')\n                .data(this.state.linedata)\n                .join('text')\n                .property('_next',function(d){\n                    console.log(d)\n                    return d.path[this.state.day][1]\n                }.bind(this))\n                .property('_current',function (d) {\n                    if(this.state.day!==0){\n                        return d.path[this.state.day-1][1]\n                    }\n                    else return d.path[this.state.day][1]\n\n                }.bind(this))\n                .transition()\n                .duration(500)\n                .ease(d3.easeLinear)\n                .textTween(function(d) {\n                    // console.log('d',d);\n                    // console.log('day',this.state.day)\n                    const i = d3.interpolate(this._current, this._next);\n                    return function(t) { return this._cuurent=i(t).toFixed(0); };\n                })\n                // .text(d=>d.path[this.state.day][1])\n                .attr('transform',d=> `translate(${xScale(d.path[this.state.day][0])}, ${this.state.yScale(d.path[this.state.day][1])})`)\n                .style(\"font-family\", \"monospace\")\n                .style(\"fill\", d => d.color);\n\n            let lineg=d3.select('#line');\n            let line=lineg.selectAll('path')\n                .data(this.state.linedata)\n                .join('path')\n            let p=line\n                .attr(\"fill\", \"none\")\n                .attr(\"stroke\", d=>d.color)\n                .attr(\"stroke-width\", 2.5)\n                .attr(\"stroke-linejoin\", \"round\")\n                .attr(\"stroke-linecap\", \"round\")\n                .transition()\n                .ease(d3.easeLinear)\n                .duration(500)\n                .attr(\"d\",d=>this.state.lineGenerator(d.path))\n                .end()\n            p.then(()=>{\n                if(this.state.day<this.state.linedata[0].path.length-1){\n                    // let y = d3.scaleLinear()\n                    //     .domain([0, 1000])\n                    //     .range([innerHeight, 0]);\n                    // let gy=d3.select('#yAxis');\n                    // gy.transition().duration(500).call(yAxisGenerator.scale(y))\n                    xdomain=[new Date(2020, 0, 22), new Date(2020, 3, 1)]\n                    this.state.day+=1;\n                    this._animationFrame = window.requestAnimationFrame(this._animate.bind(this));\n                }\n            })\n\n\n    }\n    componentWillUnmount() {\n        if (this._animationFrame) {\n            window.cancelAnimationFrame(this._animationFrame);\n        }\n    }\n\n     render() {\n\n\n\n\n         return <div className={'line'}>\n             <svg width={width} height={height}>\n                 <g transform={`translate(${margin.left},${margin.top})`}>\n                     <g transform={`translate(${innerWidth + 60}, 60)`}>\n                         <text x={35} y={-25} className=\"axis-label\" textAnchor=\"middle\" >\n                             {colorLegendLabel}\n                         </text>\n                         <ColorLegend\n                             tickSpacing={22}\n                             tickSize={10}\n                             tickTextOffset={12}\n                             tickSize={circleRadius}\n                             colorScale={colorScale}\n                             // onHover={setHoveredValue}\n                             // hoveredValue={hoveredValue}\n                             // fadeOpacity={fadeOpacity}\n                         />\n                     </g>\n                 </g>\n\n             </svg>\n         </div>\n     }\n}\n","/Users/xxxxxxqq/ITS/deckgl/src/components/city/city.js",["275","276","277","278","279","280","281","282","283","284","285","286"],"import React, { useState, useCallback, useEffect,Fragment } from 'react';\nimport ReactDOM from 'react-dom';\nimport { csv, scaleLinear, scaleOrdinal, max, format, extent } from 'd3';\nimport { useData } from './useData';\nimport { AxisBottom } from './AxisBottom';\nimport { AxisLeft } from './AxisLeft';\nimport { Marks } from './Marks';\nimport { ColorLegend } from './ColorLegend';\nimport * as d3 from 'd3'\nimport './city.css'\nconst width = 960;\nconst height = 500;\nconst margin = { top: 20, right: 200, bottom: 65, left: 90 };\nconst xAxisLabelOffset = 50;\nconst yAxisLabelOffset = 45;\nconst innerHeight = height - margin.top - margin.bottom;\nconst innerWidth = width - margin.left - margin.right;\nconst xAxisLabel = 'Satisfaction';\nconst yAxisLabel = 'Worthwhile';\nconst colorLegendLabel = 'Area';\nconst siFormat = format('.2s');\nconst xAxisTickFormat = tickValue => siFormat(tickValue).replace('G', 'B');\nlet tmp=[];\nfunction getData() {\n\n    return new Promise(resolve => {\n        d3.csv('./happy.csv').then(d=>{\n            d.map((l,index)=>{\n                let pro=Object.getOwnPropertyNames(l);\n                // console.log(l['Area']);\n                pro.map((n,index)=>{\n                    if(index>1){\n                        if(tmp[n]===undefined){\n                            tmp[n]={}\n                        }\n                        if(tmp[n][l['Area']]===undefined){\n                            tmp[n][l['Area']]={};\n                        }\n                        tmp[n][l['Area']].happy=l[n];\n                    }\n                })\n                // l.map((t,i)=>{\n                //     if(i>1){\n                //         if(data[i]===undefined){\n                //             data[i]=[]\n                //         }\n                //         // data[i].happy=\n                //         console.log(Object.getOwnPropertyNames(t))\n                //     }\n                //\n                // })\n            })\n\n\n            d3.csv('./worthwhile.csv').then(d=>{\n                d.map((l,index)=>{\n                    let pro=Object.getOwnPropertyNames(l);\n                    pro.map((n,index)=>{\n                        if(index>1){\n                            if(tmp[n]===undefined){\n                                tmp[n]={}\n                            }\n                            if(tmp[n][l['Area']]===undefined){\n                                tmp[n][l['Area']]={};\n                            }\n                            tmp[n][l['Area']].worth=l[n];\n                        }\n                    })\n                })\n                console.log('data:',tmp)\n                resolve();\n            });\n\n        });\n    })\n\n\n}\n\nexport function City() {\n\n    // const [data, setData] = useState(null);\n    const data=useData();\n    // console.log('dataini:',data);\n    const [year,setYear]=useState(2011);\n    // useEffect(function init(){\n    //     console.log('start');\n    //     console.log('data2:',data);\n    //     if(data['2011/12']){\n    //         console.log('in');\n    //         let svg=d3.select('svg');\n    //         // console.log(svg);\n    //         let k=dataAt('2011/12');\n    //         console.log('k',k)\n    //         //这里并不能马上赋值成功，hook调用时异步的\n    //         // setCurrentData(k);\n    //         // console.log('currentData',currentData);\n    //         svg.selectAll('circle')\n    //             .data(k,d=>['city'])\n    //             .join('circle')\n    //             .attr(\"stroke\", \"black\")\n    //             .attr(\"r\", d =>{\n    //                 if(!(parseFloat(d.data['happy'])&&parseFloat(d.data['worth']))) return 0;\n    //                 else return 5\n    //             })\n    //             .attr(\"cx\", d => {if(parseFloat(d.data['happy'])){\n    //                 console.log(d.data['happy'])\n    //                 return xScale(d.data['happy'])\n    //             }})\n    //             .attr(\"cy\", d => {if(d.data['worth']){\n    //                 return yScale(d.data['worth'])\n    //             }\n    //             })\n    //             .attr(\"fill\", d => 'blue');\n    //         setYear(2012)\n    //         console.log(year)\n    //     }\n    // },[data]);\n    // useEffect(function update() {\n    //\n    //         if(year){\n    //             let currentData=dataAt(year+'/'+(year-2000+1));\n    //             let svg=d3.select('svg');\n    //             let c=svg.selectAll(\"circle\")\n    //                 .data(currentData,d=>d['city'])\n    //                 .join('circle')\n    //                 .attr(\"stroke\", \"black\")\n    //                 .attr(\"r\", d =>{\n    //                     if(!(parseFloat(d.data['happy'])&&parseFloat(d.data['worth']))) return 0;\n    //                     else return 5\n    //                 })\n    //                 .transition()\n    //                 // .on('end',function repeat(){\n    //                 //     console.log('end')\n    //                 // })\n    //                 .duration(1000)\n    //                 .attr(\"cx\", d => {if(parseFloat(d.data['happy'])){\n    //                     // console.log(d.data['happy'])\n    //                     return xScale(d.data['happy'])\n    //                 }})\n    //                 .attr(\"cy\", d => {if(d.data['worth']){\n    //                     return yScale(d.data['worth'])\n    //                 }\n    //                 })\n    //                 .attr(\"fill\", d => 'blue')\n    //                 .end();\n    //             c.then(result=>{\n    //                 if(year<2016){\n    //                     setYear(year+1)\n    //                     // updateCircle()\n    //                 }\n    //                 else {\n    //                     setYear(2011)\n    //                     // console.log('year:',year)\n    //                     // year=2011;\n    //                     // updateCircle()\n    //                 }\n    //                 console.log('done')\n    //             })\n    //         }\n    // },[year])\n    // function dataAt(year){\n    //     console.log('data:',data)\n    //     let results=[];\n    //     let pro=Object.getOwnPropertyNames(data[year]);\n    //     pro.forEach(d=>{\n    //         results.push({\n    //             city:d,\n    //             data:data[year][d],\n    //         })\n    //     })\n    //     return results\n    // }\n    // const [hoveredValue, setHoveredValue] = useState(null);\n    // if (!data) {\n    //     return <pre>Loading...</pre>;\n    // }\n    const xValue = d => d.data['happy'];\n    const yValue = d => d.data['worth'];\n    const colorValue = d => d.species;\n    const circleRadius = 7;\n\n\n    const xScale = scaleLinear()\n        // .domain(extent(data, xValue))\n        .domain([6.8,8.5])\n        .range([0, innerWidth])\n\n    const yScale = scaleLinear()\n        // .domain(extent(data, yValue))\n        .domain([8.5,6.8])\n        .range([0, innerHeight]);\n\n    const colorScale = scaleOrdinal()\n        .domain(['InnerLondon','OuterLondon'])\n        .range(['#E6842A', '#137B80']);\n\n    return (\n        <Fragment>\n            <b >time:<span id=\"Time\"></span>\n            </b>\n            <svg width={width} height={height}>\n                <g transform={`translate(${margin.left},${margin.top})`}>\n                    <AxisBottom\n                        xScale={xScale}\n                        innerHeight={innerHeight}\n                        tickFormat={xAxisTickFormat}\n                        tickOffset={5}\n                    />\n                    <text\n                        className=\"axis-label\"\n                        textAnchor=\"middle\"\n                        transform={`translate(${-yAxisLabelOffset},${innerHeight /\n                        2}) rotate(-90)`}\n                    >\n                        {yAxisLabel}\n                    </text>\n                    <AxisLeft yScale={yScale} innerWidth={innerWidth} tickOffset={5} />\n                    <text\n                        className=\"axis-label\"\n                        x={innerWidth / 2}\n                        y={innerHeight + xAxisLabelOffset}\n                        textAnchor=\"middle\"\n                    >\n                        {xAxisLabel}\n                    </text>\n                    <g transform={`translate(${innerWidth + 60}, 60)`}>\n                        <text x={35} y={-25} className=\"axis-label\" textAnchor=\"middle\">\n                            {colorLegendLabel}\n                        </text>\n                        <ColorLegend\n                            tickSpacing={22}\n                            tickSize={10}\n                            tickTextOffset={12}\n                            tickSize={circleRadius}\n                            colorScale={colorScale}\n                            // onHover={setHoveredValue}\n                            // hoveredValue={hoveredValue}\n                            // fadeOpacity={fadeOpacity}\n                        />\n                    </g>\n                    <g >\n                        <Marks\n                            data={data}//参数变了，组件就会自动刷新\n                            xScale={xScale}\n                            xValue={xValue}\n                            yScale={yScale}\n                            yValue={yValue}\n                            colorScale={colorScale}\n                            colorValue={colorValue}\n                            tooltipFormat={xAxisTickFormat}\n                            circleRadius={circleRadius}\n                            year={year}\n                            margin={margin}\n                            callback={()=>{\n                                if(year<2016){\n                                    setYear(year+1)\n                                }\n                                else{\n                                    setYear(2011)\n                                }\n                                document.getElementById('Time').innerHTML=year+'/'+(year-2000+1)\n\n                            }}\n                        />\n                    </g>\n                </g>\n            </svg>\n\n        </Fragment>\n\n    );\n};\n","/Users/xxxxxxqq/ITS/deckgl/src/components/Barchart/main.js",["287","288","289","290","291","292"],"import * as d3 from 'd3'\nimport React, { useState, useCallback, useEffect,Fragment } from 'react';\nimport ReactDOM from 'react-dom';\nimport {useData} from './useData'\nimport {AxisBottom} from \"../city/AxisBottom\";\nimport {AxisLeft} from \"../city/AxisLeft\";\nimport {Marks} from \"./Marks\"\nimport {ColorLegend} from \"../city/ColorLegend\";\nconst width = 960;\nconst height = 500;\nconst margin = { top: 20, right: 200, bottom: 65, left: 150 };\nvar innerWidth = width - margin.right - margin.left;\nvar innerHeight = height - margin.top - margin.bottom;\nconst xAxisLabel = 'Time';\nconst yAxisLabel='Light';\nconst siFormat = d3.format('.2s');\nconst xAxisLabelOffset = 50;\nconst yAxisLabelOffset = 70;\nconst xAxisTickFormat = tickValue => siFormat(tickValue).replace('G', 'B');\n//画河流图需要data和keys\n/*\n*data format data is a list\n* [{\n*   xvalue:x\n*   key1: k1\n*   key2: k2\n*   ...\n* }\n* ,\n* {\n*   ...\n* }\n* ...\n* ]\n*\n* keys 就是data中所有的key的集合\n*\n* */\n\nexport function BarG(){\n\n\n    const [data,keys]=useData();\n    const [start,setStart]=useState(19)\n\n\n\n\n\n    var xValue = function (d) { return new Date(d.date).getHours(); };\n    var xScale = d3.scaleLinear();\n    var yScale = d3.scaleLinear();\n\n\n\n\n    // var xAxisMajor = d3.axisBottom().scale(xScale);\n    // var xAxisMinor = d3.axisBottom().scale(xScale).ticks(50);\n\n    const circleRadius = 7;\n    const colorLegendLabel='city'\n    const colorScale = d3.scaleOrdinal()\n    let range=[];\n    if(keys){\n        keys.forEach((d,i)=>{\n                range.push(d3.interpolateSpectral(i/8))\n            }\n        )\n        colorScale.domain(keys)\n            .range(range)\n    }\n\n\n\n\n\n    return <div className={'bar'}>\n        <svg height={height} width={width}>\n            <g transform={`translate(${margin.left},${margin.top})`}>\n                <g transform={`translate(${innerWidth + 60}, 60)`}>\n                    <text x={35} y={-25} className=\"axis-label\" textAnchor=\"middle\">\n                        {colorLegendLabel}\n                    </text>\n                    <ColorLegend\n                        tickSpacing={22}\n                        tickSize={10}\n                        tickTextOffset={12}\n                        tickSize={circleRadius}\n                        colorScale={colorScale}\n                        // onHover={setHoveredValue}\n                        // hoveredValue={hoveredValue}\n                        // fadeOpacity={fadeOpacity}\n                    />\n                </g>\n                <Marks data={data}\n                       start={start}\n                       keys={keys}\n                       xScale={xScale}\n                       xValue={xValue}\n                       yScale={yScale}\n                       margin={margin}\n                       innerHeight={innerHeight}\n                       innerWidth={innerWidth}\n                       callback={()=>{\n                           if(start+24<139){\n                               console.log(data.length,start+24)\n                               setStart(start+24)\n                           }\n                           else{\n                               setStart(19)\n                           }\n                       }}\n                >\n\n                </Marks>\n                <AxisBottom\n                    xScale={xScale}\n                    innerHeight={innerHeight}\n                    tickFormat={xAxisTickFormat}\n                    tickOffset={2}\n                />\n                <text\n                    className=\"axis-label\"\n                    textAnchor=\"middle\"\n                    transform={`translate(${-yAxisLabelOffset},${innerHeight /\n                    2}) rotate(-90)`}\n                >\n                    {yAxisLabel}\n                </text>\n                {/*<AxisLeft yScale={yScale} innerWidth={innerWidth} tickOffset={5} />*/}\n                <text\n                    className=\"axis-label\"\n                    x={innerWidth / 2}\n                    y={innerHeight + xAxisLabelOffset}\n                    textAnchor=\"middle\"\n                >\n                    {xAxisLabel}\n                </text>\n            </g>\n        </svg>\n    </div>\n}\n","/Users/xxxxxxqq/ITS/deckgl/src/components/streamgraph/main.js",["293","294","295","296","297","298"],"import './stream.css'\nimport * as d3 from 'd3'\nimport React, { useState, useCallback, useEffect,Fragment } from 'react';\nimport ReactDOM from 'react-dom';\nimport {useData} from './useData'\nimport {AxisBottom} from \"../city/AxisBottom\";\nimport {AxisLeft} from \"../city/AxisLeft\";\nimport {Marks} from \"./Marks\"\nimport {ColorLegend} from \"../city/ColorLegend\";\n\nconst width = 960;\nconst height = 500;\nconst margin = { top: 20, right: 200, bottom: 65, left: 150 };\nvar innerWidth = width - margin.right - margin.left;\nvar innerHeight = height - margin.top - margin.bottom;\nconst xAxisLabel = 'Time';\nconst yAxisLabel='Light';\nconst siFormat = d3.format('.2s');\nconst xAxisLabelOffset = 50;\nconst yAxisLabelOffset = 70;\nconst xAxisTickFormat = tickValue => siFormat(tickValue).replace('G', 'B');\n\n//画河流图需要data和keys\n/*\n*data format data is a list\n* [{\n*   xvalue:x\n*   key1: k1\n*   key2: k2\n*   ...\n* }\n* ,\n* {\n*   ...\n* }\n* ...\n* ]\n*\n* keys 就是data中所有的key的集合\n*\n* */\n\nexport function StreamG(){\n\n\n    const [data,keys]=useData();\n    const [start,setStart]=useState(19)\n\n\n\n\n\n    var xValue = function (d) { return new Date(d.date).getHours(); };\n    var xScale = d3.scaleLinear();\n    var yScale = d3.scaleLinear();\n\n\n    // var xAxisMajor = d3.axisBottom().scale(xScale);\n    // var xAxisMinor = d3.axisBottom().scale(xScale).ticks(50);\n//设置标志列表\n    const circleRadius = 7;\n    const colorLegendLabel='city'\n    const colorScale = d3.scaleOrdinal()\n    let range=[];\n    if(keys){\n        keys.forEach((d,i)=>{\n                range.push(d3.interpolateSpectral(i/8))\n            }\n        )\n        colorScale.domain(keys)\n            .range(range)\n    }\n\n\n\n    return <div className={'stream'} >\n        <svg height={height} width={width} >\n            <g transform={`translate(${margin.left},${margin.top})`}>\n                <g transform={`translate(${innerWidth + 60}, 60)`}>\n                    <text x={35} y={-25} className=\"axis-label\" textAnchor=\"middle\" style={{'fill':'#FFFFFF'}}>\n                        {colorLegendLabel}\n                    </text>\n                    <ColorLegend\n                        tickSpacing={22}\n                        tickSize={10}\n                        tickTextOffset={12}\n                        tickSize={circleRadius}\n                        colorScale={colorScale}\n                        // onHover={setHoveredValue}\n                        // hoveredValue={hoveredValue}\n                        // fadeOpacity={fadeOpacity}\n                    />\n                </g>\n                <Marks data={data}\n                       start={start}\n                       keys={keys}\n                       xScale={xScale}\n                       xValue={xValue}\n                       yScale={yScale}\n                       margin={margin}\n                       innerHeight={innerHeight}\n                       innerWidth={innerWidth}\n                       callback={()=>{\n                           if(start+24<139){\n                               console.log(data.length,start+24)\n                               setStart(start+24)\n                           }\n                           else{\n                               setStart(19)\n                           }\n                       }}\n                >\n\n                </Marks>\n                <AxisBottom\n                    xScale={xScale}\n                    innerHeight={innerHeight}\n                    tickFormat={xAxisTickFormat}\n                    tickOffset={2}\n                />\n                <text\n                    className=\"axis-label\"\n                    textAnchor=\"middle\"\n                    transform={`translate(${-yAxisLabelOffset},${innerHeight /\n                    2}) rotate(-90)`}\n                >\n                    {yAxisLabel}\n                </text>\n                {/*<AxisLeft yScale={yScale} innerWidth={innerWidth} tickOffset={5} />*/}\n                <text\n                    className=\"axis-label\"\n                    x={innerWidth / 2}\n                    y={innerHeight + xAxisLabelOffset}\n                    textAnchor=\"middle\"\n                >\n                    {xAxisLabel}\n                </text>\n            </g>\n        </svg>\n    </div>\n\n\n}\n","/Users/xxxxxxqq/ITS/deckgl/src/components/WorkFlow/news.js",["299","300"],"import React, {Component} from \"react\";\nfunction loadStyle(code){\n    var style = document.createElement('style');\n    style.appendChild(document.createTextNode(code));\n    var head = document.getElementsByTagName('head')[0];\n    head.appendChild(style);\n}\n\n\nexport default class App extends Component{\n\n    constructor(props) {\n        super(props);\n    }\n\n    componentDidMount() {\n    debugger\n        var code='        html,body{margin:0;padding:0;overflow-y:hidden;}\\n' +\n            '        li {\\n' +\n            '            list-style: none;\\n' +\n            '            float: left;\\n' +\n            '            width: 100%;/*三列图片排列*/\\n' +\n            '            height: 50%;\\n' +\n            '            margin: 0 ;\\n' +\n            '            overflow: hidden;/*超出隐藏*/\\n' +\n            '            font-size: 0;\\n' +\n            '        }\\n' +\n            '        li img {\\n' +\n            '            width: 100%;\\n' +\n            '            height: 100%\\n' +\n            '        }\\n' +\n            '        li video{\\n' +\n            '            width: 100%;\\n' +\n            '            height: 100%\\n' +\n            '        }\\n' +\n            '        ul{\\n' +\n            '            margin:0;padding:0\\n' +\n            '        }'\n        loadStyle(code);\n    }\n\n    render() {\n\n        return <ul style={{overflow:\"hidden\",clear:\"both;\"}}>\n            <li>\n                <video src=\"/content/workflow/news.mp4\" autoPlay muted=\"muted\" loop=\"loop\"></video>\n            </li>\n            <li>\n                <img src=\"/content/workflow/news_down.jpg\"/>\n            </li>\n        </ul>\n\n    }\n\n}\n","/Users/xxxxxxqq/ITS/deckgl/src/components/covid-19.jsx",["301","302","303","304"],"import React, {Component, Fragment} from 'react';\nimport {render} from 'react-dom';\nimport {StaticMap} from 'react-map-gl';\nimport DeckGL from '@deck.gl/react';\nimport {ScatterplotLayer} from '@deck.gl/layers';\nimport {DataFilterExtension} from '@deck.gl/extensions';\nimport {MapView} from '@deck.gl/core';\nimport SliderCovid from './sliderCovid'\nimport {HeatmapLayer} from '@deck.gl/aggregation-layers';\nimport * as d3 from 'd3'\n\n\n// Set your mapbox token here\nconst MAPBOX_TOKEN = 'pk.eyJ1IjoiemhpZ3VhbmdkYSIsImEiOiJjanozdXg0b3EwMHh4M21tcXk2MHlpN3B1In0.lInf8zFl2BsP_bDjMFhf3w';\n\n\nconst MAP_VIEW = new MapView({\n    // 1 is the distance between the camera and the ground\n    farZMultiplier: 100\n});\n\n\nlet days=39;\n\nlet flag=-1;\n\n//read data\n\nlet dateMap=new Map();\nfunction getData(){\n    return new Promise(resolve => {\n        d3.csv(\"./COVID19_open_line_list.csv\").then(function (data) {\n            data.forEach(d=>{\n                let tmp=d.date_confirmation.split('.');\n                let tmpstr=tmp[2]+'-'+tmp[1]+'-'+tmp[0];\n                if(dateMap.has(tmpstr)){\n                    dateMap.get(tmpstr).push([d.longitude,d.latitude])\n                }\n                else{\n                    dateMap.set(tmpstr,[]);\n                }\n            })\n            resolve('done');\n        })\n    })\n}\n\n\n\n\n\nconst INITIAL_VIEW_STATE = {\n    longitude:  120.207057,\n    latitude: 30.225901,\n    zoom: 3,\n    pitch: 0,\n    bearing: 0\n};\n\nconst MS_PER_DAY = 8.64e7; // milliseconds in a day\n\nconst dataFilter = new DataFilterExtension({filterSize: 1});\n\nexport default class Covid extends Component {\n    // constructor(props) {\n    //     super(props);\n    //\n    //     const timeRange = this._getTimeRange(props.data);\n    //\n    //     this.state = {\n    //         timeRange,\n    //         filterValue: timeRange,\n    //         hoveredObject: null\n    //     };\n    //     this._onHover = this._onHover.bind(this);\n    //     this._renderTooltip = this._renderTooltip.bind(this);\n    // }\n    constructor(props) {\n        super(props);\n        // const [value, setValue] = React.useState([0]);\n        this.state = {\n            pointData:[],\n            days:days,\n            dayCount:0\n        };\n    }\n\n    // componentWillReceiveProps(nextProps) {\n    //     if (nextProps.data !== this.props.data) {\n    //         const timeRange = this._getTimeRange(nextProps.data);\n    //         this.setState({timeRange, filterValue: timeRange});\n    //     }\n    // }\n\n    // _getTimeRange(data) {\n    //     if (!data) {\n    //         return null;\n    //     }\n    //     return data.reduce(\n    //         (range, d) => {\n    //             const t = d.timestamp / MS_PER_DAY;\n    //             range[0] = Math.min(range[0], t);\n    //             range[1] = Math.max(range[1], t);\n    //             return range;\n    //         },\n    //         [Infinity, -Infinity]\n    //     );\n    // }\n\n    // _onHover({x, y, object}) {\n    //     this.setState({x, y, hoveredObject: object});\n    // }\n    _renderLayers() {\n\n        return [\n            // new ScatterplotLayer({\n            //     id: 'covid',\n            //     data:this.state.pointData,\n            //     opacity: 0.8,\n            //     radiusScale: 100,\n            //     radiusMinPixels: 1,\n            //     wrapLongitude: true,\n            //\n            //     getPosition: d =>d.coordinate,\n            //     getRadius: 500,\n            //     // getFillColor: d => {\n            //     //     const r = Math.sqrt(Math.max(d.depth, 0));\n            //     //     return [255 - r * 15, r * 5, r * 10];\n            //     // },\n            //\n            //     getFillColor:[255,0,0,255],\n            //\n            //     // getFilterValue: d => d.timestamp / MS_PER_DAY, // in days\n            //     // filterRange: [filterValue[0], filterValue[1]],\n            //     // filterSoftRange: [\n            //     //     filterValue[0] * 0.9 + filterValue[1] * 0.1,\n            //     //     filterValue[0] * 0.1 + filterValue[1] * 0.9\n            //     // ],\n            //     // extensions: [dataFilter],\n            //\n            //     pickable: true,\n            //     // onHover: this._onHover\n            // }),\n            new HeatmapLayer({\n                id:'heatmap',\n                data:this.state.pointData,\n                getPosition:d=>d.coordinate,\n                getWeight:10,\n                radiusPixels:20\n\n            })\n        ];\n    }\n\n    // _renderTooltip() {\n    //     const {x, y, hoveredObject} = this.state;\n    //     return (\n    //         hoveredObject && (\n    //             <div className=\"tooltip\" style={{top: y, left: x}}>\n    //                 <div>\n    //                     <b>Time: </b>\n    //                     <span>{new Date(hoveredObject.timestamp).toUTCString()}</span>\n    //                 </div>\n    //                 <div>\n    //                     <b>Magnitude: </b>\n    //                     <span>{hoveredObject.magnitude}</span>\n    //                 </div>\n    //                 <div>\n    //                     <b>Depth: </b>\n    //                     <span>{hoveredObject.depth} km</span>\n    //                 </div>\n    //             </div>\n    //         )\n    //     );\n    // }\n\n    _formatLabel(t) {\n        const date = new Date('2020-01-22');\n        date.setDate(date.getDate()+t);\n        return `${date.getFullYear()}/${date.getMonth()+1}/${date.getDate()}`;\n    }\n\n    render() {\n        const {mapStyle = 'mapbox://styles/mapbox/light-v9'} = this.props;\n        // const {timeRange, filterValue} = this.state;\n\n        return (\n            <Fragment>\n                <DeckGL\n                    views={MAP_VIEW}\n                    layers={this._renderLayers()}\n                    initialViewState={INITIAL_VIEW_STATE}\n                    controller={true}\n                >\n                    <StaticMap\n                        reuseMaps\n                        mapStyle={mapStyle}\n                        preventStyleDiffing={true}\n                        mapboxApiAccessToken={MAPBOX_TOKEN}\n                    />\n\n                    {/*{this._renderTooltip}*/}\n                </DeckGL>\n\n                <SliderCovid\n                    min={0}\n                    max={this.state.days}\n                    value={[0,this.state.dayCount]}\n                    formatLabel={this._formatLabel}\n\n                    onChange={({date,value}) => {\n                        console.log('value:',value)\n\n                        if(flag===-1){\n                            let p=getData();\n                            console.log(dateMap);\n                            p.then(result=>{\n                                let pointData=[];\n                                if(dateMap.has(date)){\n                                    dateMap.get(date).forEach(d=>{\n                                        console.log(d)\n                                        pointData.push({\n                                            coordinate:[parseFloat(d[0]),parseFloat(d[1])]\n                                        })\n                                    })\n                                    this.setState({\n                                        pointData:pointData,\n                                        dayCount:value[1]\n                                    })\n                                }\n\n                                flag=0;\n\n                            });\n\n                        }\n                        else{\n                            let pointData=[];\n\n                            if(dateMap.has(date)){\n                                dateMap.get(date).forEach(d=>{\n                                    pointData.push({\n                                        coordinate:[parseFloat(d[0]),parseFloat(d[1])]\n                                    })\n                                });\n                                this.setState({\n                                    pointData:pointData,\n                                    // dayCount:this.state.dayCount+1\n                                });\n                            }\n\n                            this.setState({\n                                dayCount:value[1]\n                            })\n                            console.log(this.state.pointData);\n                        }\n\n\n\n\n                        // let nowTime=value[1];\n                        // // console.log('nowTime:',nowTime);\n                        // if(Math.floor(nowTime/3600)!==this.state.hour){\n                        //     this.setState({hour:Math.floor(nowTime/3600)})\n                        //     console.log('nowztime:',nowTime);\n                        //     var hour=(nowTime/3600).toFixed(0);\n                        //     console.log('hour:',hour);\n                        //     var p=getRoute(hour);\n                        //     p.then(function() {\n                        //         this.setState({\n                        //             Route:Routes,\n                        //             depPolygon:depPolygon,\n                        //             desPolygon:desPolygon\n                        //         })\n                        //     }.bind(this))\n                        // }\n                        // this.setState({time: nowTime})\n                        // //console.log(this.state)\n                        // //console.log('value:',value)\n                    }}\n                />\n            </Fragment>\n        );\n    }\n}\n\n// export function renderToDOM(container) {\n//     render(<App />, container);\n//     require('d3-request').csv(DATA_URL, (error, response) => {\n//         if (!error) {\n//             const data = response.map(row => ({\n//                 timestamp: new Date(`${row.DateTime} UTC`).getTime(),\n//                 latitude: Number(row.Latitude),\n//                 longitude: Number(row.Longitude),\n//                 depth: Number(row.Depth),\n//                 magnitude: Number(row.Magnitude)\n//             }));\n//             render(<App data={data} />, container);\n//         }\n//     });\n// }\n","/Users/xxxxxxqq/ITS/deckgl/src/components/sliderTraffic.js",["305","306","307","308","309","310","311","312","313","314"],"/* global requestAnimationFrame, cancelAnimationFrame */\nimport React, {PureComponent} from 'react';\nimport {Client as Styletron} from 'styletron-engine-atomic';\nimport {Provider as StyletronProvider} from 'styletron-react';\nimport {LightTheme, BaseProvider, styled} from 'baseui';\nimport {Slider} from 'baseui/slider';\nimport {Button, SHAPE, SIZE} from 'baseui/button';\nimport Start from 'baseui/icon/chevron-right';\nimport Stop from 'baseui/icon/delete';\nimport { Select } from \"baseui/select\";\n\nconst engine = new Styletron();\n\nconst SelectContainer=styled('div',{\n    position: 'absolute',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    zIndex: 2,\n    top: '10px',\n    left:'10px'\n});\n\n\nconst Container = styled('div', {\n    position: 'absolute',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    zIndex: 1,\n    bottom: '20px',\n    width: '100%'\n});\n\nconst ThumbValue = styled('div', {\n    color: '#FF0000',\n    position: 'absolute',\n    top: '-2em',\n    width: '200px'\n});\n\nconst TickBar = styled('div', {\n    width: '480px',\n    height: '24px',\n    maxWidth: '80vw'\n});\n\n\n\n\n\n\n\nconst ANIMATION_SPEED = 1;\n\nexport default class sliderTraffic extends PureComponent {\n    constructor(props) {\n        super(props);\n        this.state = {\n            isPlaying: false\n        };\n\n        this._renderThumbValue = this._renderThumbValue.bind(this);\n        this._animate = this._animate.bind(this);\n        this._toggle = this._toggle.bind(this);\n        this._animationFrame = null;\n    }\n    componentDidMount() {\n        // this._animate()\n    }\n\n    // componentWillUnmount() {\n    //     cancelAnimationFrame(this._animationFrame);\n    // }\n\n    _toggle() {\n        cancelAnimationFrame(this._animationFrame);\n        const {isPlaying} = this.state;\n        if (!isPlaying) {\n            this._animate();\n        }\n        this.setState({isPlaying: !isPlaying});\n    }\n\n    _animate() {\n        const {min,max, value} = this.props;\n        let newValue=value[1]+ANIMATION_SPEED;\n        if(value[1]>max){\n            newValue=min;\n        }\n        this.props.onChange({\n            value: [value[0],newValue]\n        });\n        this._animationFrame = requestAnimationFrame(this._animate);\n    }\n\n    _renderThumbValue({$thumbIndex, $value}) {\n\n        if($thumbIndex==1){\n            const value = $value[$thumbIndex];\n            if(value==3600){\n                console.log('thumb==3600')\n            }\n           // console.log('thumb:',value)\n            return <ThumbValue Color={[0,0,0,255]} >{this.props.formatLabel(value)}</ThumbValue>;\n        }\n        else{\n            return <ThumbValue></ThumbValue>\n        }\n        // return <ThumbValue>{0}</ThumbValue>;\n    }\n\n    static getDerivedStateFromError(error) {\n        // Update state so the next render will show the fallback UI.\n        return { hasError: true };\n    }\n    componentDidCatch(error, errorInfo) {\n        // You can also log the error to an error reporting service\n        console.log(error, errorInfo);\n    }\n\n\n    render() {\n        const {value, min, max} = this.props;\n        const isButtonEnabled = value[0] > min || value[1] < max;\n        if (this.state.hasError) {\n            // You can render any custom fallback UI\n            return <h1>Something went wrong.</h1>;\n        }\n\n        return (\n                    <Container>\n                        <Button\n                            id={'start'}\n                            shape={SHAPE.round}\n                            size={SIZE.compact}\n                            disabled={!isButtonEnabled}\n                            onClick={this._toggle}\n                        >\n                            {this.state.isPlaying ? <Stop title=\"Stop\" /> : <Start title=\"Animate\" />}\n                        </Button>\n                        <Slider\n                            {...this.props}\n                            overrides={{\n                                ThumbValue: this._renderThumbValue,\n                                TickBar: () => <TickBar />\n                            }}\n                        />\n\n                    </Container>\n\n        );\n    }\n}\n","/Users/xxxxxxqq/ITS/deckgl/src/components/lineChart/ColorLegend.js",[],"/Users/xxxxxxqq/ITS/deckgl/src/components/city/AxisBottom.js",[],"/Users/xxxxxxqq/ITS/deckgl/src/components/city/useData.js",["315","316","317","318","319"],"import React, { useState, useEffect } from 'react';\nimport * as d3 from 'd3';\n\nconst InnerList=['Camden',\n    'Greenwich',\n    'Hackney',\n    'Hammersmith and Fulham',\n    'Islington',\n    'Kensington and Chelsea',\n    'Lambeth',\n    'Lewisham',\n    'Southwark',\n    'Tower Hamlets',\n    'Wandsworth',\n    'Westminster']\n\nexport const useData = () => {\n    const [data, setData] = useState(null);\n    useEffect(() => {\n        console.log('1');\n        d3.csv('./happy.csv').then(d=>{\n            let data={};\n            d.map((l,index)=>{\n                //l 结构：\n                // Code: \"E09000001\"\n                // Area: \"City of London\"\n                // 2011/12: \"x\"\n                // 2012/13: \"x\"\n                // 2013/14: \"x\"\n                // 2014/15: \"x\"\n                // 2015/16: \"x\"\n                // 2016/17: \"x\"\n                let pro=Object.getOwnPropertyNames(l);\n                // console.log(l);\n                pro.map((n,index)=>{\n                    if(index>1){\n                        if(data[n]===undefined){\n                            data[n]={}\n                        }\n                        if(data[n][l['Area']]===undefined){\n                            data[n][l['Area']]={};\n                        }\n                        data[n][l['Area']].happy=l[n];\n                        if(InnerList.indexOf(l['Area'].toString())>=0){\n                            console.log('innner')\n                            data[n][l['Area']].Area='InnerLondon'\n                        }\n                        else data[n][l['Area']].Area='OuterLondon'\n                    }\n\n                })\n                // l.map((t,i)=>{\n                //     if(i>1){\n                //         if(data[i]===undefined){\n                //             data[i]=[]\n                //         }\n                //         // data[i].happy=\n                //         console.log(Object.getOwnPropertyNames(t))\n                //     }\n                //\n                // })\n            })\n            // hpData=d;\n            // console.log('data:',data);\n            d3.csv('./worthwhile.csv').then(d=>{\n                d.map((l,index)=>{\n                    let pro=Object.getOwnPropertyNames(l);\n                    pro.map((n,index)=>{\n                        if(index>1){\n                            if(data[n]===undefined){\n                                data[n]={}\n                            }\n                            if(data[n][l['Area']]===undefined){\n                                data[n][l['Area']]={};\n                            }\n                            data[n][l['Area']].worth=l[n];\n                        }\n                    })\n                })\n                setData(data)\n            });\n        })\n    },[]);//这里加这个[],可以让这个useEffect只执行一次\n\n    return data;\n};\n","/Users/xxxxxxqq/ITS/deckgl/src/components/city/ColorLegend.js",[],"/Users/xxxxxxqq/ITS/deckgl/src/components/city/Marks.js",["320"],"import React from 'react';\nimport * as d3 from \"d3\";\n\n\nexport const Marks = ({\n                          data,\n                          xScale,\n                          xValue,\n                          yScale,\n                          yValue,\n                          colorScale,\n                          colorValue,\n                          tooltipFormat,\n                          circleRadius,\n                          year,\n                          callback,\n                          margin\n                      }) =>{\n    function dataAt(year){\n        console.log('data:',data);\n        let results=[];\n        let pro=Object.getOwnPropertyNames(data[year]);\n        pro.forEach(d=>{\n            results.push({\n                city:d,\n                data:data[year][d],\n            })\n        })\n        return results\n    }\n\n    if(year&&data){\n        let currentData=dataAt(year+'/'+(year-2000+1));\n        let svg=d3.select('svg');\n        let c1=svg.selectAll(\"circle\")\n            .data(currentData,d=>d['city'])\n        console.log('enter',c1)\n        let c=c1\n            .join('circle')\n            .attr(\"stroke\", \"black\")\n\n            .transition()\n            // .on('end',function repeat(){\n            //     console.log('end')\n            // })\n            .duration(1000)\n            .attr(\"r\", d =>{\n                if(!(parseFloat(d.data['happy'])&&parseFloat(d.data['worth']))) return 0;\n                else return Math.random()*10\n            })\n            .attr(\"cx\", d => {if(parseFloat(d.data['happy'])){\n                // console.log(d.data['happy'])\n                return xScale(d.data['happy'])+margin.left\n            }})\n            .attr(\"cy\", d => {if(d.data['worth']){\n                return yScale(d.data['worth'])+margin.top\n            }\n            })\n            .attr(\"fill\", d =>{\n                // console.log('d',d);\n                //  console.log('Area',d.data.Area)\n                return colorScale(d.data.Area)\n            } )\n            .end();\n        c.then(result=>{\n            // if(year<2016){\n            //     setYear(year+1)\n            //     // updateCircle()\n            // }\n            // else {\n            //     setYear(2011)\n            //     // console.log('year:',year)\n            //     // year=2011;\n            //     // updateCircle()\n            // }\n            callback();\n            console.log('done')\n        })\n    }\n    return null\n}\n    // data.map(d => (\n    //     <circle\n    //         className=\"mark\"\n    //         cx={xScale(xValue(d))}\n    //         cy={yScale(yValue(d))}\n    //         fill={colorScale(colorValue(d))}\n    //         r={circleRadius}\n    //     >\n    //         <title>{tooltipFormat(xValue(d))}</title>\n    //     </circle>\n    // ));\n","/Users/xxxxxxqq/ITS/deckgl/src/components/city/AxisLeft.js",[],"/Users/xxxxxxqq/ITS/deckgl/src/components/Barchart/useData.js",[],"/Users/xxxxxxqq/ITS/deckgl/src/components/Barchart/Marks.js",["321","322","323","324","325","326"],"import React from 'react';\nimport * as d3 from \"d3\";\n\nexport const Marks = ({\n                          data,\n                          xScale,\n                          xValue,\n                          yScale,\n                          innerHeight,\n                          innerWidth,\n                          margin,\n                          keys,\n                            start,\n                          callback\n                      }) =>{\n\n    const svg=d3.select('svg');\n\n    const xLength=24;\n    const getTime=d=>{\n        let date=new Date(d.date);\n        let hour=date.getHours();\n        let day=date.getDate();\n        return day+'/'+hour+':00'\n\n    }\n\n    const delay=1000;\n\n    let stack = d3.stack()//\n        .offset(d3.stackOffsetNone)\n        .order(d3.stackOrderNone);\n\n\n    var colorScale = d3.scaleOrdinal()\n        .range(d3.schemeCategory10);\n\n    var area = d3.area()\n        .x(d => xScale(xValue(d.data))+margin.left)\n        .y0(d => (yScale(d[0])+margin.top))\n        .y1(d => (yScale(d[1])+margin.top))\n        .curve(d3.curveBasis);\n\n\n    if(data){\n        data=data.slice(19,139);\n        // console.log(keys)\n        stack.keys(keys);\n        // console.log('data',data);\n        let stacked=stack(data);\n        // console.log('stack',stacked);\n\n        colorScale.domain(d3.range(keys.length));\n\n        xScale\n            .domain(d3.extent(data, xValue))\n            .range([0, innerWidth]);\n        yScale\n            .domain([\n                d3.min(stacked, function (series) {\n                    return d3.min(series, function (d) { return d[0]; });\n                }),\n                d3.max(stacked, function (series) {\n                    return d3.max(series, function (d) { return d[1]; });\n                })\n            ])\n            .range([ innerHeight,0]);\n\n\n        let rectData=[];\n//stack的数据结构：\n//      //数组里面7个元素分别对应7个地点\n//      //每个元素又是一个数组有24个元素分别对应24小时\n/*       (7) [Array(24), Array(24), Array(24), Array(24), Array(24), Array(24), Array(24)]\n0: Array(24)\n0: (2) [0, 19.3671431509997, data: {…}, key: \"San Francisco\"]\n1: (2) [0, 20.8082012083461, data: {…}, key: \"San Francisco\"]\n2: (2) [0, 22.5238576663828, data: {…}, key: \"San Francisco\"]\n3: (2) [0, 24.4214051463704, data: {…}, key: \"San Francisco\"]\n4: (2) [0, 26.2049693716955, data: {…}, key: \"San Francisco\"]\n5: (2) [0, 26.579802484894, data: {…}, key: \"San Francisco\"]\n6: (2) [0, 26.5525094442272, data: {…}, key: \"San Francisco\"]\n7: (2) [0, 23.9758724990251, data: {…}, key: \"San Francisco\"]\n8: (2) [0, 20.7705334007582, data: {…}, key: \"San Francisco\"]\n9: (2) [0, 19.5826361563267, data: {…}, key: \"San Francisco\"]\n10: (2) [0, 18.7265399946616, data: {…}, key: \"San Francisco\"]\n11: (2) [0, 18.2886029132647, data: {…}, key: \"San Francisco\"]\n12: (2) [0, 17.4904771411586, data: {…}, key: \"San Francisco\"]\n13: (2) [0, 17.1831430954037, data: {…}, key: \"San Francisco\"]\n14: (2) [0, 17.2898856656444, data: {…}, key: \"San Francisco\"]\n15: (2) [0, 17.8578100360021, data: {…}, key: \"San Francisco\"]\n16: (2) [0, 18.1992192220978, data: {…}, key: \"San Francisco\"]\n17: (2) [0, 18.13420905954, data: {…}, key: \"San Francisco\"]\n18: (2) [0, 18.5888149684944, data: {…}, key: \"San Francisco\"]\n19: (2) [0, 18.6733003026984, data: {…}, key: \"San Francisco\"]\n20: (2) [0, 19.1600833190036, data: {…}, key: \"San Francisco\"]\n21: (2) [0, 19.207095797011, data: {…}, key: \"San Francisco\"]\n22: (2) [0, 18.9847082241235, data: {…}, key: \"San Francisco\"]\n23: (2) [0, 19.4293802064908, data: {…}, key: \"San Francisco\"]\nkey: \"San Francisco\"\nindex: 0\nlength: 24\n__proto__: Array(0)\n1: (24) [Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), key: \"Bangalore\", index: 1]\n2: (24) [Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), key: \"Boston\", index: 2]\n3: (24) [Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), key: \"Geneva\", index: 3]\n4: (24) [Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), key: \"Rio de Janeiro\", index: 4]\n5: (24) [Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), key: \"Shanghai\", index: 5]\n6: (24) [Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), Array(2), key: \"Singapore\", index: 6]\nlength: 7\n__proto__: Array(0)*/\n//\n//把 stack 再转换成按时间分组的数据，其实data就是按时间分组的，但是为了计算出堆叠出来的数据所以用的了stack\n        stacked.map(x=>{\n            x.map((t,index)=>{\n                t.key=x.key;\n                if(rectData[index]===undefined){\n                    rectData[index]=[]\n                }\n                rectData[index].push(t);\n            })\n        })\n\n        // console.log('rectData',rectData)\n\n\n        const group=svg.append('g');\n        const g2=svg.append('g');\n        let count=0;\n        let tmpData=[];\n\n\n        let groupCount=[];\n\n        // tmpData.forEach(d=>{d.n=tmpData.indexOf(d)})\n        let testData=[];\n\n        function update(){\n            let popNum=0;\n            groupCount.unshift(rectData[count].length);\n            if(groupCount.length>xLength){\n                // console.log('24')\n                popNum=groupCount.pop()\n            }\n            //tmpData 里面是每一个小矩形的数据(到目前为止所有插入的矩形)，如何对这些矩形计数呢从而和时间对应\n            //无论你有多少数据我都只取前24组时间内的数据//不对啊我这样做出来的效果并不是时间轴跟着动而是这个温度变成下一个时刻的温度这样的动态效果，最好试用的例子是不同年龄段的人随着时间变化的过程，并不是温度\n            rectData[count].forEach(d=>{\n                    d.count=count;\n                    tmpData.unshift(d)\n                }\n            );\n\n            testData.unshift(\n                    rectData[count]\n\n                );\n            // console.log('testData',xValue(testData[0][0].data))\n            if(testData.length>xLength)testData.pop();\n            // console.log('testData',testData)\n            let g=g2.selectAll('g').data(testData).enter().append('g');\n            // console.log('g',g);\n            // let g3=g.enter().append('g');\n            // g3.append('text').attr('x',d=>xScale(xValue(d[0].data))+margin.left).attr('y',d=>yScale(d[0][1])+margin.top).text(d=>xValue(d[0].data))\n            let g4=g2.selectAll('g')\n                .selectAll('rect')\n                .data(d=>d)\n                .join(\n                    enter=>enter.append('rect')\n                        .attr('fill', function (d) {\n                            return d3.interpolateSpectral(keys.indexOf(d.key)/8);\n                        })\n                        .attr('x', d =>{\n                            // console.log('x',xScale(xValue(d.data))+margin.left)\n                            return xScale(xValue(d.data))+margin.left-5\n                        } )\n                        .attr('y',d => (yScale(d[1])+margin.top))\n                        .attr('height',d=>(yScale(d[0])-yScale(d[1]))),\n\n                    update=>update\n                    //     .attr('x',d=>{\n                    //     console.log(this)\n                    //     if(d.count===count&&d.count>=xLength){\n                    //         return xScale(xValue(d.data))+margin.left\n                    //     }\n                    //     else return this.x\n                    // })\n                )\n\n                // .attr('cx',(d,i,node)=>{\n                //     console.log('node',node);\n                //     if(xValue(d.data)===0&&i!==0)\n                //         return xScale(xValue(d.data))+margin.left\n                //     else return(node[i].cx)\n                // })\n            g4.filter((d,i)=>{\n                return xValue(d.data)===0\n            }).attr('fill', function (d) {\n                // console.log('count',d.count)\n                return d3.interpolateSpectral(keys.indexOf(d.key)/8);\n            })\n                .attr('x', d =>{\n                    // console.log('next!!')\n                    return xScale(xValue(d.data))+margin.left-5\n                } )\n                .attr('y',d => (yScale(d[1])+margin.top))\n                // .attr('height',d=>(yScale(d[0])-yScale(d[1])))\n                .attr('width',0)\n\n\n            let p1=g4.transition()\n                .duration(delay)\n                .attr('fill', function (d) {\n                    return d3.interpolateSpectral(keys.indexOf(d.key)/8);\n                })\n                .attr('x', d =>{\n                    // console.log('x',xScale(xValue(d.data))+margin.left)\n                    return xScale(xValue(d.data))+margin.left-5\n                } )\n                .attr('y',d => (yScale(d[1])+margin.top))\n                .attr('height',d=>(yScale(d[0])-yScale(d[1])))\n                .attr('width',10)\n                .end()\n\n            let g5=g2.selectAll('g').selectAll('text')\n                .data(d=>d)\n                .join('text')\n                .text((d,i,node)=>{\n                    // console.log('d12',d);\n                    if (i===6) return getTime(d.data);\n                    else return null\n                })\n                .attr('dy',\".2em\")\n                .attr('font-size',\"8\")\n\n\n            g5.filter(d=>{\n                return xValue(d.data)===0\n            }).attr('x',d=>xScale(xValue(d.data))+margin.left-12)\n                .attr('y',d=>yScale(d[1])+margin.top)\n\n            g5.transition()\n                .duration(delay)\n                .attr('x',d=>xScale(xValue(d.data))+margin.left-12)\n                .attr('y',d=>yScale(d[1])+margin.top)\n            // g3.selectAll('circle').data(d=>d).enter().append('circle')\n            //     .transition()\n            //     .duration(2000)\n            //     .attr('r',10).attr('cy',d=>yScale(d[1])+margin.top).attr('cx',d=>xScale(xValue(d.data))+margin.left);\n\n            // console.log('g3',)\n\n\n\n\n\n            //如果界面满了就不再增加数据量\n            for(let i=0;i<popNum;i++){\n                tmpData.pop()\n            }\n            let t=[];\n            tmpData.forEach((d,index)=>{\n                let m=[d[0],d[1]];\n                m.data=d.data;\n                m.key=d.key;\n                m.n=index;\n                m.count=d.count\n                t.push(m)\n            });\n            console.log('t.len',t.length)\n\n\n\n\n            // console.log('t',t);\n            // console.log('tmpData',tmpData);\n            // let s1=group.selectAll('rect')\n            //     .data(t,d=>d.n)\n            // .join(\n            //         enter=>enter.append('rect')\n            //             .attr('fill', function (d) {\n            //                 return d3.interpolateSpectral(keys.indexOf(d.key)/8);\n            //             })\n            //             .attr('x', d =>{\n            //                 // console.log('x',xScale(xValue(d.data))+margin.left)\n            //                 return xScale(xValue(d.data))+margin.left\n            //             } )\n            //             .attr('y',d => (yScale(d[1])+margin.top))\n            //             .attr('height',d=>(yScale(d[0])-yScale(d[1]))),\n            //\n            //         update=>update\n            //         //     .attr('x',d=>{\n            //         //     console.log(this)\n            //         //     if(d.count===count&&d.count>=xLength){\n            //         //         return xScale(xValue(d.data))+margin.left\n            //         //     }\n            //         //     else return this.x\n            //         // })\n            //     )\n            // //要选择的是坐标轴最后一个数据而不是最新的数据！！！而最后一个的当前数据的时间是0点\n            // let f=group.selectAll('rect')\n            //     .filter(d=>xValue(d.data)===0&&d.count>1)\n            //     .attr('fill', function (d) {\n            //         // console.log('count',d.count)\n            //         return d3.interpolateSpectral(keys.indexOf(d.key)/8);\n            //     })\n            //     .attr('x', d =>{\n            //         // console.log('next!!')\n            //         return xScale(xValue(d.data))+margin.left\n            //     } )\n            //     .attr('y',d => (yScale(d[1])+margin.top))\n            //     // .attr('height',d=>(yScale(d[0])-yScale(d[1])))\n            //      .attr('width',0)\n            //\n            // let p1=s1.transition()\n            //     .duration(800)\n            //     .attr('fill', function (d) {\n            //         return d3.interpolateSpectral(keys.indexOf(d.key)/8);\n            //     })\n            //     .attr('x', d =>{\n            //         // console.log('x',xScale(xValue(d.data))+margin.left)\n            //         return xScale(xValue(d.data))+margin.left\n            //     } )\n            //     .attr('y',d => (yScale(d[1])+margin.top))\n            //     .attr('height',d=>(yScale(d[0])-yScale(d[1])))\n            //     .attr('width',10)\n            //     .end()\n            // let p2=s1.enter().append('rect')\n            //     .attr('fill', function (d) {\n            //         return d3.interpolateSpectral(keys.indexOf(d.key)/8);\n            //     })\n            //     .attr('x', d =>{\n            //         // console.log('x',xScale(xValue(d.data))+margin.left)\n            //         return xScale(xValue(d.data))+margin.left\n            //     } )\n            //     .attr('y',d => (yScale(d[1])+margin.top))\n            //     .attr('height',d=>(yScale(d[0])-yScale(d[1])))\n            //     // .attr('stroke', function (d) { return d3.interpolateSpectral(keys.indexOf(d[0].data[d.index]/8)); })\n            //     // .transition()\n            //     // .duration(2000)\n            //     .transition()\n            //     .duration(1000)\n            //     .attr('width',10)\n            //     .end();\n\n\n\n             // let p2= p.enter().append('rect')\n             //      .attr('fill', function (d) {\n             //    return d3.interpolateSpectral(keys.indexOf(d.key)/8);\n             //    })\n             //    .transition()\n             //    .duration(2000)\n             //    .attr('x', d =>{\n             //        console.log('x',xScale(xValue(d.data))+margin.left)\n             //        return xScale(xValue(d.data))+margin.left\n             //    } )\n             //    .attr('y',d => (yScale(d[1])+margin.top))\n             //    .attr('height',d=>(yScale(d[0])-yScale(d[1])))\n             //    // .attr('stroke', function (d) { return d3.interpolateSpectral(keys.indexOf(d[0].data[d.index]/8)); })\n             //    // .transition()\n             //    // .duration(2000)\n             //    .attr('width',10)\n             //     .end()\n            p1.then(()=>{\n                if(count<(rectData.length-1)){\n                    // let p2=group.transition()\n                    //     .duration(1000)\n                    //     .attr(\"transform\", `translate(${xScale(1)-xScale(0)},0)`)\n                    //     .end()\n                    // p2.then(()=>{\n                        count++;\n                        // tmpData=tmpData.slice(0,2);\n\n                    // console.log('tmpData1',tmpData);\n                    // console.log('t1',t)\n                        update()\n                        // }\n                    // )\n\n                }\n                else{\n                    // callback()\n                    // count=0;\n                }\n            })\n        }\n\n        update();\n\n        // stacked.map((x,index)=>{\n        //     // if(index!==0){\n        //     //     return\n        //     // }\n        //     svg.selectAll('rect')\n        //         .data(x)\n        //\n        // })\n        // let p=\n        //     .end();\n\n        // p.then(r=>{\n        //     callback()\n        // })\n    }\n\n    return null;\n\n}\n","/Users/xxxxxxqq/ITS/deckgl/src/components/streamgraph/Marks.js",["327"],"import React from 'react';\nimport * as d3 from \"d3\";\n\nexport const Marks = ({\n                          data,\n                          xScale,\n                          xValue,\n                          yScale,\n                          innerHeight,\n                          innerWidth,\n                          margin,\n                          keys,\n                            start,\n                          callback\n                      }) =>{\n\n    const svg=d3.select('svg');\n\n    let stack = d3.stack()//\n        .offset(d3.stackOffsetWiggle)\n        .order(d3.stackOrderNone);\n\n\n    var colorScale = d3.scaleOrdinal()\n        .range(d3.schemeCategory10);\n\n    var area = d3.area()\n        .x(d => xScale(xValue(d.data))+margin.left)\n        .y0(d => (yScale(d[0])+margin.top))\n        .y1(d => (yScale(d[1])+margin.top))\n        .curve(d3.curveBasis);\n\n\n    if(data){\n        data=data.slice(start,start+24);\n        // console.log(keys)\n        stack.keys(keys);\n        // console.log('data',data);\n        let stacked=stack(data);\n        // console.log('stack',stacked);\n\n        colorScale.domain(d3.range(keys.length));\n\n        xScale\n            .domain(d3.extent(data, xValue))\n            .range([0, innerWidth]);\n        yScale\n            .domain([\n                d3.min(stacked, function (series) {\n                    return d3.min(series, function (d) { return d[0]; });\n                }),\n                d3.max(stacked, function (series) {\n                    return d3.max(series, function (d) { return d[1]; });\n                })\n            ])\n            .range([ innerHeight,0]);\n\n        let p=svg.selectAll('path')\n            .data(stacked)\n            .join('path')\n            .attr('fill', function (d) {\n                // console.log('d',d)\n                // console.log(d[0].data[d.index]);\n                return d3.interpolateSpectral(keys.indexOf(d.key)/8);\n            })\n            .attr('stroke', function (d) { return d3.interpolateSpectral(keys.indexOf(d[0].data[d.index]/8)); })\n            .transition()\n            .duration(2000)\n            .attr('d', area)\n            .end();\n\n        p.then(r=>{\n            callback()\n        })\n    }\n\n    return null;\n\n}\n","/Users/xxxxxxqq/ITS/deckgl/src/components/charts/panel.js",["328","329"],"\nimport {Component} from 'react';\nimport React,{Fragment} from 'react';\n\nimport {Slider} from 'antd'\n\nconst style = {\n    display: 'inline-block',\n    height: 200,\n    width: 300,\n    marginLeft: 70,\n};\n\nconst marks = {\n    0: '0°C',\n    26: '26°C',\n    37: '37°C',\n    100: {\n        style: {\n            color: '#f50',\n        },\n        label: <strong>100°C</strong>,\n    },\n};\n\nexport default class Panel extends Component{\n    constructor(props){\n        super();\n    }\n    componentDidMount() {\n\n    }\n    render() {\n        return (\n            <container>\n                <div style={style}>\n                    <Slider vertical defaultValue={30} />\n                </div>\n            </container>\n        )\n    }\n}\n","/Users/xxxxxxqq/ITS/deckgl/src/components/streamgraph/useData.js",[],"/Users/xxxxxxqq/ITS/deckgl/src/components/charts/charts.js",["330","331"],"import { Bar } from '@antv/g2plot';\nimport { Line } from '@antv/g2plot';\nimport {Component} from 'react';\nimport React,{Fragment} from 'react';\n\n\n\n\n\n\nlet data = [\n];\n\n\nconst background={\n    width: \"300px\",\n    margin: \"30px auto\",\n    backgroundColor: \"#FFFFFF\",  //驼峰法\n    minHeight: \"50px\",\n    boxSizing: \"border-box\",\n    position: \"fixed\",\n    top: \"400px\"\n\n};\n\nexport default class Charts extends Component{\n    constructor(props){\n        super(props);\n        data=props.data;\n    }\n\n    componentDidMount() {\n        const line = new Line('line', {\n            data,\n            xField: 'time',\n            yField: 'speed',\n        });\n\n        line.render();\n    }\n\n    render() {\n        return (\n            <container>\n                <div id={'background'} style ={background}>\n                    <div id={'line'}/>\n                </div>\n            </container>\n        )\n    }\n}\n","/Users/xxxxxxqq/ITS/deckgl/src/components/sliderCovid.js",["332","333","334","335"],"/* global requestAnimationFrame, cancelAnimationFrame */\nimport React, {PureComponent} from 'react';\nimport {Client as Styletron} from 'styletron-engine-atomic';\nimport {Provider as StyletronProvider} from 'styletron-react';\nimport {LightTheme, BaseProvider, styled} from 'baseui';\nimport {Slider} from 'baseui/slider';\nimport {Button, SHAPE, SIZE} from 'baseui/button';\nimport Start from 'baseui/icon/chevron-right';\nimport Stop from 'baseui/icon/delete';\n\nconst engine = new Styletron();\n\nconst ButtonContainer=styled('div',{\n    position: 'absolute',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    zIndex: 2,\n    top: '10px',\n    left:'10px'\n});\n\nconst Container = styled('div', {\n    position: 'absolute',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    zIndex: 1,\n    bottom: '20px',\n    width: '100%'\n});\n\nconst ThumbValue = styled('div', {\n    color: '#000000',\n    position: 'absolute',\n    top: '-2em'\n});\n\nconst TickBar = styled('div', {\n    width: '480px',\n    height: '20px',\n    maxWidth: '80vw'\n});\n\nconst ANIMATION_SPEED = 1;\nlet count=0;\n\nexport default class sliderCovid extends PureComponent {\n    constructor(props) {\n        super(props);\n        this.state = {\n            isPlaying: false\n        };\n\n        this._renderThumbValue = this._renderThumbValue.bind(this);\n        this._animate = this._animate.bind(this);\n        this._toggle = this._toggle.bind(this);\n        this._animationFrame = null;\n    }\n\n    componentWillUnmount() {\n        cancelAnimationFrame(this._animationFrame);\n    }\n\n    _toggle() {\n        cancelAnimationFrame(this._animationFrame);\n        const {isPlaying} = this.state;\n        if (!isPlaying) {\n            this._animate();\n        }\n        this.setState({isPlaying: !isPlaying});\n    }\n\n    _animate() {\n        count++;\n        // console.log(count);\n        if(count===ANIMATION_SPEED){\n            const {max,value} = this.props;\n            let newCount=((value[1]+1)>max)?0:value[1]+1;\n\n            let date=new Date('2020-01-22');\n            date.setDate(date.getDate()+value[1]);\n            console.log('mounth:',date.getMonth());\n\n            // let month=date.getUTCMonth()+1;\n            // if(month<10){\n            //     month='0'+month\n            // }\n            // else{\n            //     month=month.toString()\n            // }\n            // let tmpstr=date.getFullYear()+'-'+date.getUTCMonth()+1+'-'+date.getDate();\n            let tmpstr=`${date.getFullYear()}-${(date.getMonth()+1)<10?'0'+(date.getMonth()+1):date.getMonth()+1}-${date.getDate()<10?'0'+date.getDate():date.getDate()}`;\n            console.log('tmpstr:',tmpstr);\n            this.props.onChange({\n                date:tmpstr,\n                value:[0,newCount]\n            });\n            count=0\n        }\n        this._animationFrame = requestAnimationFrame(this._animate);\n    }\n\n    _renderThumbValue({$thumbIndex, $value}) {\n        //console.log('$thumbIndex:',$thumbIndex);\n        if($thumbIndex==1){\n            const value = $value[$thumbIndex];\n            // console.log('thumb:',value)\n            return <ThumbValue Color={[0,0,0,255]}>{this.props.formatLabel(value)}</ThumbValue>;\n        }\n        else{\n            return <ThumbValue></ThumbValue>\n        }\n\n        // return <ThumbValue>{0}</ThumbValue>;\n    }\n\n\n\n\n    render() {\n        const {value, min, max} = this.props;\n        const isButtonEnabled = value[0] > min || value[1] < max;\n        if (this.state.hasError) {\n            // You can render any custom fallback UI\n            return <h1>Something went wrong.</h1>;\n        }\n\n        return (\n            <StyletronProvider value={engine}>\n                <BaseProvider theme={LightTheme}>\n                    <Container>\n                        <Button\n                            shape={SHAPE.round}\n                            size={SIZE.compact}\n                            disabled={!isButtonEnabled}\n                            onClick={this._toggle}\n                        >\n                            {this.state.isPlaying ? <Stop title=\"Stop\" /> : <Start title=\"Animate\" />}\n                        </Button>\n                        <Slider\n                            {...this.props}\n                            overrides={{\n                                ThumbValue: this._renderThumbValue,\n                                TickBar: () => <TickBar />\n                            }}\n                        />\n                    </Container>\n                    {/*<ButtonContainer>*/}\n                    {/*    <Button*/}\n                    {/*        shape={SHAPE.round}*/}\n                    {/*        size={SIZE.compact}*/}\n                    {/*        disabled={!isButtonEnabled}*/}\n                    {/*    >*/}\n                    {/*    </Button>*/}\n                    {/*</ButtonContainer>*/}\n                </BaseProvider>\n            </StyletronProvider>\n        );\n    }\n}\n","/Users/xxxxxxqq/ITS/deckgl/src/components/magicmirror/Mirror.js",[],"/Users/xxxxxxqq/ITS/deckgl/src/components/magicmirror/Clock.js",[],"/Users/xxxxxxqq/ITS/deckgl/src/components/magicmirror/Navi.js",["336","337","338","339","340"],"import React from 'react';\r\nimport { Menu , Button} from 'antd';\r\nimport {\r\n    MenuUnfoldOutlined,\r\n    MenuFoldOutlined, \r\n    PictureOutlined,\r\n    CalendarOutlined,\r\n    ControlOutlined,\r\n  } from '@ant-design/icons';\r\nimport St from './St';\r\nimport Appo from './Appo'\r\nimport {Panel} from '../panel/control'\r\n  \r\n\r\n\r\nexport default class Navi extends React.Component {\r\n\r\n    state = {\r\n        collapsed: false,\r\n        key: 1,\r\n    };\r\n\r\n    toggleCollapsed = () => {\r\n        this.setState({\r\n          collapsed: !this.state.collapsed,\r\n        });\r\n    };\r\n\r\n    changeStyle = function (elem, name, value) {\r\n        elem.style[name] = value;\r\n    }\r\n    handleClick = e => {\r\n        this.setState({\r\n            key: e.key\r\n        })\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <div className='navi'>\r\n                    {/* <Button type=\"primary\" onClick={this.toggleCollapsed} size='large' style={{ marginBottom: 16 }}>\r\n                        {React.createElement(this.state.collapsed ? MenuUnfoldOutlined : MenuFoldOutlined)}\r\n                    </Button> */}\r\n                    <Menu\r\n                        className='menu'\r\n                        onClick={this.handleClick}\r\n                        defaultSelectedKeys={['1']}\r\n                        theme=\"dark\"\r\n                        mode=\"vertical\"\r\n                        inlineCollapsed=\"true\">\r\n                        <Menu.Item key=\"1\" icon={<PictureOutlined />}>\r\n                            风格迁移\r\n                        </Menu.Item>\r\n                        <Menu.Item key=\"2\" icon={<CalendarOutlined />}>\r\n                            参观预约\r\n                        </Menu.Item>\r\n                        <Menu.Item key=\"3\" icon={<ControlOutlined />}>\r\n                            控制面板       \r\n                        </Menu.Item> \r\n                    </Menu>\r\n                </div>\r\n\r\n                <div className='box'>\r\n                    {\r\n                        this.state.key == 1?\r\n                            (<div className='b1'> \r\n                                <St />\r\n                            </div>)\r\n                            :\r\n                            this.state.key == 2?\r\n                                (<div className='b2'>\r\n                                    <Appo />\r\n                                </div>)\r\n                                :\r\n                                (<div className='b3'>\r\n                                    <Panel />\r\n                                </div>)\r\n                    }\r\n                </div>\r\n                \r\n            </div>\r\n        )\r\n    }\r\n}","/Users/xxxxxxqq/ITS/deckgl/src/components/magicmirror/Weather.js",[],"/Users/xxxxxxqq/ITS/deckgl/src/components/magicmirror/St.js",["341","342","343"],"import React from 'react';\r\nimport { Carousel,Image } from 'antd';\r\n\r\nconst contentStyle = {\r\n    weight: '800px',\r\n    height: '800px',\r\n};\r\n\r\n\r\n\r\nexport default class St extends React.Component {\r\n    state = {\r\n        key: 0,\r\n    };\r\n\r\n    onChange = a => {\r\n        this.setState({\r\n            key: a,\r\n        })\r\n    }\r\n    render() {\r\n        return(\r\n            <div className='pic_container'>\r\n                \r\n                {/* <img src={'./img/result'+this.state.key+'.jpg'}  className='p1'/> */}\r\n                <Image className='p1' src=\"error\" fallback=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3PTWBSGcbGzM6GCKqlIBRV0dHRJFarQ0eUT8LH4BnRU0NHR0UEFVdIlFRV7TzRksomPY8uykTk/zewQfKw/9znv4yvJynLv4uLiV2dBoDiBf4qP3/ARuCRABEFAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghgg0Aj8i0JO4OzsrPv69Wv+hi2qPHr0qNvf39+iI97soRIh4f3z58/u7du3SXX7Xt7Z2enevHmzfQe+oSN2apSAPj09TSrb+XKI/f379+08+A0cNRE2ANkupk+ACNPvkSPcAAEibACyXUyfABGm3yNHuAECRNgAZLuYPgEirKlHu7u7XdyytGwHAd8jjNyng4OD7vnz51dbPT8/7z58+NB9+/bt6jU/TI+AGWHEnrx48eJ/EsSmHzx40L18+fLyzxF3ZVMjEyDCiEDjMYZZS5wiPXnyZFbJaxMhQIQRGzHvWR7XCyOCXsOmiDAi1HmPMMQjDpbpEiDCiL358eNHurW/5SnWdIBbXiDCiA38/Pnzrce2YyZ4//59F3ePLNMl4PbpiL2J0L979+7yDtHDhw8vtzzvdGnEXdvUigSIsCLAWavHp/+qM0BcXMd/q25n1vF57TYBp0a3mUzilePj4+7k5KSLb6gt6ydAhPUzXnoPR0dHl79WGTNCfBnn1uvSCJdegQhLI1vvCk+fPu2ePXt2tZOYEV6/fn31dz+shwAR1sP1cqvLntbEN9MxA9xcYjsxS1jWR4AIa2Ibzx0tc44fYX/16lV6NDFLXH+YL32jwiACRBiEbf5KcXoTIsQSpzXx4N28Ja4BQoK7rgXiydbHjx/P25TaQAJEGAguWy0+2Q8PD6/Ki4R8EVl+bzBOnZY95fq9rj9zAkTI2SxdidBHqG9+skdw43borCXO/ZcJdraPWdv22uIEiLA4q7nvvCug8WTqzQveOH26fodo7g6uFe/a17W3+nFBAkRYENRdb1vkkz1CH9cPsVy/jrhr27PqMYvENYNlHAIesRiBYwRy0V+8iXP8+/fvX11Mr7L7ECueb/r48eMqm7FuI2BGWDEG8cm+7G3NEOfmdcTQw4h9/55lhm7DekRYKQPZF2ArbXTAyu4kDYB2YxUzwg0gi/41ztHnfQG26HbGel/crVrm7tNY+/1btkOEAZ2M05r4FB7r9GbAIdxaZYrHdOsgJ/wCEQY0J74TmOKnbxxT9n3FgGGWWsVdowHtjt9Nnvf7yQM2aZU/TIAIAxrw6dOnAWtZZcoEnBpNuTuObWMEiLAx1HY0ZQJEmHJ3HNvGCBBhY6jtaMoEiJB0Z29vL6ls58vxPcO8/zfrdo5qvKO+d3Fx8Wu8zf1dW4p/cPzLly/dtv9Ts/EbcvGAHhHyfBIhZ6NSiIBTo0LNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiEC/wGgKKC4YMA4TAAAAABJRU5ErkJggg==\"\r\n                />\r\n                <div className='select'>\r\n                    <Carousel afterChange={this.onChange} autoplay>\r\n                        <div>\r\n                            <img src='' style={contentStyle} />\r\n                        </div>\r\n                        <div>\r\n                            <img src='' style={contentStyle} />\r\n                        </div>\r\n                        <div>\r\n                            <img src='' style={contentStyle} />  \r\n                        </div>\r\n                    </Carousel>\r\n                    <h1 className='cn'> 请选择你喜欢的风格!</h1>\r\n                </div>\r\n                \r\n            </div>\r\n        )\r\n    }\r\n}","/Users/xxxxxxqq/ITS/deckgl/src/components/magicmirror/Appo.js",["344","345"],{"ruleId":"346","severity":1,"message":"347","line":1,"column":15,"nodeType":"348","messageId":"349","endLine":1,"endColumn":23},{"ruleId":"346","severity":1,"message":"350","line":3,"column":43,"nodeType":"348","messageId":"349","endLine":3,"endColumn":49},{"ruleId":"346","severity":1,"message":"351","line":3,"column":50,"nodeType":"348","messageId":"349","endLine":3,"endColumn":54},{"ruleId":"346","severity":1,"message":"352","line":12,"column":8,"nodeType":"348","messageId":"349","endLine":12,"endColumn":17},{"ruleId":"353","replacedBy":"354"},{"ruleId":"355","replacedBy":"356"},{"ruleId":"357","severity":1,"message":"358","line":12,"column":5,"nodeType":"359","messageId":"360","endLine":14,"endColumn":6},{"ruleId":"361","severity":1,"message":"362","line":43,"column":17,"nodeType":"363","endLine":43,"endColumn":54},{"ruleId":"361","severity":1,"message":"362","line":44,"column":17,"nodeType":"363","endLine":44,"endColumn":54},{"ruleId":"361","severity":1,"message":"362","line":45,"column":17,"nodeType":"363","endLine":45,"endColumn":54},{"ruleId":"361","severity":1,"message":"362","line":46,"column":17,"nodeType":"363","endLine":46,"endColumn":54},{"ruleId":"361","severity":1,"message":"362","line":47,"column":17,"nodeType":"363","endLine":47,"endColumn":54},{"ruleId":"361","severity":1,"message":"362","line":48,"column":17,"nodeType":"363","endLine":48,"endColumn":54},{"ruleId":"346","severity":1,"message":"364","line":2,"column":9,"nodeType":"348","messageId":"349","endLine":2,"endColumn":15},{"ruleId":"346","severity":1,"message":"365","line":13,"column":8,"nodeType":"348","messageId":"349","endLine":13,"endColumn":21},{"ruleId":"346","severity":1,"message":"366","line":55,"column":10,"nodeType":"348","messageId":"349","endLine":55,"endColumn":18},{"ruleId":"346","severity":1,"message":"367","line":103,"column":7,"nodeType":"348","messageId":"349","endLine":103,"endColumn":15},{"ruleId":"357","severity":1,"message":"358","line":9,"column":5,"nodeType":"359","messageId":"360","endLine":11,"endColumn":6},{"ruleId":"368","severity":1,"message":"369","line":18,"column":1,"nodeType":"370","endLine":29,"endColumn":3},{"ruleId":"346","severity":1,"message":"371","line":4,"column":9,"nodeType":"348","messageId":"349","endLine":4,"endColumn":19},{"ruleId":"346","severity":1,"message":"372","line":7,"column":8,"nodeType":"348","messageId":"349","endLine":7,"endColumn":10},{"ruleId":"346","severity":1,"message":"373","line":9,"column":10,"nodeType":"348","messageId":"349","endLine":9,"endColumn":15},{"ruleId":"346","severity":1,"message":"374","line":10,"column":8,"nodeType":"348","messageId":"349","endLine":10,"endColumn":9},{"ruleId":"346","severity":1,"message":"375","line":62,"column":32,"nodeType":"348","messageId":"349","endLine":62,"endColumn":44},{"ruleId":"346","severity":1,"message":"376","line":62,"column":45,"nodeType":"348","messageId":"349","endLine":62,"endColumn":54},{"ruleId":"346","severity":1,"message":"377","line":62,"column":55,"nodeType":"348","messageId":"349","endLine":62,"endColumn":71},{"ruleId":"346","severity":1,"message":"378","line":62,"column":72,"nodeType":"348","messageId":"349","endLine":62,"endColumn":80},{"ruleId":"346","severity":1,"message":"379","line":64,"column":10,"nodeType":"348","messageId":"349","endLine":64,"endColumn":16},{"ruleId":"346","severity":1,"message":"380","line":64,"column":17,"nodeType":"348","messageId":"349","endLine":64,"endColumn":21},{"ruleId":"346","severity":1,"message":"381","line":68,"column":10,"nodeType":"348","messageId":"349","endLine":68,"endColumn":24},{"ruleId":"346","severity":1,"message":"382","line":70,"column":8,"nodeType":"348","messageId":"349","endLine":70,"endColumn":14},{"ruleId":"346","severity":1,"message":"383","line":71,"column":9,"nodeType":"348","messageId":"349","endLine":71,"endColumn":21},{"ruleId":"346","severity":1,"message":"384","line":76,"column":9,"nodeType":"348","messageId":"349","endLine":76,"endColumn":12},{"ruleId":"346","severity":1,"message":"385","line":76,"column":14,"nodeType":"348","messageId":"349","endLine":76,"endColumn":17},{"ruleId":"346","severity":1,"message":"386","line":76,"column":19,"nodeType":"348","messageId":"349","endLine":76,"endColumn":23},{"ruleId":"346","severity":1,"message":"387","line":76,"column":25,"nodeType":"348","messageId":"349","endLine":76,"endColumn":31},{"ruleId":"346","severity":1,"message":"388","line":77,"column":13,"nodeType":"348","messageId":"349","endLine":77,"endColumn":17},{"ruleId":"346","severity":1,"message":"389","line":78,"column":9,"nodeType":"348","messageId":"349","endLine":78,"endColumn":13},{"ruleId":"346","severity":1,"message":"390","line":146,"column":7,"nodeType":"348","messageId":"349","endLine":146,"endColumn":22},{"ruleId":"346","severity":1,"message":"391","line":157,"column":7,"nodeType":"348","messageId":"349","endLine":157,"endColumn":23},{"ruleId":"346","severity":1,"message":"392","line":181,"column":5,"nodeType":"348","messageId":"349","endLine":181,"endColumn":15},{"ruleId":"346","severity":1,"message":"393","line":182,"column":7,"nodeType":"348","messageId":"349","endLine":182,"endColumn":19},{"ruleId":"346","severity":1,"message":"394","line":219,"column":7,"nodeType":"348","messageId":"349","endLine":219,"endColumn":25},{"ruleId":"346","severity":1,"message":"395","line":272,"column":10,"nodeType":"348","messageId":"349","endLine":272,"endColumn":24},{"ruleId":"396","severity":1,"message":"397","line":276,"column":29,"nodeType":"398","messageId":"399","endLine":276,"endColumn":31},{"ruleId":"400","severity":1,"message":"401","line":279,"column":185,"nodeType":"402","messageId":"403","endLine":279,"endColumn":186},{"ruleId":"346","severity":1,"message":"404","line":311,"column":10,"nodeType":"348","messageId":"349","endLine":311,"endColumn":25},{"ruleId":"346","severity":1,"message":"405","line":318,"column":5,"nodeType":"348","messageId":"349","endLine":318,"endColumn":17},{"ruleId":"400","severity":1,"message":"401","line":320,"column":221,"nodeType":"402","messageId":"403","endLine":320,"endColumn":222},{"ruleId":"346","severity":1,"message":"406","line":660,"column":10,"nodeType":"348","messageId":"349","endLine":660,"endColumn":18},{"ruleId":"407","severity":1,"message":"408","line":672,"column":32,"nodeType":"402","messageId":"409","endLine":672,"endColumn":34},{"ruleId":"407","severity":1,"message":"408","line":672,"column":48,"nodeType":"402","messageId":"409","endLine":672,"endColumn":50},{"ruleId":"407","severity":1,"message":"410","line":684,"column":46,"nodeType":"402","messageId":"409","endLine":684,"endColumn":48},{"ruleId":"396","severity":1,"message":"397","line":845,"column":29,"nodeType":"398","messageId":"399","endLine":845,"endColumn":31},{"ruleId":"346","severity":1,"message":"411","line":853,"column":10,"nodeType":"348","messageId":"349","endLine":853,"endColumn":18},{"ruleId":"346","severity":1,"message":"412","line":860,"column":5,"nodeType":"348","messageId":"349","endLine":860,"endColumn":9},{"ruleId":"346","severity":1,"message":"413","line":861,"column":10,"nodeType":"348","messageId":"349","endLine":861,"endColumn":15},{"ruleId":"346","severity":1,"message":"414","line":901,"column":10,"nodeType":"348","messageId":"349","endLine":901,"endColumn":15},{"ruleId":"396","severity":1,"message":"397","line":998,"column":30,"nodeType":"398","messageId":"399","endLine":998,"endColumn":32},{"ruleId":"346","severity":1,"message":"415","line":1051,"column":10,"nodeType":"348","messageId":"349","endLine":1051,"endColumn":19},{"ruleId":"346","severity":1,"message":"416","line":1065,"column":10,"nodeType":"348","messageId":"349","endLine":1065,"endColumn":21},{"ruleId":"396","severity":1,"message":"397","line":1115,"column":28,"nodeType":"398","messageId":"399","endLine":1115,"endColumn":30},{"ruleId":"396","severity":1,"message":"397","line":1126,"column":90,"nodeType":"398","messageId":"399","endLine":1126,"endColumn":92},{"ruleId":"396","severity":1,"message":"397","line":1148,"column":28,"nodeType":"398","messageId":"399","endLine":1148,"endColumn":30},{"ruleId":"396","severity":1,"message":"397","line":1159,"column":86,"nodeType":"398","messageId":"399","endLine":1159,"endColumn":88},{"ruleId":"346","severity":1,"message":"417","line":1177,"column":10,"nodeType":"348","messageId":"349","endLine":1177,"endColumn":22},{"ruleId":"396","severity":1,"message":"397","line":1179,"column":16,"nodeType":"398","messageId":"399","endLine":1179,"endColumn":18},{"ruleId":"346","severity":1,"message":"418","line":1199,"column":17,"nodeType":"348","messageId":"349","endLine":1199,"endColumn":18},{"ruleId":"396","severity":1,"message":"397","line":1200,"column":28,"nodeType":"398","messageId":"399","endLine":1200,"endColumn":30},{"ruleId":"346","severity":1,"message":"419","line":1234,"column":10,"nodeType":"348","messageId":"349","endLine":1234,"endColumn":24},{"ruleId":"346","severity":1,"message":"420","line":1249,"column":10,"nodeType":"348","messageId":"349","endLine":1249,"endColumn":21},{"ruleId":"346","severity":1,"message":"421","line":1268,"column":5,"nodeType":"348","messageId":"349","endLine":1268,"endColumn":12},{"ruleId":"346","severity":1,"message":"422","line":1275,"column":7,"nodeType":"348","messageId":"349","endLine":1275,"endColumn":29},{"ruleId":"346","severity":1,"message":"423","line":1280,"column":5,"nodeType":"348","messageId":"349","endLine":1280,"endColumn":21},{"ruleId":"400","severity":1,"message":"401","line":1331,"column":183,"nodeType":"402","messageId":"403","endLine":1331,"endColumn":184},{"ruleId":"400","severity":1,"message":"401","line":1344,"column":185,"nodeType":"402","messageId":"403","endLine":1344,"endColumn":186},{"ruleId":"424","severity":1,"message":"425","line":1419,"column":11,"nodeType":"426","messageId":"409","endLine":1419,"endColumn":15,"fix":"427"},{"ruleId":"407","severity":1,"message":"408","line":1711,"column":38,"nodeType":"402","messageId":"409","endLine":1711,"endColumn":40},{"ruleId":"407","severity":1,"message":"408","line":1711,"column":52,"nodeType":"402","messageId":"409","endLine":1711,"endColumn":54},{"ruleId":"346","severity":1,"message":"428","line":1928,"column":13,"nodeType":"348","messageId":"349","endLine":1928,"endColumn":24},{"ruleId":"346","severity":1,"message":"429","line":1929,"column":13,"nodeType":"348","messageId":"349","endLine":1929,"endColumn":18},{"ruleId":"346","severity":1,"message":"430","line":2637,"column":25,"nodeType":"348","messageId":"349","endLine":2637,"endColumn":39},{"ruleId":"346","severity":1,"message":"431","line":3089,"column":29,"nodeType":"348","messageId":"349","endLine":3089,"endColumn":34},{"ruleId":"346","severity":1,"message":"432","line":1,"column":16,"nodeType":"348","messageId":"349","endLine":1,"endColumn":25},{"ruleId":"346","severity":1,"message":"433","line":2,"column":8,"nodeType":"348","messageId":"349","endLine":2,"endColumn":16},{"ruleId":"346","severity":1,"message":"379","line":4,"column":10,"nodeType":"348","messageId":"349","endLine":4,"endColumn":16},{"ruleId":"346","severity":1,"message":"380","line":4,"column":17,"nodeType":"348","messageId":"349","endLine":4,"endColumn":21},{"ruleId":"346","severity":1,"message":"434","line":5,"column":9,"nodeType":"348","messageId":"349","endLine":5,"endColumn":21},{"ruleId":"346","severity":1,"message":"435","line":5,"column":23,"nodeType":"348","messageId":"349","endLine":5,"endColumn":33},{"ruleId":"346","severity":1,"message":"436","line":5,"column":35,"nodeType":"348","messageId":"349","endLine":5,"endColumn":41},{"ruleId":"346","severity":1,"message":"437","line":6,"column":19,"nodeType":"348","messageId":"349","endLine":6,"endColumn":28},{"ruleId":"346","severity":1,"message":"438","line":7,"column":21,"nodeType":"348","messageId":"349","endLine":7,"endColumn":38},{"ruleId":"346","severity":1,"message":"439","line":17,"column":9,"nodeType":"348","messageId":"349","endLine":17,"endColumn":13},{"ruleId":"396","severity":1,"message":"397","line":39,"column":24,"nodeType":"398","messageId":"399","endLine":39,"endColumn":26},{"ruleId":"396","severity":1,"message":"397","line":54,"column":20,"nodeType":"398","messageId":"399","endLine":54,"endColumn":22},{"ruleId":"400","severity":1,"message":"401","line":185,"column":50,"nodeType":"402","messageId":"403","endLine":185,"endColumn":51},{"ruleId":"346","severity":1,"message":"440","line":253,"column":14,"nodeType":"348","messageId":"349","endLine":253,"endColumn":28},{"ruleId":"396","severity":1,"message":"397","line":255,"column":21,"nodeType":"398","messageId":"399","endLine":255,"endColumn":23},{"ruleId":"346","severity":1,"message":"441","line":2,"column":16,"nodeType":"348","messageId":"349","endLine":2,"endColumn":24},{"ruleId":"346","severity":1,"message":"442","line":2,"column":26,"nodeType":"348","messageId":"349","endLine":2,"endColumn":37},{"ruleId":"346","severity":1,"message":"443","line":2,"column":39,"nodeType":"348","messageId":"349","endLine":2,"endColumn":48},{"ruleId":"346","severity":1,"message":"347","line":2,"column":50,"nodeType":"348","messageId":"349","endLine":2,"endColumn":58},{"ruleId":"346","severity":1,"message":"444","line":19,"column":7,"nodeType":"348","messageId":"349","endLine":19,"endColumn":16},{"ruleId":"346","severity":1,"message":"445","line":22,"column":7,"nodeType":"348","messageId":"349","endLine":22,"endColumn":13},{"ruleId":"346","severity":1,"message":"446","line":48,"column":9,"nodeType":"348","messageId":"349","endLine":48,"endColumn":15},{"ruleId":"346","severity":1,"message":"447","line":49,"column":9,"nodeType":"348","messageId":"349","endLine":49,"endColumn":17},{"ruleId":"396","severity":1,"message":"397","line":55,"column":28,"nodeType":"398","messageId":"399","endLine":55,"endColumn":30},{"ruleId":"396","severity":1,"message":"397","line":87,"column":42,"nodeType":"398","messageId":"399","endLine":87,"endColumn":44},{"ruleId":"346","severity":1,"message":"448","line":97,"column":33,"nodeType":"348","messageId":"349","endLine":97,"endColumn":34},{"ruleId":"346","severity":1,"message":"449","line":136,"column":5,"nodeType":"348","messageId":"349","endLine":136,"endColumn":9},{"ruleId":"396","severity":1,"message":"397","line":163,"column":21,"nodeType":"398","messageId":"399","endLine":163,"endColumn":23},{"ruleId":"396","severity":1,"message":"397","line":165,"column":29,"nodeType":"398","messageId":"399","endLine":165,"endColumn":31},{"ruleId":"346","severity":1,"message":"450","line":202,"column":13,"nodeType":"348","messageId":"349","endLine":202,"endColumn":21},{"ruleId":"396","severity":1,"message":"397","line":279,"column":26,"nodeType":"398","messageId":"399","endLine":279,"endColumn":28},{"ruleId":"396","severity":1,"message":"397","line":280,"column":29,"nodeType":"398","messageId":"399","endLine":280,"endColumn":31},{"ruleId":"451","severity":1,"message":"452","line":348,"column":21,"nodeType":"453","endLine":348,"endColumn":31},{"ruleId":"454","severity":1,"message":"455","line":377,"column":30,"nodeType":"456","endLine":377,"endColumn":53},{"ruleId":"346","severity":1,"message":"442","line":1,"column":27,"nodeType":"348","messageId":"349","endLine":1,"endColumn":38},{"ruleId":"346","severity":1,"message":"443","line":1,"column":40,"nodeType":"348","messageId":"349","endLine":1,"endColumn":49},{"ruleId":"346","severity":1,"message":"433","line":2,"column":8,"nodeType":"348","messageId":"349","endLine":2,"endColumn":16},{"ruleId":"346","severity":1,"message":"457","line":3,"column":10,"nodeType":"348","messageId":"349","endLine":3,"endColumn":13},{"ruleId":"346","severity":1,"message":"458","line":3,"column":42,"nodeType":"348","messageId":"349","endLine":3,"endColumn":45},{"ruleId":"346","severity":1,"message":"459","line":3,"column":55,"nodeType":"348","messageId":"349","endLine":3,"endColumn":61},{"ruleId":"346","severity":1,"message":"460","line":24,"column":10,"nodeType":"348","messageId":"349","endLine":24,"endColumn":17},{"ruleId":"396","severity":1,"message":"397","line":28,"column":28,"nodeType":"398","messageId":"399","endLine":28,"endColumn":30},{"ruleId":"396","severity":1,"message":"397","line":31,"column":34,"nodeType":"398","messageId":"399","endLine":31,"endColumn":36},{"ruleId":"396","severity":1,"message":"397","line":56,"column":32,"nodeType":"398","messageId":"399","endLine":56,"endColumn":34},{"ruleId":"396","severity":1,"message":"397","line":58,"column":38,"nodeType":"398","messageId":"399","endLine":58,"endColumn":40},{"ruleId":"454","severity":1,"message":"455","line":235,"column":29,"nodeType":"456","endLine":235,"endColumn":52},{"ruleId":"346","severity":1,"message":"442","line":2,"column":27,"nodeType":"348","messageId":"349","endLine":2,"endColumn":38},{"ruleId":"346","severity":1,"message":"443","line":2,"column":40,"nodeType":"348","messageId":"349","endLine":2,"endColumn":49},{"ruleId":"346","severity":1,"message":"347","line":2,"column":50,"nodeType":"348","messageId":"349","endLine":2,"endColumn":58},{"ruleId":"346","severity":1,"message":"433","line":3,"column":8,"nodeType":"348","messageId":"349","endLine":3,"endColumn":16},{"ruleId":"346","severity":1,"message":"461","line":6,"column":9,"nodeType":"348","messageId":"349","endLine":6,"endColumn":17},{"ruleId":"454","severity":1,"message":"455","line":88,"column":25,"nodeType":"456","endLine":88,"endColumn":48},{"ruleId":"346","severity":1,"message":"442","line":3,"column":27,"nodeType":"348","messageId":"349","endLine":3,"endColumn":38},{"ruleId":"346","severity":1,"message":"443","line":3,"column":40,"nodeType":"348","messageId":"349","endLine":3,"endColumn":49},{"ruleId":"346","severity":1,"message":"347","line":3,"column":50,"nodeType":"348","messageId":"349","endLine":3,"endColumn":58},{"ruleId":"346","severity":1,"message":"433","line":4,"column":8,"nodeType":"348","messageId":"349","endLine":4,"endColumn":16},{"ruleId":"346","severity":1,"message":"461","line":7,"column":9,"nodeType":"348","messageId":"349","endLine":7,"endColumn":17},{"ruleId":"454","severity":1,"message":"455","line":87,"column":25,"nodeType":"456","endLine":87,"endColumn":48},{"ruleId":"357","severity":1,"message":"358","line":12,"column":5,"nodeType":"359","messageId":"360","endLine":14,"endColumn":6},{"ruleId":"361","severity":1,"message":"362","line":49,"column":17,"nodeType":"363","endLine":49,"endColumn":61},{"ruleId":"346","severity":1,"message":"364","line":2,"column":9,"nodeType":"348","messageId":"349","endLine":2,"endColumn":15},{"ruleId":"346","severity":1,"message":"377","line":5,"column":9,"nodeType":"348","messageId":"349","endLine":5,"endColumn":25},{"ruleId":"346","severity":1,"message":"462","line":60,"column":7,"nodeType":"348","messageId":"349","endLine":60,"endColumn":17},{"ruleId":"346","severity":1,"message":"463","line":62,"column":7,"nodeType":"348","messageId":"349","endLine":62,"endColumn":17},{"ruleId":"464","severity":1,"message":"465","line":1,"column":11,"nodeType":"466","messageId":"467","endLine":1,"endColumn":32},{"ruleId":"464","severity":1,"message":"468","line":1,"column":34,"nodeType":"466","messageId":"467","endLine":1,"endColumn":54},{"ruleId":"346","severity":1,"message":"438","line":4,"column":21,"nodeType":"348","messageId":"349","endLine":4,"endColumn":38},{"ruleId":"346","severity":1,"message":"435","line":5,"column":9,"nodeType":"348","messageId":"349","endLine":5,"endColumn":19},{"ruleId":"346","severity":1,"message":"434","line":5,"column":21,"nodeType":"348","messageId":"349","endLine":5,"endColumn":33},{"ruleId":"346","severity":1,"message":"379","line":10,"column":10,"nodeType":"348","messageId":"349","endLine":10,"endColumn":16},{"ruleId":"346","severity":1,"message":"469","line":12,"column":7,"nodeType":"348","messageId":"349","endLine":12,"endColumn":13},{"ruleId":"346","severity":1,"message":"390","line":14,"column":7,"nodeType":"348","messageId":"349","endLine":14,"endColumn":22},{"ruleId":"407","severity":1,"message":"410","line":99,"column":23,"nodeType":"402","messageId":"409","endLine":99,"endColumn":25},{"ruleId":"407","severity":1,"message":"410","line":101,"column":21,"nodeType":"402","messageId":"409","endLine":101,"endColumn":23},{"ruleId":"346","severity":1,"message":"470","line":1,"column":8,"nodeType":"348","messageId":"349","endLine":1,"endColumn":13},{"ruleId":"396","severity":1,"message":"397","line":23,"column":28,"nodeType":"398","messageId":"399","endLine":23,"endColumn":30},{"ruleId":"396","severity":1,"message":"397","line":35,"column":34,"nodeType":"398","messageId":"399","endLine":35,"endColumn":36},{"ruleId":"396","severity":1,"message":"397","line":66,"column":32,"nodeType":"398","messageId":"399","endLine":66,"endColumn":34},{"ruleId":"396","severity":1,"message":"397","line":68,"column":38,"nodeType":"398","messageId":"399","endLine":68,"endColumn":40},{"ruleId":"346","severity":1,"message":"470","line":1,"column":8,"nodeType":"348","messageId":"349","endLine":1,"endColumn":13},{"ruleId":"346","severity":1,"message":"470","line":1,"column":8,"nodeType":"348","messageId":"349","endLine":1,"endColumn":13},{"ruleId":"346","severity":1,"message":"471","line":38,"column":9,"nodeType":"348","messageId":"349","endLine":38,"endColumn":13},{"ruleId":"396","severity":1,"message":"397","line":114,"column":22,"nodeType":"398","messageId":"399","endLine":114,"endColumn":24},{"ruleId":"396","severity":1,"message":"397","line":115,"column":28,"nodeType":"398","messageId":"399","endLine":115,"endColumn":30},{"ruleId":"346","severity":1,"message":"472","line":127,"column":15,"nodeType":"348","messageId":"349","endLine":127,"endColumn":20},{"ruleId":"346","severity":1,"message":"473","line":160,"column":17,"nodeType":"348","messageId":"349","endLine":160,"endColumn":18},{"ruleId":"346","severity":1,"message":"470","line":1,"column":8,"nodeType":"348","messageId":"349","endLine":1,"endColumn":13},{"ruleId":"346","severity":1,"message":"347","line":3,"column":15,"nodeType":"348","messageId":"349","endLine":3,"endColumn":23},{"ruleId":"346","severity":1,"message":"474","line":14,"column":7,"nodeType":"348","messageId":"349","endLine":14,"endColumn":12},{"ruleId":"346","severity":1,"message":"384","line":1,"column":10,"nodeType":"348","messageId":"349","endLine":1,"endColumn":13},{"ruleId":"346","severity":1,"message":"347","line":4,"column":15,"nodeType":"348","messageId":"349","endLine":4,"endColumn":23},{"ruleId":"464","severity":1,"message":"465","line":1,"column":11,"nodeType":"466","messageId":"467","endLine":1,"endColumn":32},{"ruleId":"464","severity":1,"message":"468","line":1,"column":34,"nodeType":"466","messageId":"467","endLine":1,"endColumn":54},{"ruleId":"346","severity":1,"message":"475","line":13,"column":7,"nodeType":"348","messageId":"349","endLine":13,"endColumn":22},{"ruleId":"407","severity":1,"message":"410","line":106,"column":23,"nodeType":"402","messageId":"409","endLine":106,"endColumn":25},{"ruleId":"346","severity":1,"message":"476","line":2,"column":17,"nodeType":"348","messageId":"349","endLine":2,"endColumn":23},{"ruleId":"346","severity":1,"message":"477","line":4,"column":5,"nodeType":"348","messageId":"349","endLine":4,"endColumn":23},{"ruleId":"346","severity":1,"message":"478","line":5,"column":5,"nodeType":"348","messageId":"349","endLine":5,"endColumn":21},{"ruleId":"407","severity":1,"message":"410","line":66,"column":40,"nodeType":"402","messageId":"409","endLine":66,"endColumn":42},{"ruleId":"407","severity":1,"message":"410","line":71,"column":44,"nodeType":"402","messageId":"409","endLine":71,"endColumn":46},{"ruleId":"361","severity":1,"message":"362","line":31,"column":29,"nodeType":"363","endLine":31,"endColumn":64},{"ruleId":"361","severity":1,"message":"362","line":34,"column":29,"nodeType":"363","endLine":34,"endColumn":64},{"ruleId":"361","severity":1,"message":"362","line":37,"column":29,"nodeType":"363","endLine":37,"endColumn":64},{"ruleId":"407","severity":1,"message":"410","line":17,"column":23,"nodeType":"402","messageId":"409","endLine":17,"endColumn":25},{"ruleId":"407","severity":1,"message":"410","line":86,"column":27,"nodeType":"402","messageId":"409","endLine":86,"endColumn":29},"no-unused-vars","'Fragment' is defined but never used.","Identifier","unusedVar","'Switch' is defined but never used.","'Link' is defined but never used.","'LineChart' is defined but never used.","no-native-reassign",["479"],"no-negated-in-lhs",["480"],"no-useless-constructor","Useless constructor.","MethodDefinition","noUselessConstructor","jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement","'render' is defined but never used.","'SliderTraffic' is defined but never used.","'download' is defined but never used.","'material' is assigned a value but never used.","import/no-anonymous-default-export","Assign arrow function to a variable before exporting as module default","ExportDefaultDeclaration","'TripsLayer' is defined but never used.","'F2' is defined but never used.","'Radar' is defined but never used.","'_' is defined but never used.","'PolygonLayer' is defined but never used.","'IconLayer' is defined but never used.","'ScatterplotLayer' is defined but never used.","'ArcLayer' is defined but never used.","'Select' is defined but never used.","'SIZE' is defined but never used.","'SelectionLayer' is defined but never used.","'Charts' is defined but never used.","'HexagonLayer' is defined but never used.","'Bar' is defined but never used.","'Pie' is defined but never used.","'Area' is defined but never used.","'Column' is defined but never used.","'Line' is defined but never used.","'keys' is defined but never used.","'SelectContainer' is assigned a value but never used.","'SelectContainer2' is assigned a value but never used.","'colorTable' is assigned a value but never used.","'ICON_MAPPING' is assigned a value but never used.","'INITIAL_VIEW_STATE' is assigned a value but never used.","'getRouteByTime' is defined but never used.","array-callback-return","Array.prototype.map() expects a return value from arrow function.","ArrowFunctionExpression","expectedInside","no-useless-concat","Unexpected string concatenation of literals.","BinaryExpression","unexpectedConcat","'gerRouteByPoint' is defined but never used.","'getRoutedata' is assigned a value but never used.","'getRoute' is defined but never used.","eqeqeq","Expected '!==' and instead saw '!='.","unexpected","Expected '===' and instead saw '=='.","'getBound' is defined but never used.","'root' is assigned a value but never used.","'Queue' is defined but never used.","'split' is defined but never used.","'getposmap' is defined but never used.","'getneighbor' is defined but never used.","'getBlockData' is defined but never used.","'m' is assigned a value but never used.","'setPredictData' is defined but never used.","'setRealData' is defined but never used.","'tmpIcon' is assigned a value but never used.","'selectedFeatureIndexes' is assigned a value but never used.","'heatmap_interval' is assigned a value but never used.","no-extra-bind","The function binding is unnecessary.","CallExpression",{"range":"481","text":"482"},"'trailLength' is assigned a value but never used.","'theme' is assigned a value but never used.","'newBeijingdata' is assigned a value but never used.","'bound' is assigned a value but never used.","'Component' is defined but never used.","'ReactDOM' is defined but never used.","'BaseProvider' is defined but never used.","'LightTheme' is defined but never used.","'styled' is defined but never used.","'Styletron' is defined but never used.","'StyletronProvider' is defined but never used.","'text' is defined but never used.","'adjustAllvideo' is defined but never used.","'useState' is defined but never used.","'useCallback' is defined but never used.","'useEffect' is defined but never used.","'totalTime' is assigned a value but never used.","'yScale' is assigned a value but never used.","'sorted' is assigned a value but never used.","'dataFlow' is assigned a value but never used.","'t' is assigned a value but never used.","'last' is assigned a value but never used.","'testData' is assigned a value but never used.","react/no-direct-mutation-state","Do not mutate state directly. Use setState().","MemberExpression","react/jsx-no-duplicate-props","No duplicate props allowed","JSXAttribute","'csv' is defined but never used.","'max' is defined but never used.","'extent' is defined but never used.","'getData' is defined but never used.","'AxisLeft' is defined but never used.","'MS_PER_DAY' is assigned a value but never used.","'dataFilter' is assigned a value but never used.","no-redeclare","'requestAnimationFrame' is already defined as a built-in global variable.","Block","redeclaredAsBuiltin","'cancelAnimationFrame' is already defined as a built-in global variable.","'engine' is assigned a value but never used.","'React' is defined but never used.","'area' is assigned a value but never used.","'group' is assigned a value but never used.","'g' is assigned a value but never used.","'marks' is assigned a value but never used.","'ButtonContainer' is assigned a value but never used.","'Button' is defined but never used.","'MenuUnfoldOutlined' is defined but never used.","'MenuFoldOutlined' is defined but never used.","no-global-assign","no-unsafe-negation",[50371,50382],""]